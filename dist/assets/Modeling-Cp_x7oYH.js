var Xc=Object.defineProperty;var Uc=(e,t,n)=>t in e?Xc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ne=(e,t,n)=>(Uc(e,typeof t!="symbol"?t+"":t,n),n);import{s as $o,S as jr,u as Fe,a as cs,b as Wc,_ as qc,M as Kc,c as Zc,C as jc}from"./MenubarV-08uhBKPi.js";import{B as No,D as it,O as wi,o as W,c as ne,F as ze,r as zt,a as ke,b as Pt,m as Te,e as ce,f as be,g as me,h as Ua,i as we,d as pe,j as Wa,t as ye,k as de,l as te,n as dt,p as qa,u as H,q as Re,s as qn,v as Qc,x as Bt,y as jt,z as Ka,A as he,C as $e,E as Za,G as mr,H as Co,I as Jc,J as ed,K as ut,L as td,M as Oe,N as We,P as ja,Q as nd,R as ge,S as un,T as _e,U as Qa,V as rd,W as Mo,X as Yi,Y as id,Z as od,_ as sd,$ as Io,a0 as Tt,a1 as st,a2 as Ja,a3 as ds,a4 as ad,a5 as ud}from"./index-AHP2iwTD.js";import{u as Ot,a as ld,c as qe,U as hs}from"./Resource-DAcpHkFS.js";var cd=function(t){var n=t.dt;return`
.p-splitter {
    display: flex;
    flex-wrap: nowrap;
    border: 1px solid `.concat(n("splitter.border.color"),`;
    background: `).concat(n("splitter.background"),`;
    border-radius: `).concat(n("border.radius.md"),`;
    color: `).concat(n("splitter.color"),`;
}

.p-splitter-vertical {
    flex-direction: column;
}

.p-splitter-gutter {
    flex-grow: 0;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1;
    background: `).concat(n("splitter.gutter.background"),`;
}

.p-splitter-gutter-handle {
    border-radius: `).concat(n("splitter.handle.border.radius"),`;
    background: `).concat(n("splitter.handle.background"),`;
    transition: outline-color `).concat(n("splitter.transition.duration"),", box-shadow ").concat(n("splitter.transition.duration"),`;
    outline-color: transparent;
}

.p-splitter-gutter-handle:focus-visible {
    box-shadow: `).concat(n("splitter.handle.focus.ring.shadow"),`;
    outline: `).concat(n("splitter.handle.focus.ring.width")," ").concat(n("splitter.handle.focus.ring.style")," ").concat(n("splitter.handle.focus.ring.color"),`;
    outline-offset: `).concat(n("splitter.handle.focus.ring.offset"),`;
}

.p-splitter-horizontal.p-splitter-resizing {
    cursor: col-resize;
    user-select: none;
}

.p-splitter-vertical.p-splitter-resizing {
    cursor: row-resize;
    user-select: none;
}

.p-splitter-horizontal > .p-splitter-gutter > .p-splitter-gutter-handle {
    height: `).concat(n("splitter.handle.size"),`;
    width: 100%;
}

.p-splitter-vertical > .p-splitter-gutter > .p-splitter-gutter-handle {
    width: `).concat(n("splitter.handle.size"),`;
    height: 100%;
}

.p-splitter-horizontal > .p-splitter-gutter {
    cursor: col-resize;
}

.p-splitter-vertical > .p-splitter-gutter {
    cursor: row-resize;
}

.p-splitterpanel {
    flex-grow: 1;
    overflow: hidden;
}

.p-splitterpanel-nested {
    display: flex;
}

.p-splitterpanel .p-splitter {
    flex-grow: 1;
    border: 0 none;
}
`)},dd={root:function(t){var n=t.props;return["p-splitter p-component","p-splitter-"+n.layout]},gutter:"p-splitter-gutter",gutterHandle:"p-splitter-gutter-handle"},hd={root:function(t){var n=t.props;return[{display:"flex","flex-wrap":"nowrap"},n.layout==="vertical"?{"flex-direction":"column"}:""]}},fd=No.extend({name:"splitter",theme:cd,classes:dd,inlineStyles:hd}),pd={name:"BaseSplitter",extends:$o,props:{layout:{type:String,default:"horizontal"},gutterSize:{type:Number,default:4},stateKey:{type:String,default:null},stateStorage:{type:String,default:"session"},step:{type:Number,default:5}},style:fd,provide:function(){return{$pcSplitter:this,$parentInstance:this}}};function fs(e){return yd(e)||md(e)||vd(e)||gd()}function gd(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vd(e,t){if(e){if(typeof e=="string")return Xi(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xi(e,t):void 0}}function md(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yd(e){if(Array.isArray(e))return Xi(e)}function Xi(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var eu={name:"Splitter",extends:pd,inheritAttrs:!1,emits:["resizestart","resizeend","resize"],dragging:!1,mouseMoveListener:null,mouseUpListener:null,touchMoveListener:null,touchEndListener:null,size:null,gutterElement:null,startPos:null,prevPanelElement:null,nextPanelElement:null,nextPanelSize:null,prevPanelSize:null,panelSizes:null,prevPanelIndex:null,timer:null,data:function(){return{prevSize:null}},mounted:function(){var t=this;if(this.panels&&this.panels.length){var n=!1;if(this.isStateful()&&(n=this.restoreState()),!n){var r=fs(this.$el.children).filter(function(o){return o.getAttribute("data-pc-name")==="splitterpanel"}),i=[];this.panels.map(function(o,s){var a=o.props&&o.props.size?o.props.size:null,u=a||100/t.panels.length;i[s]=u,r[s].style.flexBasis="calc("+u+"% - "+(t.panels.length-1)*t.gutterSize+"px)"}),this.panelSizes=i,this.prevSize=parseFloat(i[0]).toFixed(4)}}},beforeUnmount:function(){this.clear(),this.unbindMouseListeners()},methods:{isSplitterPanel:function(t){return t.type.name==="SplitterPanel"},onResizeStart:function(t,n,r){this.gutterElement=t.currentTarget||t.target.parentElement,this.size=this.horizontal?it.getWidth(this.$el):it.getHeight(this.$el),r||(this.dragging=!0,this.startPos=this.layout==="horizontal"?t.pageX||t.changedTouches[0].pageX:t.pageY||t.changedTouches[0].pageY),this.prevPanelElement=this.gutterElement.previousElementSibling,this.nextPanelElement=this.gutterElement.nextElementSibling,r?(this.prevPanelSize=this.horizontal?it.getOuterWidth(this.prevPanelElement,!0):it.getOuterHeight(this.prevPanelElement,!0),this.nextPanelSize=this.horizontal?it.getOuterWidth(this.nextPanelElement,!0):it.getOuterHeight(this.nextPanelElement,!0)):(this.prevPanelSize=100*(this.horizontal?it.getOuterWidth(this.prevPanelElement,!0):it.getOuterHeight(this.prevPanelElement,!0))/this.size,this.nextPanelSize=100*(this.horizontal?it.getOuterWidth(this.nextPanelElement,!0):it.getOuterHeight(this.nextPanelElement,!0))/this.size),this.prevPanelIndex=n,this.$emit("resizestart",{originalEvent:t,sizes:this.panelSizes}),this.$refs.gutter[n].setAttribute("data-p-gutter-resizing",!0),this.$el.setAttribute("data-p-resizing",!0)},onResize:function(t,n,r){var i,o,s;r?this.horizontal?(o=100*(this.prevPanelSize+n)/this.size,s=100*(this.nextPanelSize-n)/this.size):(o=100*(this.prevPanelSize-n)/this.size,s=100*(this.nextPanelSize+n)/this.size):(this.horizontal?i=t.pageX*100/this.size-this.startPos*100/this.size:i=t.pageY*100/this.size-this.startPos*100/this.size,o=this.prevPanelSize+i,s=this.nextPanelSize-i),this.validateResize(o,s)&&(this.prevPanelElement.style.flexBasis="calc("+o+"% - "+(this.panels.length-1)*this.gutterSize+"px)",this.nextPanelElement.style.flexBasis="calc("+s+"% - "+(this.panels.length-1)*this.gutterSize+"px)",this.panelSizes[this.prevPanelIndex]=o,this.panelSizes[this.prevPanelIndex+1]=s,this.prevSize=parseFloat(o).toFixed(4)),this.$emit("resize",{originalEvent:t,sizes:this.panelSizes})},onResizeEnd:function(t){this.isStateful()&&this.saveState(),this.$emit("resizeend",{originalEvent:t,sizes:this.panelSizes}),this.$refs.gutter.forEach(function(n){return n.setAttribute("data-p-gutter-resizing",!1)}),this.$el.setAttribute("data-p-resizing",!1),this.clear()},repeat:function(t,n,r){this.onResizeStart(t,n,!0),this.onResize(t,r,!0)},setTimer:function(t,n,r){var i=this;this.timer||(this.timer=setInterval(function(){i.repeat(t,n,r)},40))},clearTimer:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},onGutterKeyUp:function(){this.clearTimer(),this.onResizeEnd()},onGutterKeyDown:function(t,n){switch(t.code){case"ArrowLeft":{this.layout==="horizontal"&&this.setTimer(t,n,this.step*-1),t.preventDefault();break}case"ArrowRight":{this.layout==="horizontal"&&this.setTimer(t,n,this.step),t.preventDefault();break}case"ArrowDown":{this.layout==="vertical"&&this.setTimer(t,n,this.step*-1),t.preventDefault();break}case"ArrowUp":{this.layout==="vertical"&&this.setTimer(t,n,this.step),t.preventDefault();break}}},onGutterMouseDown:function(t,n){this.onResizeStart(t,n),this.bindMouseListeners()},onGutterTouchStart:function(t,n){this.onResizeStart(t,n),this.bindTouchListeners(),t.preventDefault()},onGutterTouchMove:function(t){this.onResize(t),t.preventDefault()},onGutterTouchEnd:function(t){this.onResizeEnd(t),this.unbindTouchListeners(),t.preventDefault()},bindMouseListeners:function(){var t=this;this.mouseMoveListener||(this.mouseMoveListener=function(n){return t.onResize(n)},document.addEventListener("mousemove",this.mouseMoveListener)),this.mouseUpListener||(this.mouseUpListener=function(n){t.onResizeEnd(n),t.unbindMouseListeners()},document.addEventListener("mouseup",this.mouseUpListener))},bindTouchListeners:function(){var t=this;this.touchMoveListener||(this.touchMoveListener=function(n){return t.onResize(n.changedTouches[0])},document.addEventListener("touchmove",this.touchMoveListener)),this.touchEndListener||(this.touchEndListener=function(n){t.resizeEnd(n),t.unbindTouchListeners()},document.addEventListener("touchend",this.touchEndListener))},validateResize:function(t,n){if(t>100||t<0||n>100||n<0)return!1;var r=wi.getVNodeProp(this.panels[this.prevPanelIndex],"minSize");if(this.panels[this.prevPanelIndex].props&&r&&r>t)return!1;var i=wi.getVNodeProp(this.panels[this.prevPanelIndex+1],"minSize");return!(this.panels[this.prevPanelIndex+1].props&&i&&i>n)},unbindMouseListeners:function(){this.mouseMoveListener&&(document.removeEventListener("mousemove",this.mouseMoveListener),this.mouseMoveListener=null),this.mouseUpListener&&(document.removeEventListener("mouseup",this.mouseUpListener),this.mouseUpListener=null)},unbindTouchListeners:function(){this.touchMoveListener&&(document.removeEventListener("touchmove",this.touchMoveListener),this.touchMoveListener=null),this.touchEndListener&&(document.removeEventListener("touchend",this.touchEndListener),this.touchEndListener=null)},clear:function(){this.dragging=!1,this.size=null,this.startPos=null,this.prevPanelElement=null,this.nextPanelElement=null,this.prevPanelSize=null,this.nextPanelSize=null,this.gutterElement=null,this.prevPanelIndex=null},isStateful:function(){return this.stateKey!=null},getStorage:function(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}},saveState:function(){wi.isArray(this.panelSizes)&&this.getStorage().setItem(this.stateKey,JSON.stringify(this.panelSizes))},restoreState:function(){var t=this,n=this.getStorage(),r=n.getItem(this.stateKey);if(r){this.panelSizes=JSON.parse(r);var i=fs(this.$el.children).filter(function(o){return o.getAttribute("data-pc-name")==="splitterpanel"});return i.forEach(function(o,s){o.style.flexBasis="calc("+t.panelSizes[s]+"% - "+(t.panels.length-1)*t.gutterSize+"px)"}),!0}return!1}},computed:{panels:function(){var t=this,n=[];return this.$slots.default().forEach(function(r){t.isSplitterPanel(r)?n.push(r):r.children instanceof Array&&r.children.forEach(function(i){t.isSplitterPanel(i)&&n.push(i)})}),n},gutterStyle:function(){return this.horizontal?{width:this.gutterSize+"px"}:{height:this.gutterSize+"px"}},horizontal:function(){return this.layout==="horizontal"},getPTOptions:function(){var t;return{context:{nested:(t=this.$parentInstance)===null||t===void 0?void 0:t.nestedState}}}}},_d=["onMousedown","onTouchstart","onTouchmove","onTouchend"],wd=["aria-orientation","aria-valuenow","onKeydown"];function bd(e,t,n,r,i,o){return W(),ne("div",Te({class:e.cx("root"),style:e.sx("root"),"data-p-resizing":!1},e.ptmi("root",o.getPTOptions)),[(W(!0),ne(ze,null,zt(o.panels,function(s,a){return W(),ne(ze,{key:a},[(W(),ke(Pt(s),{tabindex:"-1"})),a!==o.panels.length-1?(W(),ne("div",Te({key:0,ref_for:!0,ref:"gutter",class:e.cx("gutter"),role:"separator",tabindex:"-1",onMousedown:function(l){return o.onGutterMouseDown(l,a)},onTouchstart:function(l){return o.onGutterTouchStart(l,a)},onTouchmove:function(l){return o.onGutterTouchMove(l,a)},onTouchend:function(l){return o.onGutterTouchEnd(l,a)},"data-p-gutter-resizing":!1},e.ptm("gutter")),[ce("div",Te({class:e.cx("gutterHandle"),tabindex:"0",style:[o.gutterStyle],"aria-orientation":e.layout,"aria-valuenow":i.prevSize,onKeyup:t[0]||(t[0]=function(){return o.onGutterKeyUp&&o.onGutterKeyUp.apply(o,arguments)}),onKeydown:function(l){return o.onGutterKeyDown(l,a)},ref_for:!0},e.ptm("gutterHandle")),null,16,wd)],16,_d)):be("",!0)],64)}),128))],16)}eu.render=bd;var Ed={root:function(t){var n=t.instance;return["p-splitterpanel",{"p-splitterpanel-nested":n.isNested}]}},xd=No.extend({name:"splitterpanel",classes:Ed}),Sd={name:"BaseSplitterPanel",extends:$o,props:{size:{type:Number,default:null},minSize:{type:Number,default:null}},style:xd,provide:function(){return{$pcSplitterPanel:this,$parentInstance:this}}},Ui={name:"SplitterPanel",extends:Sd,inheritAttrs:!1,data:function(){return{nestedState:null}},computed:{isNested:function(){var t=this;return this.$slots.default().some(function(n){return t.nestedState=n.type.name==="Splitter"?!0:null,t.nestedState})},getPTOptions:function(){return{context:{nested:this.isNested}}}}};function kd(e,t,n,r,i,o){return W(),ne("div",Te({ref:"container",class:e.cx("root")},e.ptmi("root",o.getPTOptions)),[me(e.$slots,"default")],16)}Ui.render=kd;function Qr(e){return Za()?(mr(e),!0):!1}function vt(e){return typeof e=="function"?e():H(e)}const $d=typeof window<"u"&&typeof document<"u",Nd=e=>typeof e<"u",Cd=Object.prototype.toString,Md=e=>Cd.call(e)==="[object Object]",Id=()=>{};function Pd(e,t){function n(...r){return new Promise((i,o)=>{Promise.resolve(e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})).then(i).catch(o)})}return n}const tu=e=>e();function Ad(e=tu){const t=de(!0);function n(){t.value=!1}function r(){t.value=!0}const i=(...o)=>{t.value&&e(...o)};return{isActive:rd(t),pause:n,resume:r,eventFilter:i}}function ps(e,t=!1,n="Timeout"){return new Promise((r,i)=>{setTimeout(t?()=>i(n):r,e)})}function Td(e,t,n={}){const{eventFilter:r=tu,...i}=n;return we(e,Pd(r,t),i)}function an(e,t,n={}){const{eventFilter:r,...i}=n,{eventFilter:o,pause:s,resume:a,isActive:u}=Ad(r);return{stop:Td(e,t,{...i,eventFilter:o}),pause:s,resume:a,isActive:u}}function Od(e,t={}){if(!Co(e))return Jc(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const r in e.value)n[r]=ed(()=>({get(){return e.value[r]},set(i){var o;if((o=vt(t.replaceRef))!=null?o:!0)if(Array.isArray(e.value)){const a=[...e.value];a[r]=i,e.value=a}else{const a={...e.value,[r]:i};Object.setPrototypeOf(a,Object.getPrototypeOf(e.value)),e.value=a}else e.value[r]=i}}));return n}function Wi(e,t=!1){function n(d,{flush:h="sync",deep:f=!1,timeout:p,throwOnTimeout:g}={}){let m=null;const _=[new Promise(S=>{m=we(e,E=>{d(E)!==t&&(m==null||m(),S(E))},{flush:h,deep:f,immediate:!0})})];return p!=null&&_.push(ps(p,g).then(()=>vt(e)).finally(()=>m==null?void 0:m())),Promise.race(_)}function r(d,h){if(!Co(d))return n(E=>E===d,h);const{flush:f="sync",deep:p=!1,timeout:g,throwOnTimeout:m}=h??{};let y=null;const S=[new Promise(E=>{y=we([e,d],([k,I])=>{t!==(k===I)&&(y==null||y(),E(k))},{flush:f,deep:p,immediate:!0})})];return g!=null&&S.push(ps(g,m).then(()=>vt(e)).finally(()=>(y==null||y(),vt(e)))),Promise.race(S)}function i(d){return n(h=>!!h,d)}function o(d){return r(null,d)}function s(d){return r(void 0,d)}function a(d){return n(Number.isNaN,d)}function u(d,h){return n(f=>{const p=Array.from(f);return p.includes(d)||p.includes(vt(d))},h)}function l(d){return c(1,d)}function c(d=1,h){let f=-1;return n(()=>(f+=1,f>=d),h)}return Array.isArray(vt(e))?{toMatch:n,toContains:u,changed:l,changedTimes:c,get not(){return Wi(e,!t)}}:{toMatch:n,toBe:r,toBeTruthy:i,toBeNull:o,toBeNaN:a,toBeUndefined:s,changed:l,changedTimes:c,get not(){return Wi(e,!t)}}}function qi(e){return Wi(e)}function zd(e){var t;const n=vt(e);return(t=n==null?void 0:n.$el)!=null?t:n}const nu=$d?window:void 0;function ru(...e){let t,n,r,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,r,i]=e,t=nu):[t,n,r,i]=e,!t)return Id;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const o=[],s=()=>{o.forEach(c=>c()),o.length=0},a=(c,d,h,f)=>(c.addEventListener(d,h,f),()=>c.removeEventListener(d,h,f)),u=we(()=>[zd(t),vt(i)],([c,d])=>{if(s(),!c)return;const h=Md(d)?{...d}:d;o.push(...n.flatMap(f=>r.map(p=>a(c,f,p,h))))},{immediate:!0,flush:"post"}),l=()=>{u(),s()};return Qr(l),l}function Dd(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function gs(...e){let t,n,r={};e.length===3?(t=e[0],n=e[1],r=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],r=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=nu,eventName:o="keydown",passive:s=!1,dedupe:a=!1}=r,u=Dd(t);return ru(i,o,c=>{c.repeat&&vt(a)||u(c)&&n(c)},s)}function Ld(e){return JSON.parse(JSON.stringify(e))}function bi(e,t,n,r={}){var i,o,s;const{clone:a=!1,passive:u=!1,eventName:l,deep:c=!1,defaultValue:d,shouldEmit:h}=r,f=qn(),p=n||(f==null?void 0:f.emit)||((i=f==null?void 0:f.$emit)==null?void 0:i.bind(f))||((s=(o=f==null?void 0:f.proxy)==null?void 0:o.$emit)==null?void 0:s.bind(f==null?void 0:f.proxy));let g=l;t||(t="modelValue"),g=g||`update:${t.toString()}`;const m=S=>a?typeof a=="function"?a(S):Ld(S):S,y=()=>Nd(e[t])?m(e[t]):d,_=S=>{h?h(S)&&p(g,S):p(g,S)};if(u){const S=y(),E=de(S);let k=!1;return we(()=>e[t],I=>{k||(k=!0,E.value=m(I),ut(()=>k=!1))}),we(E,I=>{!k&&(I!==e[t]||c)&&_(I)},{deep:c}),E}else return te({get(){return y()},set(S){_(S)}})}var Rd={value:()=>{}};function Jr(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new yr(n)}function yr(e){this._=e}function Bd(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}yr.prototype=Jr.prototype={constructor:yr,on:function(e,t){var n=this._,r=Bd(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=Vd(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=vs(n[i],e.name,t);else if(t==null)for(i in n)n[i]=vs(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new yr(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Vd(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function vs(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Rd,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ki="http://www.w3.org/1999/xhtml";const ms={svg:"http://www.w3.org/2000/svg",xhtml:Ki,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ei(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ms.hasOwnProperty(t)?{space:ms[t],local:e}:e}function Gd(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ki&&t.documentElement.namespaceURI===Ki?t.createElement(e):t.createElementNS(n,e)}}function Fd(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function iu(e){var t=ei(e);return(t.local?Fd:Gd)(t)}function Hd(){}function Po(e){return e==null?Hd:function(){return this.querySelector(e)}}function Yd(e){typeof e!="function"&&(e=Po(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),u,l,c=0;c<s;++c)(u=o[c])&&(l=e.call(u,u.__data__,c,o))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new He(r,this._parents)}function Xd(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ud(){return[]}function ou(e){return e==null?Ud:function(){return this.querySelectorAll(e)}}function Wd(e){return function(){return Xd(e.apply(this,arguments))}}function qd(e){typeof e=="function"?e=Wd(e):e=ou(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&(r.push(e.call(u,u.__data__,l,s)),i.push(u));return new He(r,i)}function su(e){return function(){return this.matches(e)}}function au(e){return function(t){return t.matches(e)}}var Kd=Array.prototype.find;function Zd(e){return function(){return Kd.call(this.children,e)}}function jd(){return this.firstElementChild}function Qd(e){return this.select(e==null?jd:Zd(typeof e=="function"?e:au(e)))}var Jd=Array.prototype.filter;function eh(){return Array.from(this.children)}function th(e){return function(){return Jd.call(this.children,e)}}function nh(e){return this.selectAll(e==null?eh:th(typeof e=="function"?e:au(e)))}function rh(e){typeof e!="function"&&(e=su(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,l=0;l<s;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&a.push(u);return new He(r,this._parents)}function uu(e){return new Array(e.length)}function ih(){return new He(this._enter||this._groups.map(uu),this._parents)}function Ir(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ir.prototype={constructor:Ir,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function oh(e){return function(){return e}}function sh(e,t,n,r,i,o){for(var s=0,a,u=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new Ir(e,o[s]);for(;s<u;++s)(a=t[s])&&(i[s]=a)}function ah(e,t,n,r,i,o,s){var a,u,l=new Map,c=t.length,d=o.length,h=new Array(c),f;for(a=0;a<c;++a)(u=t[a])&&(h[a]=f=s.call(u,u.__data__,a,t)+"",l.has(f)?i[a]=u:l.set(f,u));for(a=0;a<d;++a)f=s.call(e,o[a],a,o)+"",(u=l.get(f))?(r[a]=u,u.__data__=o[a],l.delete(f)):n[a]=new Ir(e,o[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(h[a])===u&&(i[a]=u)}function uh(e){return e.__data__}function lh(e,t){if(!arguments.length)return Array.from(this,uh);var n=t?ah:sh,r=this._parents,i=this._groups;typeof e!="function"&&(e=oh(e));for(var o=i.length,s=new Array(o),a=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],d=i[l],h=d.length,f=ch(e.call(c,c&&c.__data__,l,r)),p=f.length,g=a[l]=new Array(p),m=s[l]=new Array(p),y=u[l]=new Array(h);n(c,d,g,m,y,f,t);for(var _=0,S=0,E,k;_<p;++_)if(E=g[_]){for(_>=S&&(S=_+1);!(k=m[S])&&++S<p;);E._next=k||null}}return s=new He(s,r),s._enter=a,s._exit=u,s}function ch(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function dh(){return new He(this._exit||this._groups.map(uu),this._parents)}function hh(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function fh(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),u=0;u<s;++u)for(var l=n[u],c=r[u],d=l.length,h=a[u]=new Array(d),f,p=0;p<d;++p)(f=l[p]||c[p])&&(h[p]=f);for(;u<i;++u)a[u]=n[u];return new He(a,this._parents)}function ph(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function gh(e){e||(e=vh);function t(d,h){return d&&h?e(d.__data__,h.__data__):!d-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,u=i[o]=new Array(a),l,c=0;c<a;++c)(l=s[c])&&(u[c]=l);u.sort(t)}return new He(i,this._parents).order()}function vh(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function mh(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function yh(){return Array.from(this)}function _h(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function wh(){let e=0;for(const t of this)++e;return e}function bh(){return!this.node()}function Eh(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function xh(e){return function(){this.removeAttribute(e)}}function Sh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function kh(e,t){return function(){this.setAttribute(e,t)}}function $h(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Nh(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ch(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Mh(e,t){var n=ei(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Sh:xh:typeof t=="function"?n.local?Ch:Nh:n.local?$h:kh)(n,t))}function lu(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ih(e){return function(){this.style.removeProperty(e)}}function Ph(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ah(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Th(e,t,n){return arguments.length>1?this.each((t==null?Ih:typeof t=="function"?Ah:Ph)(e,t,n??"")):pn(this.node(),e)}function pn(e,t){return e.style.getPropertyValue(t)||lu(e).getComputedStyle(e,null).getPropertyValue(t)}function Oh(e){return function(){delete this[e]}}function zh(e,t){return function(){this[e]=t}}function Dh(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Lh(e,t){return arguments.length>1?this.each((t==null?Oh:typeof t=="function"?Dh:zh)(e,t)):this.node()[e]}function cu(e){return e.trim().split(/^|\s+/)}function Ao(e){return e.classList||new du(e)}function du(e){this._node=e,this._names=cu(e.getAttribute("class")||"")}du.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function hu(e,t){for(var n=Ao(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function fu(e,t){for(var n=Ao(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Rh(e){return function(){hu(this,e)}}function Bh(e){return function(){fu(this,e)}}function Vh(e,t){return function(){(t.apply(this,arguments)?hu:fu)(this,e)}}function Gh(e,t){var n=cu(e+"");if(arguments.length<2){for(var r=Ao(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Vh:t?Rh:Bh)(n,t))}function Fh(){this.textContent=""}function Hh(e){return function(){this.textContent=e}}function Yh(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Xh(e){return arguments.length?this.each(e==null?Fh:(typeof e=="function"?Yh:Hh)(e)):this.node().textContent}function Uh(){this.innerHTML=""}function Wh(e){return function(){this.innerHTML=e}}function qh(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Kh(e){return arguments.length?this.each(e==null?Uh:(typeof e=="function"?qh:Wh)(e)):this.node().innerHTML}function Zh(){this.nextSibling&&this.parentNode.appendChild(this)}function jh(){return this.each(Zh)}function Qh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Jh(){return this.each(Qh)}function ef(e){var t=typeof e=="function"?e:iu(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function tf(){return null}function nf(e,t){var n=typeof e=="function"?e:iu(e),r=t==null?tf:typeof t=="function"?t:Po(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function rf(){var e=this.parentNode;e&&e.removeChild(this)}function of(){return this.each(rf)}function sf(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function af(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function uf(e){return this.select(e?af:sf)}function lf(e){return arguments.length?this.property("__data__",e):this.node().__data__}function cf(e){return function(t){e.call(this,t,this.__data__)}}function df(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function hf(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function ff(e,t,n){return function(){var r=this.__on,i,o=cf(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function pf(e,t,n){var r=df(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<o;++i)if((s=r[i]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?ff:hf,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function pu(e,t,n){var r=lu(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function gf(e,t){return function(){return pu(this,e,t)}}function vf(e,t){return function(){return pu(this,e,t.apply(this,arguments))}}function mf(e,t){return this.each((typeof t=="function"?vf:gf)(e,t))}function*yf(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var gu=[null];function He(e,t){this._groups=e,this._parents=t}function Kn(){return new He([[document.documentElement]],gu)}function _f(){return this}He.prototype=Kn.prototype={constructor:He,select:Yd,selectAll:qd,selectChild:Qd,selectChildren:nh,filter:rh,data:lh,enter:ih,exit:dh,join:hh,merge:fh,selection:_f,order:ph,sort:gh,call:mh,nodes:yh,node:_h,size:wh,empty:bh,each:Eh,attr:Mh,style:Th,property:Lh,classed:Gh,text:Xh,html:Kh,raise:jh,lower:Jh,append:ef,insert:nf,remove:of,clone:uf,datum:lf,on:pf,dispatch:mf,[Symbol.iterator]:yf};function Ze(e){return typeof e=="string"?new He([[document.querySelector(e)]],[document.documentElement]):new He([[e]],gu)}function wf(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ot(e,t){if(e=wf(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const bf={passive:!1},Ln={capture:!0,passive:!1};function Ei(e){e.stopImmediatePropagation()}function ln(e){e.preventDefault(),e.stopImmediatePropagation()}function vu(e){var t=e.document.documentElement,n=Ze(e).on("dragstart.drag",ln,Ln);"onselectstart"in t?n.on("selectstart.drag",ln,Ln):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function mu(e,t){var n=e.document.documentElement,r=Ze(e).on("dragstart.drag",null);t&&(r.on("click.drag",ln,Ln),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const nr=e=>()=>e;function Zi(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:u,dy:l,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:c}})}Zi.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Ef(e){return!e.ctrlKey&&!e.button}function xf(){return this.parentNode}function Sf(e,t){return t??{x:e.x,y:e.y}}function kf(){return navigator.maxTouchPoints||"ontouchstart"in this}function $f(){var e=Ef,t=xf,n=Sf,r=kf,i={},o=Jr("start","drag","end"),s=0,a,u,l,c,d=0;function h(E){E.on("mousedown.drag",f).filter(r).on("touchstart.drag",m).on("touchmove.drag",y,bf).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(E,k){if(!(c||!e.call(this,E,k))){var I=S(this,t.call(this,E,k),E,k,"mouse");I&&(Ze(E.view).on("mousemove.drag",p,Ln).on("mouseup.drag",g,Ln),vu(E.view),Ei(E),l=!1,a=E.clientX,u=E.clientY,I("start",E))}}function p(E){if(ln(E),!l){var k=E.clientX-a,I=E.clientY-u;l=k*k+I*I>d}i.mouse("drag",E)}function g(E){Ze(E.view).on("mousemove.drag mouseup.drag",null),mu(E.view,l),ln(E),i.mouse("end",E)}function m(E,k){if(e.call(this,E,k)){var I=E.changedTouches,T=t.call(this,E,k),z=I.length,V,O;for(V=0;V<z;++V)(O=S(this,T,E,k,I[V].identifier,I[V]))&&(Ei(E),O("start",E,I[V]))}}function y(E){var k=E.changedTouches,I=k.length,T,z;for(T=0;T<I;++T)(z=i[k[T].identifier])&&(ln(E),z("drag",E,k[T]))}function _(E){var k=E.changedTouches,I=k.length,T,z;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),T=0;T<I;++T)(z=i[k[T].identifier])&&(Ei(E),z("end",E,k[T]))}function S(E,k,I,T,z,V){var O=o.copy(),N=ot(V||I,k),Y,X,v;if((v=n.call(E,new Zi("beforestart",{sourceEvent:I,target:h,identifier:z,active:s,x:N[0],y:N[1],dx:0,dy:0,dispatch:O}),T))!=null)return Y=v.x-N[0]||0,X=v.y-N[1]||0,function $(b,P,A){var C=N,M;switch(b){case"start":i[z]=$,M=s++;break;case"end":delete i[z],--s;case"drag":N=ot(A||P,k),M=s;break}O.call(b,E,new Zi(b,{sourceEvent:P,subject:v,target:h,identifier:z,active:M,x:N[0]+Y,y:N[1]+X,dx:N[0]-C[0],dy:N[1]-C[1],dispatch:O}),T)}}return h.filter=function(E){return arguments.length?(e=typeof E=="function"?E:nr(!!E),h):e},h.container=function(E){return arguments.length?(t=typeof E=="function"?E:nr(E),h):t},h.subject=function(E){return arguments.length?(n=typeof E=="function"?E:nr(E),h):n},h.touchable=function(E){return arguments.length?(r=typeof E=="function"?E:nr(!!E),h):r},h.on=function(){var E=o.on.apply(o,arguments);return E===o?h:E},h.clickDistance=function(E){return arguments.length?(d=(E=+E)*E,h):Math.sqrt(d)},h}function To(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function yu(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Zn(){}var Rn=.7,Pr=1/Rn,cn="\\s*([+-]?\\d+)\\s*",Bn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",lt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Nf=/^#([0-9a-f]{3,8})$/,Cf=new RegExp(`^rgb\\(${cn},${cn},${cn}\\)$`),Mf=new RegExp(`^rgb\\(${lt},${lt},${lt}\\)$`),If=new RegExp(`^rgba\\(${cn},${cn},${cn},${Bn}\\)$`),Pf=new RegExp(`^rgba\\(${lt},${lt},${lt},${Bn}\\)$`),Af=new RegExp(`^hsl\\(${Bn},${lt},${lt}\\)$`),Tf=new RegExp(`^hsla\\(${Bn},${lt},${lt},${Bn}\\)$`),ys={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};To(Zn,Vn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_s,formatHex:_s,formatHex8:Of,formatHsl:zf,formatRgb:ws,toString:ws});function _s(){return this.rgb().formatHex()}function Of(){return this.rgb().formatHex8()}function zf(){return _u(this).formatHsl()}function ws(){return this.rgb().formatRgb()}function Vn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Nf.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?bs(t):n===3?new De(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?rr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?rr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Cf.exec(e))?new De(t[1],t[2],t[3],1):(t=Mf.exec(e))?new De(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=If.exec(e))?rr(t[1],t[2],t[3],t[4]):(t=Pf.exec(e))?rr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Af.exec(e))?Ss(t[1],t[2]/100,t[3]/100,1):(t=Tf.exec(e))?Ss(t[1],t[2]/100,t[3]/100,t[4]):ys.hasOwnProperty(e)?bs(ys[e]):e==="transparent"?new De(NaN,NaN,NaN,0):null}function bs(e){return new De(e>>16&255,e>>8&255,e&255,1)}function rr(e,t,n,r){return r<=0&&(e=t=n=NaN),new De(e,t,n,r)}function Df(e){return e instanceof Zn||(e=Vn(e)),e?(e=e.rgb(),new De(e.r,e.g,e.b,e.opacity)):new De}function ji(e,t,n,r){return arguments.length===1?Df(e):new De(e,t,n,r??1)}function De(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}To(De,ji,yu(Zn,{brighter(e){return e=e==null?Pr:Math.pow(Pr,e),new De(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Rn:Math.pow(Rn,e),new De(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new De(Wt(this.r),Wt(this.g),Wt(this.b),Ar(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Es,formatHex:Es,formatHex8:Lf,formatRgb:xs,toString:xs}));function Es(){return`#${Xt(this.r)}${Xt(this.g)}${Xt(this.b)}`}function Lf(){return`#${Xt(this.r)}${Xt(this.g)}${Xt(this.b)}${Xt((isNaN(this.opacity)?1:this.opacity)*255)}`}function xs(){const e=Ar(this.opacity);return`${e===1?"rgb(":"rgba("}${Wt(this.r)}, ${Wt(this.g)}, ${Wt(this.b)}${e===1?")":`, ${e})`}`}function Ar(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Wt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Xt(e){return e=Wt(e),(e<16?"0":"")+e.toString(16)}function Ss(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new je(e,t,n,r)}function _u(e){if(e instanceof je)return new je(e.h,e.s,e.l,e.opacity);if(e instanceof Zn||(e=Vn(e)),!e)return new je;if(e instanceof je)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new je(s,a,u,e.opacity)}function Rf(e,t,n,r){return arguments.length===1?_u(e):new je(e,t,n,r??1)}function je(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}To(je,Rf,yu(Zn,{brighter(e){return e=e==null?Pr:Math.pow(Pr,e),new je(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Rn:Math.pow(Rn,e),new je(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new De(xi(e>=240?e-240:e+120,i,r),xi(e,i,r),xi(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new je(ks(this.h),ir(this.s),ir(this.l),Ar(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ar(this.opacity);return`${e===1?"hsl(":"hsla("}${ks(this.h)}, ${ir(this.s)*100}%, ${ir(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ks(e){return e=(e||0)%360,e<0?e+360:e}function ir(e){return Math.max(0,Math.min(1,e||0))}function xi(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const wu=e=>()=>e;function Bf(e,t){return function(n){return e+n*t}}function Vf(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Gf(e){return(e=+e)==1?bu:function(t,n){return n-t?Vf(t,n,e):wu(isNaN(t)?n:t)}}function bu(e,t){var n=t-e;return n?Bf(e,n):wu(isNaN(e)?t:e)}const $s=function e(t){var n=Gf(t);function r(i,o){var s=n((i=ji(i)).r,(o=ji(o)).r),a=n(i.g,o.g),u=n(i.b,o.b),l=bu(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function Ct(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Qi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Si=new RegExp(Qi.source,"g");function Ff(e){return function(){return e}}function Hf(e){return function(t){return e(t)+""}}function Yf(e,t){var n=Qi.lastIndex=Si.lastIndex=0,r,i,o,s=-1,a=[],u=[];for(e=e+"",t=t+"";(r=Qi.exec(e))&&(i=Si.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:Ct(r,i)})),n=Si.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?Hf(u[0].x):Ff(t):(t=u.length,function(l){for(var c=0,d;c<t;++c)a[(d=u[c]).i]=d.x(l);return a.join("")})}var Ns=180/Math.PI,Ji={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Eu(e,t,n,r,i,o){var s,a,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Ns,skewX:Math.atan(u)*Ns,scaleX:s,scaleY:a}}var or;function Xf(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ji:Eu(t.a,t.b,t.c,t.d,t.e,t.f)}function Uf(e){return e==null||(or||(or=document.createElementNS("http://www.w3.org/2000/svg","g")),or.setAttribute("transform",e),!(e=or.transform.baseVal.consolidate()))?Ji:(e=e.matrix,Eu(e.a,e.b,e.c,e.d,e.e,e.f))}function xu(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,c,d,h,f,p){if(l!==d||c!==h){var g=f.push("translate(",null,t,null,n);p.push({i:g-4,x:Ct(l,d)},{i:g-2,x:Ct(c,h)})}else(d||h)&&f.push("translate("+d+t+h+n)}function s(l,c,d,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Ct(l,c)})):c&&d.push(i(d)+"rotate("+c+r)}function a(l,c,d,h){l!==c?h.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Ct(l,c)}):c&&d.push(i(d)+"skewX("+c+r)}function u(l,c,d,h,f,p){if(l!==d||c!==h){var g=f.push(i(f)+"scale(",null,",",null,")");p.push({i:g-4,x:Ct(l,d)},{i:g-2,x:Ct(c,h)})}else(d!==1||h!==1)&&f.push(i(f)+"scale("+d+","+h+")")}return function(l,c){var d=[],h=[];return l=e(l),c=e(c),o(l.translateX,l.translateY,c.translateX,c.translateY,d,h),s(l.rotate,c.rotate,d,h),a(l.skewX,c.skewX,d,h),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,d,h),l=c=null,function(f){for(var p=-1,g=h.length,m;++p<g;)d[(m=h[p]).i]=m.x(f);return d.join("")}}}var Wf=xu(Xf,"px, ","px)","deg)"),qf=xu(Uf,", ",")",")"),Kf=1e-12;function Cs(e){return((e=Math.exp(e))+1/e)/2}function Zf(e){return((e=Math.exp(e))-1/e)/2}function jf(e){return((e=Math.exp(2*e))-1)/(e+1)}const Qf=function e(t,n,r){function i(o,s){var a=o[0],u=o[1],l=o[2],c=s[0],d=s[1],h=s[2],f=c-a,p=d-u,g=f*f+p*p,m,y;if(g<Kf)y=Math.log(h/l)/t,m=function(T){return[a+T*f,u+T*p,l*Math.exp(t*T*y)]};else{var _=Math.sqrt(g),S=(h*h-l*l+r*g)/(2*l*n*_),E=(h*h-l*l-r*g)/(2*h*n*_),k=Math.log(Math.sqrt(S*S+1)-S),I=Math.log(Math.sqrt(E*E+1)-E);y=(I-k)/t,m=function(T){var z=T*y,V=Cs(k),O=l/(n*_)*(V*jf(t*z+k)-Zf(k));return[a+O*f,u+O*p,l*V/Cs(t*z+k)]}}return m.duration=y*1e3*t/Math.SQRT2,m}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,u=a*a;return e(s,a,u)},i}(Math.SQRT2,2,4);var gn=0,$n=0,En=0,Su=1e3,Tr,Nn,Or=0,Qt=0,ti=0,Gn=typeof performance=="object"&&performance.now?performance:Date,ku=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Oo(){return Qt||(ku(Jf),Qt=Gn.now()+ti)}function Jf(){Qt=0}function zr(){this._call=this._time=this._next=null}zr.prototype=$u.prototype={constructor:zr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Oo():+n)+(t==null?0:+t),!this._next&&Nn!==this&&(Nn?Nn._next=this:Tr=this,Nn=this),this._call=e,this._time=n,eo()},stop:function(){this._call&&(this._call=null,this._time=1/0,eo())}};function $u(e,t,n){var r=new zr;return r.restart(e,t,n),r}function ep(){Oo(),++gn;for(var e=Tr,t;e;)(t=Qt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--gn}function Ms(){Qt=(Or=Gn.now())+ti,gn=$n=0;try{ep()}finally{gn=0,np(),Qt=0}}function tp(){var e=Gn.now(),t=e-Or;t>Su&&(ti-=t,Or=e)}function np(){for(var e,t=Tr,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Tr=n);Nn=e,eo(r)}function eo(e){if(!gn){$n&&($n=clearTimeout($n));var t=e-Qt;t>24?(e<1/0&&($n=setTimeout(Ms,e-Gn.now()-ti)),En&&(En=clearInterval(En))):(En||(Or=Gn.now(),En=setInterval(tp,Su)),gn=1,ku(Ms))}}function Is(e,t,n){var r=new zr;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var rp=Jr("start","end","cancel","interrupt"),ip=[],Nu=0,Ps=1,to=2,_r=3,As=4,no=5,wr=6;function ni(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;op(e,n,{name:t,index:r,group:i,on:rp,tween:ip,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Nu})}function zo(e,t){var n=et(e,t);if(n.state>Nu)throw new Error("too late; already scheduled");return n}function ht(e,t){var n=et(e,t);if(n.state>_r)throw new Error("too late; already running");return n}function et(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function op(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=$u(o,0,n.time);function o(l){n.state=Ps,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var c,d,h,f;if(n.state!==Ps)return u();for(c in r)if(f=r[c],f.name===n.name){if(f.state===_r)return Is(s);f.state===As?(f.state=wr,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete r[c]):+c<t&&(f.state=wr,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete r[c])}if(Is(function(){n.state===_r&&(n.state=As,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=to,n.on.call("start",e,e.__data__,n.index,n.group),n.state===to){for(n.state=_r,i=new Array(h=n.tween.length),c=0,d=-1;c<h;++c)(f=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=f);i.length=d+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=no,1),d=-1,h=i.length;++d<h;)i[d].call(e,c);n.state===no&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=wr,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function br(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>to&&r.state<no,r.state=wr,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function sp(e){return this.each(function(){br(this,e)})}function ap(e,t){var n,r;return function(){var i=ht(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function up(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=ht(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}o.tween=i}}function lp(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=et(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?ap:up)(n,e,t))}function Do(e,t,n){var r=e._id;return e.each(function(){var i=ht(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return et(i,r).value[t]}}function Cu(e,t){var n;return(typeof t=="number"?Ct:t instanceof Vn?$s:(n=Vn(t))?(t=n,$s):Yf)(e,t)}function cp(e){return function(){this.removeAttribute(e)}}function dp(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hp(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function fp(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function pp(e,t,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a)))}}function gp(e,t,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a)))}}function vp(e,t){var n=ei(e),r=n==="transform"?qf:Cu;return this.attrTween(e,typeof t=="function"?(n.local?gp:pp)(n,r,Do(this,"attr."+e,t)):t==null?(n.local?dp:cp)(n):(n.local?fp:hp)(n,r,t))}function mp(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function yp(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function _p(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&yp(e,o)),n}return i._value=t,i}function wp(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&mp(e,o)),n}return i._value=t,i}function bp(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ei(e);return this.tween(n,(r.local?_p:wp)(r,t))}function Ep(e,t){return function(){zo(this,e).delay=+t.apply(this,arguments)}}function xp(e,t){return t=+t,function(){zo(this,e).delay=t}}function Sp(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ep:xp)(t,e)):et(this.node(),t).delay}function kp(e,t){return function(){ht(this,e).duration=+t.apply(this,arguments)}}function $p(e,t){return t=+t,function(){ht(this,e).duration=t}}function Np(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?kp:$p)(t,e)):et(this.node(),t).duration}function Cp(e,t){if(typeof t!="function")throw new Error;return function(){ht(this,e).ease=t}}function Mp(e){var t=this._id;return arguments.length?this.each(Cp(t,e)):et(this.node(),t).ease}function Ip(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ht(this,e).ease=n}}function Pp(e){if(typeof e!="function")throw new Error;return this.each(Ip(this._id,e))}function Ap(e){typeof e!="function"&&(e=su(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,l=0;l<s;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&a.push(u);return new bt(r,this._parents,this._name,this._id)}function Tp(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u=t[a],l=n[a],c=u.length,d=s[a]=new Array(c),h,f=0;f<c;++f)(h=u[f]||l[f])&&(d[f]=h);for(;a<r;++a)s[a]=t[a];return new bt(s,this._parents,this._name,this._id)}function Op(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function zp(e,t,n){var r,i,o=Op(t)?zo:ht;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function Dp(e,t){var n=this._id;return arguments.length<2?et(this.node(),n).on.on(e):this.each(zp(n,e,t))}function Lp(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Rp(){return this.on("end.remove",Lp(this._id))}function Bp(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Po(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],u=a.length,l=o[s]=new Array(u),c,d,h=0;h<u;++h)(c=a[h])&&(d=e.call(c,c.__data__,h,a))&&("__data__"in c&&(d.__data__=c.__data__),l[h]=d,ni(l[h],t,n,h,l,et(c,n)));return new bt(o,this._parents,t,n)}function Vp(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ou(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,d=0;d<l;++d)if(c=u[d]){for(var h=e.call(c,c.__data__,d,u),f,p=et(c,n),g=0,m=h.length;g<m;++g)(f=h[g])&&ni(f,t,n,g,h,p);o.push(h),s.push(c)}return new bt(o,s,t,n)}var Gp=Kn.prototype.constructor;function Fp(){return new Gp(this._groups,this._parents)}function Hp(e,t){var n,r,i;return function(){var o=pn(this,e),s=(this.style.removeProperty(e),pn(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function Mu(e){return function(){this.style.removeProperty(e)}}function Yp(e,t,n){var r,i=n+"",o;return function(){var s=pn(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function Xp(e,t,n){var r,i,o;return function(){var s=pn(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),pn(this,e))),s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a))}}function Up(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var u=ht(this,e),l=u.on,c=u.value[o]==null?a||(a=Mu(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(s,i=c),u.on=r}}function Wp(e,t,n){var r=(e+="")=="transform"?Wf:Cu;return t==null?this.styleTween(e,Hp(e,r)).on("end.style."+e,Mu(e)):typeof t=="function"?this.styleTween(e,Xp(e,r,Do(this,"style."+e,t))).each(Up(this._id,e)):this.styleTween(e,Yp(e,r,t),n).on("end.style."+e,null)}function qp(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Kp(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&qp(e,s,n)),r}return o._value=t,o}function Zp(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Kp(e,t,n??""))}function jp(e){return function(){this.textContent=e}}function Qp(e){return function(){var t=e(this);this.textContent=t??""}}function Jp(e){return this.tween("text",typeof e=="function"?Qp(Do(this,"text",e)):jp(e==null?"":e+""))}function eg(e){return function(t){this.textContent=e.call(this,t)}}function tg(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&eg(i)),t}return r._value=e,r}function ng(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,tg(e))}function rg(){for(var e=this._name,t=this._id,n=Iu(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,l=0;l<a;++l)if(u=s[l]){var c=et(u,t);ni(u,e,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new bt(r,this._parents,e,n)}function ig(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},u={value:function(){--i===0&&o()}};n.each(function(){var l=ht(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&o()})}var og=0;function bt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Iu(){return++og}var pt=Kn.prototype;bt.prototype={constructor:bt,select:Bp,selectAll:Vp,selectChild:pt.selectChild,selectChildren:pt.selectChildren,filter:Ap,merge:Tp,selection:Fp,transition:rg,call:pt.call,nodes:pt.nodes,node:pt.node,size:pt.size,empty:pt.empty,each:pt.each,on:Dp,attr:vp,attrTween:bp,style:Wp,styleTween:Zp,text:Jp,textTween:ng,remove:Rp,tween:lp,delay:Sp,duration:Np,ease:Mp,easeVarying:Pp,end:ig,[Symbol.iterator]:pt[Symbol.iterator]};function sg(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var ag={time:null,delay:0,duration:250,ease:sg};function ug(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function lg(e){var t,n;e instanceof bt?(t=e._id,e=e._name):(t=Iu(),(n=ag).time=Oo(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&ni(u,e,t,l,s,n||ug(u,t));return new bt(r,this._parents,e,t)}Kn.prototype.interrupt=sp;Kn.prototype.transition=lg;const sr=e=>()=>e;function cg(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function yt(e,t,n){this.k=e,this.x=t,this.y=n}yt.prototype={constructor:yt,scale:function(e){return e===1?this:new yt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new yt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var vn=new yt(1,0,0);yt.prototype;function ki(e){e.stopImmediatePropagation()}function xn(e){e.preventDefault(),e.stopImmediatePropagation()}function dg(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function hg(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ts(){return this.__zoom||vn}function fg(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function pg(){return navigator.maxTouchPoints||"ontouchstart"in this}function gg(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function vg(){var e=dg,t=hg,n=gg,r=fg,i=pg,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,u=Qf,l=Jr("start","zoom","end"),c,d,h,f=500,p=150,g=0,m=10;function y(v){v.property("__zoom",Ts).on("wheel.zoom",z,{passive:!1}).on("mousedown.zoom",V).on("dblclick.zoom",O).filter(i).on("touchstart.zoom",N).on("touchmove.zoom",Y).on("touchend.zoom touchcancel.zoom",X).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(v,$,b,P){var A=v.selection?v.selection():v;A.property("__zoom",Ts),v!==A?k(v,$,b,P):A.interrupt().each(function(){I(this,arguments).event(P).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},y.scaleBy=function(v,$,b,P){y.scaleTo(v,function(){var A=this.__zoom.k,C=typeof $=="function"?$.apply(this,arguments):$;return A*C},b,P)},y.scaleTo=function(v,$,b,P){y.transform(v,function(){var A=t.apply(this,arguments),C=this.__zoom,M=b==null?E(A):typeof b=="function"?b.apply(this,arguments):b,R=C.invert(M),U=typeof $=="function"?$.apply(this,arguments):$;return n(S(_(C,U),M,R),A,s)},b,P)},y.translateBy=function(v,$,b,P){y.transform(v,function(){return n(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof b=="function"?b.apply(this,arguments):b),t.apply(this,arguments),s)},null,P)},y.translateTo=function(v,$,b,P,A){y.transform(v,function(){var C=t.apply(this,arguments),M=this.__zoom,R=P==null?E(C):typeof P=="function"?P.apply(this,arguments):P;return n(vn.translate(R[0],R[1]).scale(M.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof b=="function"?-b.apply(this,arguments):-b),C,s)},P,A)};function _(v,$){return $=Math.max(o[0],Math.min(o[1],$)),$===v.k?v:new yt($,v.x,v.y)}function S(v,$,b){var P=$[0]-b[0]*v.k,A=$[1]-b[1]*v.k;return P===v.x&&A===v.y?v:new yt(v.k,P,A)}function E(v){return[(+v[0][0]+ +v[1][0])/2,(+v[0][1]+ +v[1][1])/2]}function k(v,$,b,P){v.on("start.zoom",function(){I(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(P).end()}).tween("zoom",function(){var A=this,C=arguments,M=I(A,C).event(P),R=t.apply(A,C),U=b==null?E(R):typeof b=="function"?b.apply(A,C):b,F=Math.max(R[1][0]-R[0][0],R[1][1]-R[0][1]),G=A.__zoom,q=typeof $=="function"?$.apply(A,C):$,oe=u(G.invert(U).concat(F/G.k),q.invert(U).concat(F/q.k));return function(re){if(re===1)re=q;else{var se=oe(re),ie=F/se[2];re=new yt(ie,U[0]-se[0]*ie,U[1]-se[1]*ie)}M.zoom(null,re)}})}function I(v,$,b){return!b&&v.__zooming||new T(v,$)}function T(v,$){this.that=v,this.args=$,this.active=0,this.sourceEvent=null,this.extent=t.apply(v,$),this.taps=0}T.prototype={event:function(v){return v&&(this.sourceEvent=v),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(v,$){return this.mouse&&v!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&v!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&v!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(v){var $=Ze(this.that).datum();l.call(v,this.that,new cg(v,{sourceEvent:this.sourceEvent,target:y,type:v,transform:this.that.__zoom,dispatch:l}),$)}};function z(v,...$){if(!e.apply(this,arguments))return;var b=I(this,$).event(v),P=this.__zoom,A=Math.max(o[0],Math.min(o[1],P.k*Math.pow(2,r.apply(this,arguments)))),C=ot(v);if(b.wheel)(b.mouse[0][0]!==C[0]||b.mouse[0][1]!==C[1])&&(b.mouse[1]=P.invert(b.mouse[0]=C)),clearTimeout(b.wheel);else{if(P.k===A)return;b.mouse=[C,P.invert(C)],br(this),b.start()}xn(v),b.wheel=setTimeout(M,p),b.zoom("mouse",n(S(_(P,A),b.mouse[0],b.mouse[1]),b.extent,s));function M(){b.wheel=null,b.end()}}function V(v,...$){if(h||!e.apply(this,arguments))return;var b=v.currentTarget,P=I(this,$,!0).event(v),A=Ze(v.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",F,!0),C=ot(v,b),M=v.clientX,R=v.clientY;vu(v.view),ki(v),P.mouse=[C,this.__zoom.invert(C)],br(this),P.start();function U(G){if(xn(G),!P.moved){var q=G.clientX-M,oe=G.clientY-R;P.moved=q*q+oe*oe>g}P.event(G).zoom("mouse",n(S(P.that.__zoom,P.mouse[0]=ot(G,b),P.mouse[1]),P.extent,s))}function F(G){A.on("mousemove.zoom mouseup.zoom",null),mu(G.view,P.moved),xn(G),P.event(G).end()}}function O(v,...$){if(e.apply(this,arguments)){var b=this.__zoom,P=ot(v.changedTouches?v.changedTouches[0]:v,this),A=b.invert(P),C=b.k*(v.shiftKey?.5:2),M=n(S(_(b,C),P,A),t.apply(this,$),s);xn(v),a>0?Ze(this).transition().duration(a).call(k,M,P,v):Ze(this).call(y.transform,M,P,v)}}function N(v,...$){if(e.apply(this,arguments)){var b=v.touches,P=b.length,A=I(this,$,v.changedTouches.length===P).event(v),C,M,R,U;for(ki(v),M=0;M<P;++M)R=b[M],U=ot(R,this),U=[U,this.__zoom.invert(U),R.identifier],A.touch0?!A.touch1&&A.touch0[2]!==U[2]&&(A.touch1=U,A.taps=0):(A.touch0=U,C=!0,A.taps=1+!!c);c&&(c=clearTimeout(c)),C&&(A.taps<2&&(d=U[0],c=setTimeout(function(){c=null},f)),br(this),A.start())}}function Y(v,...$){if(this.__zooming){var b=I(this,$).event(v),P=v.changedTouches,A=P.length,C,M,R,U;for(xn(v),C=0;C<A;++C)M=P[C],R=ot(M,this),b.touch0&&b.touch0[2]===M.identifier?b.touch0[0]=R:b.touch1&&b.touch1[2]===M.identifier&&(b.touch1[0]=R);if(M=b.that.__zoom,b.touch1){var F=b.touch0[0],G=b.touch0[1],q=b.touch1[0],oe=b.touch1[1],re=(re=q[0]-F[0])*re+(re=q[1]-F[1])*re,se=(se=oe[0]-G[0])*se+(se=oe[1]-G[1])*se;M=_(M,Math.sqrt(re/se)),R=[(F[0]+q[0])/2,(F[1]+q[1])/2],U=[(G[0]+oe[0])/2,(G[1]+oe[1])/2]}else if(b.touch0)R=b.touch0[0],U=b.touch0[1];else return;b.zoom("touch",n(S(M,R,U),b.extent,s))}}function X(v,...$){if(this.__zooming){var b=I(this,$).event(v),P=v.changedTouches,A=P.length,C,M;for(ki(v),h&&clearTimeout(h),h=setTimeout(function(){h=null},f),C=0;C<A;++C)M=P[C],b.touch0&&b.touch0[2]===M.identifier?delete b.touch0:b.touch1&&b.touch1[2]===M.identifier&&delete b.touch1;if(b.touch1&&!b.touch0&&(b.touch0=b.touch1,delete b.touch1),b.touch0)b.touch0[1]=this.__zoom.invert(b.touch0[0]);else if(b.end(),b.taps===2&&(M=ot(M,this),Math.hypot(d[0]-M[0],d[1]-M[1])<m)){var R=Ze(this).on("dblclick.zoom");R&&R.apply(this,arguments)}}}return y.wheelDelta=function(v){return arguments.length?(r=typeof v=="function"?v:sr(+v),y):r},y.filter=function(v){return arguments.length?(e=typeof v=="function"?v:sr(!!v),y):e},y.touchable=function(v){return arguments.length?(i=typeof v=="function"?v:sr(!!v),y):i},y.extent=function(v){return arguments.length?(t=typeof v=="function"?v:sr([[+v[0][0],+v[0][1]],[+v[1][0],+v[1][1]]]),y):t},y.scaleExtent=function(v){return arguments.length?(o[0]=+v[0],o[1]=+v[1],y):[o[0],o[1]]},y.translateExtent=function(v){return arguments.length?(s[0][0]=+v[0][0],s[1][0]=+v[1][0],s[0][1]=+v[0][1],s[1][1]=+v[1][1],y):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},y.constrain=function(v){return arguments.length?(n=v,y):n},y.duration=function(v){return arguments.length?(a=+v,y):a},y.interpolate=function(v){return arguments.length?(u=v,y):u},y.on=function(){var v=l.on.apply(l,arguments);return v===l?y:v},y.clickDistance=function(v){return arguments.length?(g=(v=+v)*v,y):Math.sqrt(g)},y.tapDistance=function(v){return arguments.length?(m=+v,y):m},y}var Q=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(Q||{}),Lo=(e=>(e.Partial="partial",e.Full="full",e))(Lo||{}),Ft=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(Ft||{}),Jt=(e=>(e.Strict="strict",e.Loose="loose",e))(Jt||{}),Dr=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(Dr||{}),On=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(On||{}),Pu=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(Pu||{});function ro(e){var t,n;const r=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,i=typeof(r==null?void 0:r.hasAttribute)=="function"?r.hasAttribute("contenteditable"):!1,o=typeof(r==null?void 0:r.closest)=="function"?r.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||i||!!o}function mg(e){return e.ctrlKey||e.metaKey||e.shiftKey}function Os(e,t,n,r){const i=t.split("+").map(o=>o.trim().toLowerCase());return i.length===1?e.toLowerCase()===t.toLowerCase():(r?n.delete(e.toLowerCase()):n.add(e.toLowerCase()),i.every((o,s)=>n.has(o)&&Array.from(n.values())[s]===i[s]))}function yg(e,t){return n=>{if(!n.code&&!n.key)return!1;const r=_g(n.code,e);return Array.isArray(e)?e.some(i=>Os(n[r],i,t,n.type==="keyup")):Os(n[r],e,t,n.type==="keyup")}}function _g(e,t){return typeof t=="string"?e===t?"code":"key":t.includes(e)?"code":"key"}function zn(e,t){const n=ye(()=>ge(t==null?void 0:t.actInsideInputWithModifier)??!1),r=ye(()=>ge(t==null?void 0:t.target)??window),i=de(ge(e)===!0);let o=!1;const s=new Set;let a=l(ge(e));we(()=>ge(e),(c,d)=>{typeof d=="boolean"&&typeof c!="boolean"&&u(),a=l(c)},{immediate:!0}),dt(()=>{ru(window,["blur","contextmenu"],u)}),gs((...c)=>a(...c),c=>{o=mg(c),!((!o||o&&!n.value)&&ro(c))&&(c.preventDefault(),i.value=!0)},{eventName:"keydown",target:r}),gs((...c)=>a(...c),c=>{if(i.value){if((!o||o&&!n.value)&&ro(c))return;u()}},{eventName:"keyup",target:r});function u(){o=!1,s.clear(),i.value=!1}function l(c){return c===null?(u(),()=>!1):typeof c=="boolean"?(u(),i.value=c,()=>!1):Array.isArray(c)||typeof c=="string"?yg(c,s):c}return i}const Au="vue-flow__node-desc",Tu="vue-flow__edge-desc",wg="vue-flow__aria-live",Ou=["Enter"," ","Escape"],dn={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function io(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function oo(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)}function ri(e){return{width:e.offsetWidth,height:e.offsetHeight}}function en(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function zu(e,t){return{x:en(e.x,t[0][0],t[1][0]),y:en(e.y,t[0][1],t[1][1])}}function zs(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function Rt(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function qt(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!Rt(e)}function Cn(e){return qt(e)&&"computedPosition"in e}function ar(e){return!Number.isNaN(e)&&Number.isFinite(e)}function bg(e){return ar(e.width)&&ar(e.height)&&ar(e.x)&&ar(e.y)}function Eg(e,t,n){const r={id:e.id.toString(),type:e.type??"default",dimensions:un({width:0,height:0}),computedPosition:un({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Ce(e.data)?e.data:{},events:un(Ce(e.events)?e.events:{})};return Object.assign(t??r,e,{id:e.id.toString(),parentNode:n})}function Du(e,t,n){var r,i;const o={id:e.id.toString(),type:e.type??(t==null?void 0:t.type)??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(r=e.sourceHandle)==null?void 0:r.toString(),targetHandle:(i=e.targetHandle)==null?void 0:i.toString(),updatable:e.updatable??(n==null?void 0:n.updatable),selectable:e.selectable??(n==null?void 0:n.selectable),focusable:e.focusable??(n==null?void 0:n.focusable),data:Ce(e.data)?e.data:{},events:un(Ce(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??(n==null?void 0:n.interactionWidth),...n??{}};return Object.assign(t??o,e,{id:e.id.toString()})}function Lu(e,t,n,r){const i=typeof e=="string"?e:e.id,o=new Set,s=r==="source"?"target":"source";for(const a of n)a[s]===i&&o.add(a[r]);return t.filter(a=>o.has(a.id))}function xg(...e){if(e.length===3){const[o,s,a]=e;return Lu(o,s,a,"target")}const[t,n]=e,r=typeof t=="string"?t:t.id;return n.filter(o=>Rt(o)&&o.source===r).map(o=>n.find(s=>qt(s)&&s.id===o.target))}function Sg(...e){if(e.length===3){const[o,s,a]=e;return Lu(o,s,a,"source")}const[t,n]=e,r=typeof t=="string"?t:t.id;return n.filter(o=>Rt(o)&&o.target===r).map(o=>n.find(s=>qt(s)&&s.id===o.source))}function Ru({source:e,sourceHandle:t,target:n,targetHandle:r}){return`vueflow__edge-${e}${t??""}-${n}${r??""}`}function kg(e,t){return t.some(n=>Rt(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function Bu({x:e,y:t},{x:n,y:r,zoom:i}){return{x:e*i+n,y:t*i+r}}function Lr({x:e,y:t},{x:n,y:r,zoom:i},o=!1,[s,a]=[1,1]){const u={x:(e-n)/i,y:(t-r)/i};return o?{x:s*Math.round(u.x/s),y:a*Math.round(u.y/a)}:u}function Vu(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Rr({x:e,y:t,width:n,height:r}){return{x:e,y:t,x2:e+n,y2:t+r}}function Gu({x:e,y:t,x2:n,y2:r}){return{x:e,y:t,width:n-e,height:r-t}}function $g(e,t){return Gu(Vu(Rr(e),Rr(t)))}function ii(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const r=e[n];t=Vu(t,Rr({...r.computedPosition,...r.dimensions}))}return Gu(t)}function Fu(e,t,n={x:0,y:0,zoom:1},r=!1,i=!1){const o={...Lr(t,n),width:t.width/n.zoom,height:t.height/n.zoom},s=[];for(const a of e){const{dimensions:u,selectable:l=!0,hidden:c=!1}=a,d=u.width??a.width??null,h=u.height??a.height??null;if(i&&!l||c)continue;const f=oo(o,io(a)),p=d===null||h===null,g=r&&f>0,m=(d??0)*(h??0);(p||g||f>=m||a.dragging)&&s.push(a)}return s}function Ht(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const r of e)n.add(r.id);return t.filter(r=>n.has(r.source)||n.has(r.target))}function Ds(e,t,n,r,i,o=.1,s={x:0,y:0}){const a=t/(e.width*(1+o)),u=n/(e.height*(1+o)),l=Math.min(a,u),c=en(l,r,i),d=e.x+e.width/2,h=e.y+e.height/2,f=t/2-d*c+(s.x??0),p=n/2-h*c+(s.y??0);return{x:f,y:p,zoom:c}}function Ng(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function Hu(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:Hu(n,t):!1}function Fn(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`}function Ls(e,t,n){return e<t?en(Math.abs(e-t),1,t)/t:e>n?-en(Math.abs(e-n),1,t)/t:0}function Yu(e,t,n=15,r=40){const i=Ls(e.x,r,t.width-r)*n,o=Ls(e.y,r,t.height-r)*n;return[i,o]}function $i(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,r=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||r>0||e.position.x<0||e.position.y<0){let i={};if(typeof t.style=="function"?i={...t.style(t)}:t.style&&(i={...t.style}),i.width=i.width??`${t.dimensions.width}px`,i.height=i.height??`${t.dimensions.height}px`,n>0)if(typeof i.width=="string"){const o=Number(i.width.replace("px",""));i.width=`${o+n}px`}else i.width+=n;if(r>0)if(typeof i.height=="string"){const o=Number(i.height.replace("px",""));i.height=`${o+r}px`}else i.height+=r;if(e.position.x<0){const o=Math.abs(e.position.x);if(t.position.x=t.position.x-o,typeof i.width=="string"){const s=Number(i.width.replace("px",""));i.width=`${s+o}px`}else i.width+=o;e.position.x=0}if(e.position.y<0){const o=Math.abs(e.position.y);if(t.position.y=t.position.y-o,typeof i.height=="string"){const s=Number(i.height.replace("px",""));i.height=`${s+o}px`}else i.height+=o;e.position.y=0}t.dimensions.width=Number(i.width.toString().replace("px","")),t.dimensions.height=Number(i.height.toString().replace("px","")),typeof t.style=="function"?t.style=o=>{const s=t.style;return{...s(o),...i}}:t.style={...t.style,...i}}}}function Rs(e,t){var n,r;const i=e.filter(s=>s.type==="add"||s.type==="remove");for(const s of i)if(s.type==="add")t.findIndex(u=>u.id===s.item.id)===-1&&t.push(s.item);else if(s.type==="remove"){const a=t.findIndex(u=>u.id===s.id);a!==-1&&t.splice(a,1)}const o=t.map(s=>s.id);for(const s of t)for(const a of e)if(a.id===s.id)switch(a.type){case"select":s.selected=a.selected;break;case"position":if(Cn(s)&&(typeof a.position<"u"&&(s.position=a.position),typeof a.dragging<"u"&&(s.dragging=a.dragging),s.expandParent&&s.parentNode)){const u=t[o.indexOf(s.parentNode)];u&&Cn(u)&&$i(s,u)}break;case"dimensions":if(Cn(s)&&(typeof a.dimensions<"u"&&(s.dimensions=a.dimensions),typeof a.updateStyle<"u"&&(s.style={...s.style||{},width:`${(n=a.dimensions)==null?void 0:n.width}px`,height:`${(r=a.dimensions)==null?void 0:r.height}px`}),typeof a.resizing<"u"&&(s.resizing=a.resizing),s.expandParent&&s.parentNode)){const u=t[o.indexOf(s.parentNode)];u&&Cn(u)&&(!!u.dimensions.width&&!!u.dimensions.height?$i(s,u):ut(()=>{$i(s,u)}))}break}return t}function $t(e,t){return{id:e,type:"select",selected:t}}function Bs(e){return{item:e,type:"add"}}function Vs(e){return{id:e,type:"remove"}}function Gs(e,t,n,r,i){return{id:e,source:t,target:n,sourceHandle:r||null,targetHandle:i||null,type:"remove"}}function Mt(e,t=new Set,n=!1){const r=[];for(const[i,o]of e){const s=t.has(i);!(o.selected===void 0&&!s)&&o.selected!==s&&(n&&(o.selected=s),r.push($t(o.id,s)))}return r}function Z(e){const t=new Set;let n=!1;const r=()=>t.size>0;e&&(n=!0,t.add(e));const i=a=>{t.delete(a)};return{on:a=>{e&&n&&t.delete(e),t.add(a);const u=()=>{i(a),e&&n&&t.add(e)};return Qr(u),{off:u}},off:i,trigger:a=>Promise.all(Array.from(t).map(u=>u(a))),hasListeners:r,fns:t}}function Fs(e,t,n){let r=e;do{if(r&&r.matches(t))return!0;if(r===n)return!1;r=r.parentElement}while(r);return!1}function Cg(e,t,n,r,i){var o,s;const a=[];for(const u of e)(u.selected||u.id===i)&&(!u.parentNode||!Hu(u,r))&&(u.draggable||t&&typeof u.draggable>"u")&&a.push(un({id:u.id,position:u.position||{x:0,y:0},distance:{x:n.x-((o=u.computedPosition)==null?void 0:o.x)||0,y:n.y-((s=u.computedPosition)==null?void 0:s.y)||0},from:u.computedPosition,extent:u.extent,parentNode:u.parentNode,dimensions:u.dimensions,expandParent:u.expandParent}));return a}function Ni({id:e,dragItems:t,findNode:n}){const r=[];for(const i of t){const o=n(i.id);o&&r.push(o)}return[e?r.find(i=>i.id===e):r[0],r]}function Xu(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function Mg(e,t,n){const[r,i,o,s]=typeof e!="string"?Xu(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+s,n.computedPosition.y+r],[n.computedPosition.x+n.dimensions.width-i,n.computedPosition.y+n.dimensions.height-o]]:!1}function Ig(e,t,n,r){let i=e.extent||n;if((i==="parent"||!Array.isArray(i)&&(i==null?void 0:i.range)==="parent")&&!e.expandParent)if(e.parentNode&&r&&e.dimensions.width&&e.dimensions.height){const o=Mg(i,e,r);o&&(i=o)}else t(new Pe(Me.NODE_EXTENT_INVALID,e.id)),i=n;else if(Array.isArray(i)){const o=(r==null?void 0:r.computedPosition.x)||0,s=(r==null?void 0:r.computedPosition.y)||0;i=[[i[0][0]+o,i[0][1]+s],[i[1][0]+o,i[1][1]+s]]}else if(i!=="parent"&&(i!=null&&i.range)&&Array.isArray(i.range)){const[o,s,a,u]=Xu(i.padding),l=(r==null?void 0:r.computedPosition.x)||0,c=(r==null?void 0:r.computedPosition.y)||0;i=[[i.range[0][0]+l+u,i.range[0][1]+c+o],[i.range[1][0]+l-s,i.range[1][1]+c-a]]}return i==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:i}function Pg({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function Ro(e,t,n,r,i){const o=Pg(e.dimensions,Ig(e,n,r,i)),s=zu(t,o);return{position:{x:s.x-((i==null?void 0:i.computedPosition.x)||0),y:s.y-((i==null?void 0:i.computedPosition.y)||0)},computedPosition:s}}function Br(e,t,n=Q.Left){const r=((t==null?void 0:t.x)??0)+e.computedPosition.x,i=((t==null?void 0:t.y)??0)+e.computedPosition.y,{width:o,height:s}=t??Og(e);switch((t==null?void 0:t.position)??n){case Q.Top:return{x:r+o/2,y:i};case Q.Right:return{x:r+o,y:i+s/2};case Q.Bottom:return{x:r+o/2,y:i+s};case Q.Left:return{x:r,y:i+s/2}}}function Hs(e=[],t){return e.length&&(t?e.find(n=>n.id===t):e[0])||null}function Ag({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:o,width:s,height:a,viewport:u}){const l={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+o)};l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const c=Rr({x:(0-u.x)/u.zoom,y:(0-u.y)/u.zoom,width:s/u.zoom,height:a/u.zoom}),d=Math.max(0,Math.min(c.x2,l.x2)-Math.max(c.x,l.x)),h=Math.max(0,Math.min(c.y2,l.y2)-Math.max(c.y,l.y));return Math.ceil(d*h)>0}function Tg(e,t,n=!1){const r=typeof e.zIndex=="number";let i=r?e.zIndex:0;const o=t(e.source),s=t(e.target);return!o||!s?0:(n&&(i=r?e.zIndex:Math.max(o.computedPosition.z||0,s.computedPosition.z||0)),i)}var Me=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(Me||{});const Ys={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class Pe extends Error{constructor(t,...n){var r;super((r=Ys[t])==null?void 0:r.call(Ys,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function Bo(e){return"clientX"in e}function Dt(e,t){var n,r;const i=Bo(e),o=i?e.clientX:(n=e.touches)==null?void 0:n[0].clientX,s=i?e.clientY:(r=e.touches)==null?void 0:r[0].clientY;return{x:o-((t==null?void 0:t.left)??0),y:s-((t==null?void 0:t.top)??0)}}const Vr=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Og(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function Uu(){return{handleDomNode:null,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},endHandle:null}}function Ci(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function Xs(e,t,n,r){const i=[];for(const o of t[n]||[])if(`${e.id}-${o.id}-${n}`!==r){const{x:s,y:a}=Br(e,o);i.push({id:o.id||null,type:n,nodeId:e.id,x:s,y:a})}return i}function zg(e,t,n,r,i,o){const{x:s,y:a}=Dt(e),l=t.elementsFromPoint(s,a).find(p=>p.classList.contains("vue-flow__handle"));if(l){const p=l.getAttribute("data-nodeid");if(p){const g=Vo(void 0,l),m=l.getAttribute("data-handleid"),y=o({nodeId:p,id:m,type:g});if(y){const _=i.find(S=>S.nodeId===p&&S.type===g&&S.id===m);return{handle:{id:m,type:g,nodeId:p,x:(_==null?void 0:_.x)||n.x,y:(_==null?void 0:_.y)||n.y},validHandleResult:y}}}}let c=[],d=Number.POSITIVE_INFINITY;for(const p of i){const g=Math.sqrt((p.x-n.x)**2+(p.y-n.y)**2);if(g<=r){const m=o(p);g<=d&&(g<d?c=[{handle:p,validHandleResult:m}]:g===d&&c.push({handle:p,validHandleResult:m}),d=g)}}if(!c.length)return{handle:null,validHandleResult:Uu()};if(c.length===1)return c[0];const h=c.some(({validHandleResult:p})=>p.isValid),f=c.some(({handle:p})=>p.type==="target");return c.find(({handle:p,validHandleResult:g})=>f?p.type==="target":h?g.isValid:!0)||c[0]}function Us(e,t,n,r,i,o,s,a,u,l,c){const d=o==="target",h=a.querySelector(`.vue-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),{x:f,y:p}=Dt(e),g=a.elementFromPoint(f,p),m=g!=null&&g.classList.contains("vue-flow__handle")?g:h,y=Uu();if(m){y.handleDomNode=m;const _=Vo(void 0,m),S=m.getAttribute("data-nodeid"),E=m.getAttribute("data-handleid"),k=m.classList.contains("connectable"),I=m.classList.contains("connectableend"),T={source:d?S:r,sourceHandle:d?E:i,target:d?r:S,targetHandle:d?i:E};y.connection=T,k&&I&&(n===Jt.Strict?d&&_==="source"||!d&&_==="target":S!==r||E!==i)&&(y.isValid=s(T,{edges:u,nodes:l,sourceNode:c(T.source),targetNode:c(T.target)}),y.endHandle={nodeId:S,handleId:E,type:_,position:y.isValid?m.getAttribute("data-handlepos"):null})}return y}function Dg({nodes:e,nodeId:t,handleId:n,handleType:r}){const i=[];for(let o=0;o<e.length;o++){const s=e[o],{handleBounds:a}=s;let u=[],l=[];a&&(u=Xs(s,a,"source",`${t}-${n}-${r}`),l=Xs(s,a,"target",`${t}-${n}-${r}`)),i.push(...u,...l)}return i}function Vo(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Lg(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}const Rg=["production","prod"];function oi(e,...t){Wu()&&console.warn(`[Vue Flow]: ${e}`,...t)}function Wu(){return!Rg.includes("production")}function Ws(e,t,n,r){const i=t.querySelectorAll(`.vue-flow__handle${e}`);return Array.from(i).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...ri(s)}})}function so(e,t,n,r,i,o=!1,s){i.value=!1,e.selected?(o||e.selected&&t)&&(r([e]),ut(()=>{s.blur()})):n([e])}function Ce(e){return typeof H(e)<"u"}function Bg(e,t,n,r){if(!e||!e.source||!e.target)return n(new Pe(Me.EDGE_INVALID,(e==null?void 0:e.id)??"[ID UNKNOWN]")),!1;let i;return Rt(e)?i=e:i={...e,id:Ru(e)},i=Du(i,void 0,r),kg(i,t)?!1:i}function Vg(e,t,n,r,i,o){if(!t.source||!t.target)return o(new Pe(Me.EDGE_INVALID,e.id)),!1;const s=r(e.id);if(!s)return o(new Pe(Me.EDGE_NOT_FOUND,e.id)),!1;const{id:a,...u}=e,l={...u,id:i?Ru(t):a,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(s),1,l),l}function qs(e,t,n){const r={},i=[];for(let o=0;o<e.length;++o){const s=e[o];if(!qt(s)){n(new Pe(Me.NODE_INVALID,s==null?void 0:s.id)||`[ID UNKNOWN|INDEX ${o}]`);continue}const a=Eg(s,t(s.id),s.parentNode);s.parentNode&&(r[s.parentNode]=!0),i[o]=a}for(const o of i){const s=t(o.parentNode)||i.find(a=>a.id===o.parentNode);o.parentNode&&!s&&n(new Pe(Me.NODE_MISSING_PARENT,o.id,o.parentNode)),(o.parentNode||r[o.id])&&(r[o.id]&&(o.isParent=!0),s&&(s.isParent=!0))}return i}function Ks(e,t){e.clear();for(const n of t){const{id:r,source:i,target:o,sourceHandle:s=null,targetHandle:a=null}=n,u=`${i}-source-${s}`,l=`${o}-target-${a}`,c=e.get(u)||new Map,d=e.get(l)||new Map,h=un({edgeId:r,source:i,target:o,sourceHandle:s,targetHandle:a});e.set(u,c.set(`${o}-${a}`,h)),e.set(l,d.set(`${i}-${s}`,h))}}function Zs(e,t,n,r,i,o,s,a){const u=[];for(const l of e){const c=Rt(l)?l:Bg(l,a,i,o);if(!c)continue;const d=n(c.source),h=n(c.target);if(!d||!h){i(new Pe(Me.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!d){i(new Pe(Me.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!h){i(new Pe(Me.EDGE_TARGET_MISSING,c.id,c.target));continue}if(t&&!t(c,{edges:a,nodes:s,sourceNode:d,targetNode:h})){i(new Pe(Me.EDGE_INVALID,c.id));continue}const f=r(c.id);u.push({...Du(c,f,o),sourceNode:d,targetNode:h})}return u}const js=Symbol("vueFlow"),Go=Symbol("nodeId"),qu=Symbol("nodeRef"),Gg=Symbol("edgeId"),Fg=Symbol("edgeRef"),si=Symbol("slots");function Ku(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:r,noDragClassName:i,nodes:o,nodeExtent:s,nodeDragThreshold:a,viewport:u,autoPanOnNodeDrag:l,autoPanSpeed:c,nodesDraggable:d,panBy:h,findNode:f,multiSelectionActive:p,nodesSelectionActive:g,selectNodesOnDrag:m,removeSelectedElements:y,addSelectedNodes:_,updateNodePositions:S,emits:E}=ve(),{onStart:k,onDrag:I,onStop:T,onClick:z,el:V,disabled:O,id:N,selectable:Y,dragHandle:X}=e,v=de(!1);let $=[],b,P=null,A={x:void 0,y:void 0},C={x:0,y:0},M=null,R=!1,U=0,F=!1;const G=Xg(),q=({x:J,y:ee})=>{A={x:J,y:ee};let x=!1;if($=$.map(w=>{const B={x:J-w.distance.x,y:ee-w.distance.y};n.value&&(B.x=r.value[0]*Math.round(B.x/r.value[0]),B.y=r.value[1]*Math.round(B.y/r.value[1]));const{computedPosition:D}=Ro(w,B,E.error,s.value,w.parentNode?f(w.parentNode):void 0);return x=x||w.position.x!==D.x||w.position.y!==D.y,w.position=D,w}),!!x&&(S($,!0,!0),v.value=!0,M)){const[w,B]=Ni({id:N,dragItems:$,findNode:f});I({event:M,node:w,nodes:B})}},oe=()=>{if(!P)return;const[J,ee]=Yu(C,P,c.value);if(J!==0||ee!==0){const x={x:(A.x??0)-J/u.value.zoom,y:(A.y??0)-ee/u.value.zoom};h({x:J,y:ee})&&q(x)}U=requestAnimationFrame(oe)},re=(J,ee)=>{R=!0;const x=f(N);!m.value&&!p.value&&x&&(x.selected||y()),x&&ge(Y)&&m.value&&so(x,p.value,_,y,g,!1,ee);const w=G(J);if(A=w,$=Cg(o.value,d.value,w,f,N),$.length){const[B,D]=Ni({id:N,dragItems:$,findNode:f});k({event:J.sourceEvent,node:B,nodes:D})}},se=(J,ee)=>{var x;J.sourceEvent.type==="touchmove"&&J.sourceEvent.touches.length>1||(a.value===0&&re(J,ee),A=G(J),P=((x=t.value)==null?void 0:x.getBoundingClientRect())||null,C=Dt(J.sourceEvent,P))},ie=(J,ee)=>{const x=G(J);if(!F&&R&&l.value&&(F=!0,oe()),!R){const w=x.xSnapped-(A.x??0),B=x.ySnapped-(A.y??0);Math.sqrt(w*w+B*B)>a.value&&re(J,ee)}(A.x!==x.xSnapped||A.y!==x.ySnapped)&&$.length&&R&&(M=J.sourceEvent,C=Dt(J.sourceEvent,P),q(x))},ue=J=>{if(!R){const ee=G(J),x=ee.xSnapped-(A.x??0),w=ee.ySnapped-(A.y??0),B=Math.sqrt(x*x+w*w);B!==0&&B<=a.value&&(z==null||z(J.sourceEvent));return}if(v.value=!1,F=!1,R=!1,cancelAnimationFrame(U),$.length){S($,!1,!1);const[ee,x]=Ni({id:N,dragItems:$,findNode:f});T({event:J.sourceEvent,node:ee,nodes:x})}};return we([()=>ge(O),V],([J,ee],x,w)=>{if(ee){const B=Ze(ee);J||(b=$f().on("start",D=>se(D,ee)).on("drag",D=>ie(D,ee)).on("end",D=>ue(D)).filter(D=>{const L=D.target,K=ge(X);return!D.button&&(!i.value||!Fs(L,`.${i.value}`,ee)&&(!K||Fs(L,K,ee)))}),B.call(b)),w(()=>{B.on(".drag",null),b&&(b.on("start",null),b.on("drag",null),b.on("end",null))})}}),v}function Hg(){return{doubleClick:Z(),click:Z(),mouseEnter:Z(),mouseMove:Z(),mouseLeave:Z(),contextMenu:Z(),updateStart:Z(),update:Z(),updateEnd:Z()}}function Yg(e,t){const n=Hg();return n.doubleClick.on(r=>{var i,o;t.edgeDoubleClick(r),(o=(i=e.events)==null?void 0:i.doubleClick)==null||o.call(i,r)}),n.click.on(r=>{var i,o;t.edgeClick(r),(o=(i=e.events)==null?void 0:i.click)==null||o.call(i,r)}),n.mouseEnter.on(r=>{var i,o;t.edgeMouseEnter(r),(o=(i=e.events)==null?void 0:i.mouseEnter)==null||o.call(i,r)}),n.mouseMove.on(r=>{var i,o;t.edgeMouseMove(r),(o=(i=e.events)==null?void 0:i.mouseMove)==null||o.call(i,r)}),n.mouseLeave.on(r=>{var i,o;t.edgeMouseLeave(r),(o=(i=e.events)==null?void 0:i.mouseLeave)==null||o.call(i,r)}),n.contextMenu.on(r=>{var i,o;t.edgeContextMenu(r),(o=(i=e.events)==null?void 0:i.contextMenu)==null||o.call(i,r)}),n.updateStart.on(r=>{var i,o;t.edgeUpdateStart(r),(o=(i=e.events)==null?void 0:i.updateStart)==null||o.call(i,r)}),n.update.on(r=>{var i,o;t.edgeUpdate(r),(o=(i=e.events)==null?void 0:i.update)==null||o.call(i,r)}),n.updateEnd.on(r=>{var i,o;t.edgeUpdateEnd(r),(o=(i=e.events)==null?void 0:i.updateEnd)==null||o.call(i,r)}),Object.entries(n).reduce((r,[i,o])=>(r.emit[i]=o.trigger,r.on[i]=o.on,r),{emit:{},on:{}})}function Xg(){const{viewport:e,snapGrid:t,snapToGrid:n}=ve();return({sourceEvent:r})=>{const i=r.touches?r.touches[0].clientX:r.clientX,o=r.touches?r.touches[0].clientY:r.clientY,s={x:(i-e.value.x)/e.value.zoom,y:(o-e.value.y)/e.value.zoom};return{xSnapped:n.value?t.value[0]*Math.round(s.x/t.value[0]):s.x,ySnapped:n.value?t.value[1]*Math.round(s.y/t.value[1]):s.y,...s}}}function ur(){return!0}function Zu({handleId:e,nodeId:t,type:n,isValidConnection:r,edgeUpdaterType:i,onEdgeUpdate:o,onEdgeUpdateEnd:s}){const{vueFlowRef:a,connectionMode:u,connectionRadius:l,connectOnClick:c,connectionClickStartHandle:d,nodesConnectable:h,autoPanOnConnect:f,autoPanSpeed:p,findNode:g,panBy:m,startConnection:y,updateConnection:_,endConnection:S,emits:E,viewport:k,edges:I,nodes:T,isValidConnection:z}=ve();let V=null,O=!1,N=null,Y=null;function X($){var b;const P=ge(n)==="target",A=Bo($),C=zs($.target);if(A&&$.button===0||!A){let M=function(D){ee=Dt(D,ue);const{handle:L,validHandleResult:K}=zg(D,C,Lr(ee,k.value,!1,[1,1]),l.value,w,j=>Us(D,j,u.value,ge(t),ge(e),P?"target":"source",F,C,I.value,T.value,g));if(G=L,x||(B(),x=!0),V=K.connection,O=K.isValid,N=K.handleDomNode,!(O&&G&&(Y!=null&&Y.endHandle)&&K.endHandle&&Y.endHandle.type===K.endHandle.type&&Y.endHandle.nodeId===K.endHandle.nodeId&&Y.endHandle.handleId===K.endHandle.handleId)){if(_(G&&O?Bu({x:G.x,y:G.y},k.value):ee,K.endHandle,Lg(!!G,O)),Y=K,!G&&!O&&!N)return Ci(J);V&&V.source!==V.target&&N&&(Ci(J),J=N,N.classList.add("connecting","vue-flow__handle-connecting"),N.classList.toggle("valid",O),N.classList.toggle("vue-flow__handle-valid",O))}},R=function(D){(G||N)&&V&&O&&(o?o(D,V):E.connect(V)),E.connectEnd(D),i&&(s==null||s(D)),Ci(J),cancelAnimationFrame(q),S(D),x=!1,O=!1,V=null,N=null,C.removeEventListener("mousemove",M),C.removeEventListener("mouseup",R),C.removeEventListener("touchmove",M),C.removeEventListener("touchend",R)};const U=g(ge(t));let F=ge(r)||z.value||ur;!F&&U&&(F=(P?U.isValidSourcePos:U.isValidTargetPos)||ur);let G,q=0;const{x:oe,y:re}=Dt($),se=C==null?void 0:C.elementFromPoint(oe,re),ie=Vo(ge(i),se),ue=(b=a.value)==null?void 0:b.getBoundingClientRect();if(!ue||!ie)return;let J,ee=Dt($,ue),x=!1;const w=Dg({nodes:T.value,nodeId:ge(t),handleId:ge(e),handleType:ie}),B=()=>{if(!f.value)return;const[D,L]=Yu(ee,ue,p.value);m({x:D,y:L}),q=requestAnimationFrame(B)};y({nodeId:ge(t),handleId:ge(e),type:ie,position:(se==null?void 0:se.getAttribute("data-handlepos"))||Q.Top},{x:oe-ue.left,y:re-ue.top}),E.connectStart({event:$,nodeId:ge(t),handleId:ge(e),handleType:ie}),C.addEventListener("mousemove",M),C.addEventListener("mouseup",R),C.addEventListener("touchmove",M),C.addEventListener("touchend",R)}}function v($){if(!c.value)return;const b=ge(n)==="target";if(!d.value)E.clickConnectStart({event:$,nodeId:ge(t),handleId:ge(e)}),y({nodeId:ge(t),type:ge(n),handleId:ge(e)},void 0,!0);else{let P=ge(r)||z.value||ur;const A=g(ge(t));if(!P&&A&&(P=(b?A.isValidSourcePos:A.isValidTargetPos)||ur),A&&(typeof A.connectable>"u"?h.value:A.connectable)===!1)return;const C=zs($.target),{connection:M,isValid:R}=Us($,{nodeId:ge(t),id:ge(e),type:ge(n)},u.value,d.value.nodeId,d.value.handleId||null,d.value.type,P,C,I.value,T.value,g),U=M.source===M.target;R&&!U&&E.connect(M),E.clickConnectEnd($),S($,!0)}}return{handlePointerDown:X,handleClick:v}}function Ug(){return Bt(Go,"")}function ju(e){const t=e??Ug()??"",n=Bt(qu,de(null)),{findNode:r,edges:i,emits:o}=ve(),s=r(t);return s||o.error(new Pe(Me.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:s,parentNode:te(()=>r(s.parentNode)),connectedEdges:te(()=>Ht([s],i.value))}}function Wg(){return{doubleClick:Z(),click:Z(),mouseEnter:Z(),mouseMove:Z(),mouseLeave:Z(),contextMenu:Z(),dragStart:Z(),drag:Z(),dragStop:Z()}}function qg(e,t){const n=Wg();return n.doubleClick.on(r=>{var i,o;t.nodeDoubleClick(r),(o=(i=e.events)==null?void 0:i.doubleClick)==null||o.call(i,r)}),n.click.on(r=>{var i,o;t.nodeClick(r),(o=(i=e.events)==null?void 0:i.click)==null||o.call(i,r)}),n.mouseEnter.on(r=>{var i,o;t.nodeMouseEnter(r),(o=(i=e.events)==null?void 0:i.mouseEnter)==null||o.call(i,r)}),n.mouseMove.on(r=>{var i,o;t.nodeMouseMove(r),(o=(i=e.events)==null?void 0:i.mouseMove)==null||o.call(i,r)}),n.mouseLeave.on(r=>{var i,o;t.nodeMouseLeave(r),(o=(i=e.events)==null?void 0:i.mouseLeave)==null||o.call(i,r)}),n.contextMenu.on(r=>{var i,o;t.nodeContextMenu(r),(o=(i=e.events)==null?void 0:i.contextMenu)==null||o.call(i,r)}),n.dragStart.on(r=>{var i,o;t.nodeDragStart(r),(o=(i=e.events)==null?void 0:i.dragStart)==null||o.call(i,r)}),n.drag.on(r=>{var i,o;t.nodeDrag(r),(o=(i=e.events)==null?void 0:i.drag)==null||o.call(i,r)}),n.dragStop.on(r=>{var i,o;t.nodeDragStop(r),(o=(i=e.events)==null?void 0:i.dragStop)==null||o.call(i,r)}),Object.entries(n).reduce((r,[i,o])=>(r.emit[i]=o.trigger,r.on[i]=o.on,r),{emit:{},on:{}})}function Qu(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:r,snapGrid:i,snapToGrid:o,nodesDraggable:s,emits:a}=ve();return(u,l=!1)=>{const c=o.value?i.value[0]:5,d=o.value?i.value[1]:5,h=l?4:1,f=u.x*c*h,p=u.y*d*h,g=[];for(const m of e.value)if(m.draggable||s&&typeof m.draggable>"u"){const y={x:m.computedPosition.x+f,y:m.computedPosition.y+p},{computedPosition:_}=Ro(m,y,a.error,t.value,m.parentNode?r(m.parentNode):void 0);g.push({id:m.id,position:_,from:m.position,distance:{x:u.x,y:u.y},dimensions:m.dimensions})}n(g,!0,!1)}}const Mi=.1;function kt(){return oi("Viewport not initialized yet."),Promise.resolve(!1)}const Kg={zoomIn:kt,zoomOut:kt,zoomTo:kt,fitView:kt,setCenter:kt,fitBounds:kt,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:kt,setTransform:kt,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function Zg(e){function t(r,i){return new Promise(o=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleBy(Ii(e.d3Selection,i,()=>{o(!0)}),r):o(!1)})}function n(r,i,o,s){return new Promise(a=>{const{x:u,y:l}=zu({x:-r,y:-i},e.translateExtent),c=vn.translate(-u,-l).scale(o);e.d3Selection&&e.d3Zoom?e.d3Zoom.transform(Ii(e.d3Selection,s,()=>{a(!0)}),c):a(!1)})}return te(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:i=>t(1.2,i==null?void 0:i.duration),zoomOut:i=>t(1/1.2,i==null?void 0:i.duration),zoomTo:(i,o)=>new Promise(s=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleTo(Ii(e.d3Selection,o==null?void 0:o.duration,()=>{s(!0)}),i):s(!1)}),setViewport:(i,o)=>n(i.x,i.y,i.zoom,o==null?void 0:o.duration),setTransform:(i,o)=>n(i.x,i.y,i.zoom,o==null?void 0:o.duration),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(i={padding:Mi,includeHiddenNodes:!1,duration:0})=>{var o,s;const a=[];for(const h of e.nodes)h.dimensions.width&&h.dimensions.height&&((i==null?void 0:i.includeHiddenNodes)||!h.hidden)&&(!((o=i.nodes)!=null&&o.length)||(s=i.nodes)!=null&&s.length&&i.nodes.includes(h.id))&&a.push(h);if(!a.length)return Promise.resolve(!1);const u=ii(a),{x:l,y:c,zoom:d}=Ds(u,e.dimensions.width,e.dimensions.height,i.minZoom??e.minZoom,i.maxZoom??e.maxZoom,i.padding??Mi,i.offset);return n(l,c,d,i==null?void 0:i.duration)},setCenter:(i,o,s)=>{const a=typeof(s==null?void 0:s.zoom)<"u"?s.zoom:e.maxZoom,u=e.dimensions.width/2-i*a,l=e.dimensions.height/2-o*a;return n(u,l,a,s==null?void 0:s.duration)},fitBounds:(i,o={padding:Mi})=>{const{x:s,y:a,zoom:u}=Ds(i,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,o.padding);return n(s,a,u,o==null?void 0:o.duration)},project:i=>Lr(i,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:i=>{if(e.vueFlowRef){const{x:o,y:s}=e.vueFlowRef.getBoundingClientRect(),a={x:i.x-o,y:i.y-s};return Lr(a,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:i=>{if(e.vueFlowRef){const{x:o,y:s}=e.vueFlowRef.getBoundingClientRect(),a={x:i.x+o,y:i.y+s};return Bu(a,e.viewport)}return{x:0,y:0}}}:Kg)}function Ii(e,t=0,n){return e.transition().duration(t).on("end",n)}function jg(e,t,n){const r=Ua(!0);return r.run(()=>{const i=()=>{r.run(()=>{let g,m,y=!!(n.nodes.value.length||n.edges.value.length);g=an([e.modelValue,()=>{var _,S;return(S=(_=e.modelValue)==null?void 0:_.value)==null?void 0:S.length}],([_])=>{_&&Array.isArray(_)&&(m==null||m.pause(),n.setElements(_),!m&&!y&&_.length?y=!0:m==null||m.resume())}),m=an([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([_,S])=>{var E;(E=e.modelValue)!=null&&E.value&&Array.isArray(e.modelValue.value)&&(g==null||g.pause(),e.modelValue.value=[..._,...S],ut(()=>{g==null||g.resume()}))},{immediate:y}),mr(()=>{g==null||g.stop(),m==null||m.stop()})})},o=()=>{r.run(()=>{let g,m,y=!!n.nodes.value.length;g=an([e.nodes,()=>{var _,S;return(S=(_=e.nodes)==null?void 0:_.value)==null?void 0:S.length}],([_])=>{_&&Array.isArray(_)&&(m==null||m.pause(),n.setNodes(_),!m&&!y&&_.length?y=!0:m==null||m.resume())}),m=an([n.nodes,()=>n.nodes.value.length],([_])=>{var S;(S=e.nodes)!=null&&S.value&&Array.isArray(e.nodes.value)&&(g==null||g.pause(),e.nodes.value=[..._],ut(()=>{g==null||g.resume()}))},{immediate:y}),mr(()=>{g==null||g.stop(),m==null||m.stop()})})},s=()=>{r.run(()=>{let g,m,y=!!n.edges.value.length;g=an([e.edges,()=>{var _,S;return(S=(_=e.edges)==null?void 0:_.value)==null?void 0:S.length}],([_])=>{_&&Array.isArray(_)&&(m==null||m.pause(),n.setEdges(_),!m&&!y&&_.length?y=!0:m==null||m.resume())}),m=an([n.edges,()=>n.edges.value.length],([_])=>{var S;(S=e.edges)!=null&&S.value&&Array.isArray(e.edges.value)&&(g==null||g.pause(),e.edges.value=[..._],ut(()=>{g==null||g.resume()}))},{immediate:y}),mr(()=>{g==null||g.stop(),m==null||m.stop()})})},a=()=>{r.run(()=>{we(()=>t.maxZoom,()=>{t.maxZoom&&Ce(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},u=()=>{r.run(()=>{we(()=>t.minZoom,()=>{t.minZoom&&Ce(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},l=()=>{r.run(()=>{we(()=>t.translateExtent,()=>{t.translateExtent&&Ce(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{r.run(()=>{we(()=>t.nodeExtent,()=>{t.nodeExtent&&Ce(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},d=()=>{r.run(()=>{we(()=>t.applyDefault,()=>{Ce(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},h=()=>{r.run(()=>{const g=async m=>{let y=m;typeof t.autoConnect=="function"&&(y=await t.autoConnect(m)),y!==!1&&n.addEdges([y])};we(()=>t.autoConnect,()=>{Ce(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),we(n.autoConnect,(m,y,_)=>{m?n.onConnect(g):n.hooks.value.connect.off(g),_(()=>{n.hooks.value.connect.off(g)})},{immediate:!0})})},f=()=>{const g=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const m of Object.keys(t)){const y=m;if(!g.includes(y)){const _=ye(()=>t[y]),S=n[y];Co(S)&&r.run(()=>{we(_,E=>{Ce(E)&&(S.value=E)},{immediate:!0})})}}};(()=>{i(),o(),s(),u(),a(),l(),c(),d(),h(),f()})()}),()=>r.stop()}function Qg(){return{edgesChange:Z(),nodesChange:Z(),nodeDoubleClick:Z(),nodeClick:Z(),nodeMouseEnter:Z(),nodeMouseMove:Z(),nodeMouseLeave:Z(),nodeContextMenu:Z(),nodeDragStart:Z(),nodeDrag:Z(),nodeDragStop:Z(),nodesInitialized:Z(),miniMapNodeClick:Z(),miniMapNodeDoubleClick:Z(),miniMapNodeMouseEnter:Z(),miniMapNodeMouseMove:Z(),miniMapNodeMouseLeave:Z(),connect:Z(),connectStart:Z(),connectEnd:Z(),clickConnectStart:Z(),clickConnectEnd:Z(),paneReady:Z(),init:Z(),move:Z(),moveStart:Z(),moveEnd:Z(),selectionDragStart:Z(),selectionDrag:Z(),selectionDragStop:Z(),selectionContextMenu:Z(),selectionStart:Z(),selectionEnd:Z(),viewportChangeStart:Z(),viewportChange:Z(),viewportChangeEnd:Z(),paneScroll:Z(),paneClick:Z(),paneContextMenu:Z(),paneMouseEnter:Z(),paneMouseMove:Z(),paneMouseLeave:Z(),edgeContextMenu:Z(),edgeMouseEnter:Z(),edgeMouseMove:Z(),edgeMouseLeave:Z(),edgeDoubleClick:Z(),edgeClick:Z(),edgeUpdateStart:Z(),edgeUpdate:Z(),edgeUpdateEnd:Z(),updateNodeInternals:Z(),error:Z(e=>oi(e.message))}}function Jg(e,t){td(()=>{for(const[n,r]of Object.entries(t.value)){const i=o=>{e(n,o)};r.fns.add(i),Qr(()=>{r.off(i)})}})}function Ju(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:Lo.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:On.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:Ft.Bezier,style:{}},connectionMode:Jt.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:Vr()?"Meta":"Control",zoomActivationKeyCode:Vr()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:Qg(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const ev=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function tv(e,t,n){const r=Zg(e),i=x=>{const w=x??[];e.hooks.updateNodeInternals.trigger(w)},o=x=>Sg(x,e.nodes,e.edges),s=x=>xg(x,e.nodes,e.edges),a=x=>Ht(x,e.edges),u=x=>{if(x)return t.value.get(x)},l=x=>{if(x)return n.value.get(x)},c=(x,w,B)=>{var D,L;const K=[];for(const j of x){const ae={id:j.id,type:"position",dragging:B,from:j.from};if(w&&(ae.position=j.position,j.parentNode)){const le=u(j.parentNode);ae.position={x:ae.position.x-(((D=le==null?void 0:le.computedPosition)==null?void 0:D.x)??0),y:ae.position.y-(((L=le==null?void 0:le.computedPosition)==null?void 0:L.y)??0)}}K.push(ae)}K!=null&&K.length&&e.hooks.nodesChange.trigger(K)},d=x=>{if(!e.vueFlowRef)return;const w=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!w)return;const B=window.getComputedStyle(w),{m22:D}=new window.DOMMatrixReadOnly(B.transform),L=[];for(let K=0;K<x.length;++K){const j=x[K],ae=u(j.id);if(ae){const le=ri(j.nodeElement);if(!!(le.width&&le.height&&(ae.dimensions.width!==le.width||ae.dimensions.height!==le.height||j.forceUpdate))){const fe=j.nodeElement.getBoundingClientRect();ae.dimensions=le,ae.handleBounds.source=Ws(".source",j.nodeElement,fe,D),ae.handleBounds.target=Ws(".target",j.nodeElement,fe,D),L[K]={id:ae.id,type:"dimensions",dimensions:le}}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&r.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),L.length&&e.hooks.nodesChange.trigger(L)},h=(x,w)=>{const B=new Set,D=new Set;for(const j of x)qt(j)?B.add(j.id):Rt(j)&&D.add(j.id);const L=Mt(t.value,B,!0),K=Mt(n.value,D);if(e.multiSelectionActive){for(const j of B)L.push($t(j,w));for(const j of D)K.push($t(j,w))}L.length&&e.hooks.nodesChange.trigger(L),K.length&&e.hooks.edgesChange.trigger(K)},f=x=>{if(e.multiSelectionActive){const w=x.map(B=>$t(B.id,!0));e.hooks.nodesChange.trigger(w);return}e.hooks.nodesChange.trigger(Mt(t.value,new Set(x.map(w=>w.id)),!0)),e.hooks.edgesChange.trigger(Mt(n.value))},p=x=>{if(e.multiSelectionActive){const w=x.map(B=>$t(B.id,!0));e.hooks.edgesChange.trigger(w);return}e.hooks.edgesChange.trigger(Mt(n.value,new Set(x.map(w=>w.id)))),e.hooks.nodesChange.trigger(Mt(t.value,new Set,!0))},g=x=>{h(x,!0)},m=x=>{const B=(x||e.nodes).map(D=>(D.selected=!1,$t(D.id,!1)));e.hooks.nodesChange.trigger(B)},y=x=>{const B=(x||e.edges).map(D=>(D.selected=!1,$t(D.id,!1)));e.hooks.edgesChange.trigger(B)},_=x=>{if(!x||!x.length)return h([],!1);const w=x.reduce((B,D)=>{const L=$t(D.id,!1);return qt(D)?B.nodes.push(L):B.edges.push(L),B},{nodes:[],edges:[]});w.nodes.length&&e.hooks.nodesChange.trigger(w.nodes),w.edges.length&&e.hooks.edgesChange.trigger(w.edges)},S=x=>{var w;(w=e.d3Zoom)==null||w.scaleExtent([x,e.maxZoom]),e.minZoom=x},E=x=>{var w;(w=e.d3Zoom)==null||w.scaleExtent([e.minZoom,x]),e.maxZoom=x},k=x=>{var w;(w=e.d3Zoom)==null||w.translateExtent(x),e.translateExtent=x},I=x=>{e.nodeExtent=x,i()},T=x=>{var w;(w=e.d3Zoom)==null||w.clickDistance(x)},z=x=>{e.nodesDraggable=x,e.nodesConnectable=x,e.elementsSelectable=x},V=x=>{const w=x instanceof Function?x(e.nodes):x;!e.initialized&&!w.length||(e.nodes=qs(w,u,e.hooks.error.trigger))},O=x=>{const w=x instanceof Function?x(e.edges):x;if(!e.initialized&&!w.length)return;const B=Zs(w,e.isValidConnection,u,l,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);Ks(e.connectionLookup,B),e.edges=B},N=x=>{const w=x instanceof Function?x([...e.nodes,...e.edges]):x;!e.initialized&&!w.length||(V(w.filter(qt)),O(w.filter(Rt)))},Y=x=>{let w=x instanceof Function?x(e.nodes):x;w=Array.isArray(w)?w:[w];const B=qs(w,u,e.hooks.error.trigger),D=[];for(const L of B)D.push(Bs(L));D.length&&e.hooks.nodesChange.trigger(D)},X=x=>{let w=x instanceof Function?x(e.edges):x;w=Array.isArray(w)?w:[w];const B=Zs(w,e.isValidConnection,u,l,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),D=[];for(const L of B)D.push(Bs(L));D.length&&e.hooks.edgesChange.trigger(D)},v=(x,w=!0,B=!1)=>{const D=x instanceof Function?x(e.nodes):x,L=Array.isArray(D)?D:[D],K=[],j=[];function ae(Ee){const fe=a(Ee);for(const xe of fe)(!Ce(xe.deletable)||xe.deletable)&&j.push(Gs(xe.id,xe.source,xe.target,xe.sourceHandle,xe.targetHandle))}function le(Ee){const fe=[];for(const xe of e.nodes)xe.parentNode===Ee&&fe.push(xe);if(fe.length){for(const xe of fe)K.push(Vs(xe.id));w&&ae(fe);for(const xe of fe)le(xe.id)}}for(const Ee of L){const fe=typeof Ee=="string"?u(Ee):Ee;fe&&(Ce(fe.deletable)&&!fe.deletable||(K.push(Vs(fe.id)),w&&ae([fe]),B&&le(fe.id)))}j.length&&e.hooks.edgesChange.trigger(j),K.length&&e.hooks.nodesChange.trigger(K)},$=x=>{const w=x instanceof Function?x(e.edges):x,B=Array.isArray(w)?w:[w],D=[];for(const L of B){const K=typeof L=="string"?l(L):L;K&&(Ce(K.deletable)&&!K.deletable||D.push(Gs(typeof L=="string"?L:L.id,K.source,K.target,K.sourceHandle,K.targetHandle)))}e.hooks.edgesChange.trigger(D)},b=(x,w,B=!0)=>Vg(x,w,e.edges,l,B,e.hooks.error.trigger),P=(x,w,B={replace:!1})=>{const D=l(x);if(!D)return;const L=typeof w=="function"?w(D):w;D.data=B.replace?L:{...D.data,...L}},A=x=>Rs(x,e.nodes),C=x=>{const w=Rs(x,e.edges);return Ks(e.connectionLookup,w),w},M=(x,w,B={replace:!1})=>{const D=u(x);if(!D)return;const L=typeof w=="function"?w(D):w;B.replace?e.nodes.splice(e.nodes.indexOf(D),1,L):Object.assign(D,L)},R=(x,w,B={replace:!1})=>{const D=u(x);if(!D)return;const L=typeof w=="function"?w(D):w;D.data=B.replace?L:{...D.data,...L}},U=(x,w,B=!1)=>{B?e.connectionClickStartHandle=x:e.connectionStartHandle=x,e.connectionEndHandle=null,e.connectionStatus=null,w&&(e.connectionPosition=w)},F=(x,w=null,B=null)=>{e.connectionStartHandle&&(e.connectionPosition=x,e.connectionEndHandle=w,e.connectionStatus=B)},G=(x,w)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,w?e.connectionClickStartHandle=null:e.connectionStartHandle=null},q=x=>{const w=bg(x),B=w?null:Cn(x)?x:u(x.id);return!w&&!B?[null,null,w]:[w?x:io(B),B,w]},oe=(x,w=!0,B=e.nodes)=>{const[D,L,K]=q(x);if(!D)return[];const j=[];for(const ae of B||e.nodes){if(!K&&(ae.id===L.id||!ae.computedPosition))continue;const le=io(ae),Ee=oo(le,D);(w&&Ee>0||Ee>=Number(D.width)*Number(D.height))&&j.push(ae)}return j},re=(x,w,B=!0)=>{const[D]=q(x);if(!D)return!1;const L=oo(D,w);return B&&L>0||L>=Number(D.width)*Number(D.height)},se=x=>{const{viewport:w,dimensions:B,d3Zoom:D,d3Selection:L,translateExtent:K}=e;if(!D||!L||!x.x&&!x.y)return!1;const j=vn.translate(w.x+x.x,w.y+x.y).scale(w.zoom),ae=[[0,0],[B.width,B.height]],le=D.constrain()(j,ae,K),Ee=e.viewport.x!==le.x||e.viewport.y!==le.y||e.viewport.zoom!==le.k;return D.transform(L,le),Ee},ie=x=>{const w=x instanceof Function?x(e):x,B=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Ce(w.defaultEdgeOptions)&&(e.defaultEdgeOptions=w.defaultEdgeOptions);const D=w.modelValue||w.nodes||w.edges?[]:void 0;D&&(w.modelValue&&D.push(...w.modelValue),w.nodes&&D.push(...w.nodes),w.edges&&D.push(...w.edges),N(D));const L=()=>{Ce(w.maxZoom)&&E(w.maxZoom),Ce(w.minZoom)&&S(w.minZoom),Ce(w.translateExtent)&&k(w.translateExtent)};for(const K of Object.keys(w)){const j=K,ae=w[j];![...ev,...B].includes(j)&&Ce(ae)&&(e[j]=ae)}qi(()=>e.d3Zoom).not.toBeNull().then(L),e.initialized||(e.initialized=!0)};return{updateNodePositions:c,updateNodeDimensions:d,setElements:N,setNodes:V,setEdges:O,addNodes:Y,addEdges:X,removeNodes:v,removeEdges:$,findNode:u,findEdge:l,updateEdge:b,updateEdgeData:P,updateNode:M,updateNodeData:R,applyEdgeChanges:C,applyNodeChanges:A,addSelectedElements:g,addSelectedNodes:f,addSelectedEdges:p,setMinZoom:S,setMaxZoom:E,setTranslateExtent:k,setNodeExtent:I,setPaneClickDistance:T,removeSelectedElements:_,removeSelectedNodes:m,removeSelectedEdges:y,startConnection:U,updateConnection:F,endConnection:G,setInteractive:z,setState:ie,getIntersectingNodes:oe,getIncomers:o,getOutgoers:s,getConnectedEdges:a,isNodeIntersecting:re,panBy:se,fitView:x=>r.value.fitView(x),zoomIn:x=>r.value.zoomIn(x),zoomOut:x=>r.value.zoomOut(x),zoomTo:(x,w)=>r.value.zoomTo(x,w),setViewport:(x,w)=>r.value.setViewport(x,w),setTransform:(x,w)=>r.value.setTransform(x,w),getViewport:()=>r.value.getViewport(),getTransform:()=>r.value.getTransform(),setCenter:(x,w,B)=>r.value.setCenter(x,w,B),fitBounds:(x,w)=>r.value.fitBounds(x,w),project:x=>r.value.project(x),screenToFlowCoordinate:x=>r.value.screenToFlowCoordinate(x),flowToScreenCoordinate:x=>r.value.flowToScreenCoordinate(x),toObject:()=>{const x=[],w=[];for(const B of e.nodes){const{computedPosition:D,handleBounds:L,selected:K,dimensions:j,isParent:ae,resizing:le,dragging:Ee,events:fe,...xe}=B;x.push(xe)}for(const B of e.edges){const{selected:D,sourceNode:L,targetNode:K,events:j,...ae}=B;w.push(ae)}return JSON.parse(JSON.stringify({nodes:x,edges:w,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:x=>new Promise(w=>{const{nodes:B,edges:D,position:L,zoom:K,viewport:j}=x;if(B&&V(B),D&&O(D),j!=null&&j.x&&(j!=null&&j.y)||L){const ae=(j==null?void 0:j.x)||L[0],le=(j==null?void 0:j.y)||L[1],Ee=(j==null?void 0:j.zoom)||K||e.viewport.zoom;return qi(()=>r.value.viewportInitialized).toBe(!0).then(()=>{r.value.setViewport({x:ae,y:le,zoom:Ee}).then(()=>{w(!0)})})}else w(!0)}),updateNodeInternals:i,viewportHelper:r,$reset:()=>{const x=Ju();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const w=vn.translate(x.defaultViewport.x??0,x.defaultViewport.y??0).scale(en(x.defaultViewport.zoom??1,x.minZoom,x.maxZoom)),B=e.viewportRef.getBoundingClientRect(),D=[[0,0],[B.width,B.height]],L=e.d3Zoom.constrain()(w,D,x.translateExtent);e.d3Zoom.transform(e.d3Selection,L)}ie(x)},$destroy:()=>{}}}const nv=["data-id","data-handleid","data-nodeid","data-handlepos"],rv={name:"Handle",compatConfig:{MODE:3}},Kt=pe({...rv,props:{id:{default:null},type:{},position:{default:()=>Q.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=Wa(e,["position","connectable","connectableStart","connectableEnd","id"]),r=ye(()=>n.type??"source"),i=ye(()=>n.isValidConnection??null),{connectionStartHandle:o,connectionClickStartHandle:s,connectionEndHandle:a,vueFlowRef:u,nodesConnectable:l,noDragClassName:c,noPanClassName:d}=ve(),{id:h,node:f,nodeEl:p,connectedEdges:g}=ju(),m=de(),y=ye(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),_=ye(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),S=ye(()=>{var O,N,Y,X,v,$;return((O=o.value)==null?void 0:O.nodeId)===h&&((N=o.value)==null?void 0:N.handleId)===e.id&&((Y=o.value)==null?void 0:Y.type)===r.value||((X=a.value)==null?void 0:X.nodeId)===h&&((v=a.value)==null?void 0:v.handleId)===e.id&&(($=a.value)==null?void 0:$.type)===r.value}),E=ye(()=>{var O,N,Y;return((O=s.value)==null?void 0:O.nodeId)===h&&((N=s.value)==null?void 0:N.handleId)===e.id&&((Y=s.value)==null?void 0:Y.type)===r.value}),{handlePointerDown:k,handleClick:I}=Zu({nodeId:h,handleId:e.id,isValidConnection:i,type:r}),T=te(()=>typeof e.connectable=="string"&&e.connectable==="single"?!g.value.some(O=>{const N=O[`${r.value}Handle`];return O[r.value]!==h?!1:N?N===e.id:!0}):typeof e.connectable=="number"?g.value.filter(O=>{const N=O[`${r.value}Handle`];return O[r.value]!==h?!1:N?N===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(f,g.value):Ce(e.connectable)?e.connectable:l.value);dt(()=>{var O;if(!f.dimensions.width||!f.dimensions.height)return;const N=(O=f.handleBounds[r.value])==null?void 0:O.find(A=>A.id===e.id);if(!u.value||N)return;const Y=u.value.querySelector(".vue-flow__transformationpane");if(!p.value||!m.value||!Y||!e.id)return;const X=p.value.getBoundingClientRect(),v=m.value.getBoundingClientRect(),$=window.getComputedStyle(Y),{m22:b}=new window.DOMMatrixReadOnly($.transform),P={id:e.id,position:e.position,x:(v.left-X.left)/b,y:(v.top-X.top)/b,...ri(m.value)};f.handleBounds[r.value]=[...f.handleBounds[r.value]??[],P]}),qa(()=>{const O=f.handleBounds[r.value];O&&(f.handleBounds[r.value]=O.filter(N=>N.id!==e.id))});function z(O){const N=Bo(O);T.value&&y.value&&(N&&O.button===0||!N)&&k(O)}function V(O){!h||!s.value&&!y.value||T.value&&I(O)}return t({handleClick:I,handlePointerDown:k,onClick:V,onPointerDown:z}),(O,N)=>(W(),ne("div",{ref_key:"handle",ref:m,"data-id":`${H(h)}-${e.id}-${r.value}`,"data-handleid":e.id,"data-nodeid":H(h),"data-handlepos":O.position,class:Re(["vue-flow__handle",[`vue-flow__handle-${O.position}`,`vue-flow__handle-${e.id}`,H(c),H(d),r.value,{connectable:T.value,connecting:E.value,connectablestart:y.value,connectableend:_.value,connectionindicator:T.value&&(y.value&&!S.value||_.value&&S.value)}]]),onMousedown:z,onTouchstartPassive:z,onClick:V},[me(O.$slots,"default",{id:O.id})],42,nv))}}),ai=function({sourcePosition:e=Q.Bottom,targetPosition:t=Q.Top,label:n,connectable:r=!0,isValidTargetPos:i,isValidSourcePos:o,data:s}){const a=s.label||n;return[_e(Kt,{type:"target",position:t,connectable:r,isValidConnection:i}),typeof a!="string"&&a?_e(a):_e("div",{innerHTML:a}),_e(Kt,{type:"source",position:e,connectable:r,isValidConnection:o})]};ai.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];ai.inheritAttrs=!1;ai.compatConfig={MODE:3};const iv=ai,ui=function({targetPosition:e=Q.Top,label:t,connectable:n=!0,isValidTargetPos:r,data:i}){const o=i.label||t;return[_e(Kt,{type:"target",position:e,connectable:n,isValidConnection:r}),typeof o!="string"&&o?_e(o):_e("div",{innerHTML:o})]};ui.props=["targetPosition","label","isValidTargetPos","connectable","data"];ui.inheritAttrs=!1;ui.compatConfig={MODE:3};const ov=ui,li=function({sourcePosition:e=Q.Bottom,label:t,connectable:n=!0,isValidSourcePos:r,data:i}){const o=i.label||t;return[typeof o!="string"&&o?_e(o):_e("div",{innerHTML:o}),_e(Kt,{type:"source",position:e,connectable:n,isValidConnection:r})]};li.props=["sourcePosition","label","isValidSourcePos","connectable","data"];li.inheritAttrs=!1;li.compatConfig={MODE:3};const sv=li,av=["transform"],uv=["width","height","x","y","rx","ry"],lv=["y"],cv={name:"EdgeText",compatConfig:{MODE:3}},dv=pe({...cv,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=de({x:0,y:0,width:0,height:0}),n=de(null),r=te(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);dt(i),we([()=>e.x,()=>e.y,n,()=>e.label],i);function i(){if(!n.value)return;const o=n.value.getBBox();(o.width!==t.value.width||o.height!==t.value.height)&&(t.value=o)}return(o,s)=>(W(),ne("g",{transform:r.value,class:"vue-flow__edge-textwrapper"},[o.labelShowBg?(W(),ne("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*o.labelBgPadding[0]}px`,height:`${t.value.height+2*o.labelBgPadding[1]}px`,x:-o.labelBgPadding[0],y:-o.labelBgPadding[1],style:We(o.labelBgStyle),rx:o.labelBgBorderRadius,ry:o.labelBgBorderRadius},null,12,uv)):be("",!0),ce("text",Te(o.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:o.labelStyle}),[me(o.$slots,"default",{},()=>[typeof o.label!="string"?(W(),ke(Pt(o.label),{key:0})):(W(),ne(ze,{key:1},[Yi(Oe(o.label),1)],64))])],16,lv)],8,av))}}),hv=["id","d","marker-end","marker-start"],fv=["d","stroke-width"],pv={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},ci=pe({...pv,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},style:{},labelStyle:{},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=Wa(e,["interactionWidth","labelShowBg"]),r=de(null),i=de(null),o=de(null),s=Mo();return t({pathEl:r,interactionEl:i,labelEl:o}),(a,u)=>(W(),ne(ze,null,[ce("path",{id:a.id,ref_key:"pathEl",ref:r,d:a.path,style:We(n.style),class:Re(["vue-flow__edge-path",H(s).class]),"marker-end":a.markerEnd,"marker-start":a.markerStart},null,14,hv),a.interactionWidth?(W(),ne("path",{key:0,ref_key:"interactionEl",ref:i,fill:"none",d:a.path,"stroke-width":a.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,fv)):be("",!0),a.label&&a.labelX&&a.labelY?(W(),ke(dv,{key:1,ref_key:"labelEl",ref:o,x:a.labelX,y:a.labelY,label:a.label,"label-show-bg":a.labelShowBg,"label-bg-style":a.labelBgStyle,"label-bg-padding":a.labelBgPadding,"label-bg-border-radius":a.labelBgBorderRadius,"label-style":a.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):be("",!0)],64))}});function el({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[o,a,i,s]}function tl({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:s,targetControlY:a}){const u=e*.125+i*.375+s*.375+n*.125,l=t*.125+o*.375+a*.375+r*.125,c=Math.abs(u-e),d=Math.abs(l-t);return[u,l,c,d]}function lr(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Qs({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){let s,a;switch(e){case Q.Left:s=t-lr(t-r,o),a=n;break;case Q.Right:s=t+lr(r-t,o),a=n;break;case Q.Top:s=t,a=n-lr(n-i,o);break;case Q.Bottom:s=t,a=n+lr(i-n,o);break}return[s,a]}function nl(e){const{sourceX:t,sourceY:n,sourcePosition:r=Q.Bottom,targetX:i,targetY:o,targetPosition:s=Q.Top,curvature:a=.25}=e,[u,l]=Qs({pos:r,x1:t,y1:n,x2:i,y2:o,c:a}),[c,d]=Qs({pos:s,x1:i,y1:o,x2:t,y2:n,c:a}),[h,f,p,g]=tl({sourceX:t,sourceY:n,targetX:i,targetY:o,sourceControlX:u,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${t},${n} C${u},${l} ${c},${d} ${i},${o}`,h,f,p,g]}function Js({pos:e,x1:t,y1:n,x2:r,y2:i}){let o,s;switch(e){case Q.Left:case Q.Right:o=.5*(t+r),s=n;break;case Q.Top:case Q.Bottom:o=t,s=.5*(n+i);break}return[o,s]}function rl(e){const{sourceX:t,sourceY:n,sourcePosition:r=Q.Bottom,targetX:i,targetY:o,targetPosition:s=Q.Top}=e,[a,u]=Js({pos:r,x1:t,y1:n,x2:i,y2:o}),[l,c]=Js({pos:s,x1:i,y1:o,x2:t,y2:n}),[d,h,f,p]=tl({sourceX:t,sourceY:n,targetX:i,targetY:o,sourceControlX:a,sourceControlY:u,targetControlX:l,targetControlY:c});return[`M${t},${n} C${a},${u} ${l},${c} ${i},${o}`,d,h,f,p]}const ea={[Q.Left]:{x:-1,y:0},[Q.Right]:{x:1,y:0},[Q.Top]:{x:0,y:-1},[Q.Bottom]:{x:0,y:1}};function gv({source:e,sourcePosition:t=Q.Bottom,target:n}){return t===Q.Left||t===Q.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function ta(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function vv({source:e,sourcePosition:t=Q.Bottom,target:n,targetPosition:r=Q.Top,center:i,offset:o}){const s=ea[t],a=ea[r],u={x:e.x+s.x*o,y:e.y+s.y*o},l={x:n.x+a.x*o,y:n.y+a.y*o},c=gv({source:u,sourcePosition:t,target:l}),d=c.x!==0?"x":"y",h=c[d];let f,p,g;const m={x:0,y:0},y={x:0,y:0},[_,S,E,k]=el({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[d]*a[d]===-1){p=i.x??_,g=i.y??S;const T=[{x:p,y:u.y},{x:p,y:l.y}],z=[{x:u.x,y:g},{x:l.x,y:g}];s[d]===h?f=d==="x"?T:z:f=d==="x"?z:T}else{const T=[{x:u.x,y:l.y}],z=[{x:l.x,y:u.y}];if(d==="x"?f=s.x===h?z:T:f=s.y===h?T:z,t===r){const X=Math.abs(e[d]-n[d]);if(X<=o){const v=Math.min(o-1,o-X);s[d]===h?m[d]=(u[d]>e[d]?-1:1)*v:y[d]=(l[d]>n[d]?-1:1)*v}}if(t!==r){const X=d==="x"?"y":"x",v=s[d]===a[X],$=u[X]>l[X],b=u[X]<l[X];(s[d]===1&&(!v&&$||v&&b)||s[d]!==1&&(!v&&b||v&&$))&&(f=d==="x"?T:z)}const V={x:u.x+m.x,y:u.y+m.y},O={x:l.x+y.x,y:l.y+y.y},N=Math.max(Math.abs(V.x-f[0].x),Math.abs(O.x-f[0].x)),Y=Math.max(Math.abs(V.y-f[0].y),Math.abs(O.y-f[0].y));N>=Y?(p=(V.x+O.x)/2,g=f[0].y):(p=f[0].x,g=(V.y+O.y)/2)}return[[e,{x:u.x+m.x,y:u.y+m.y},...f,{x:l.x+y.x,y:l.y+y.y},n],p,g,E,k]}function mv(e,t,n,r){const i=Math.min(ta(e,t)/2,ta(t,n)/2,r),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return`L${o} ${s}`;if(e.y===s){const l=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${o+i*l},${s}Q ${o},${s} ${o},${s+i*c}`}const a=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${o},${s+i*u}Q ${o},${s} ${o+i*a},${s}`}function ao(e){const{sourceX:t,sourceY:n,sourcePosition:r=Q.Bottom,targetX:i,targetY:o,targetPosition:s=Q.Top,borderRadius:a=5,centerX:u,centerY:l,offset:c=20}=e,[d,h,f,p,g]=vv({source:{x:t,y:n},sourcePosition:r,target:{x:i,y:o},targetPosition:s,center:{x:u,y:l},offset:c});return[d.reduce((y,_,S)=>{let E;return S>0&&S<d.length-1?E=mv(d[S-1],_,d[S+1],a):E=`${S===0?"M":"L"}${_.x} ${_.y}`,y+=E,y},""),h,f,p,g]}function yv(e){const{sourceX:t,sourceY:n,targetX:r,targetY:i}=e,[o,s,a,u]=el({sourceX:t,sourceY:n,targetX:r,targetY:i});return[`M ${t},${n}L ${r},${i}`,o,s,a,u]}const _v=pe({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,r,i]=yv(e);return _e(ci,{path:n,labelX:r,labelY:i,...t,...e})}}}),wv=_v,bv=pe({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,r,i]=ao({...e,sourcePosition:e.sourcePosition??Q.Bottom,targetPosition:e.targetPosition??Q.Top});return _e(ci,{path:n,labelX:r,labelY:i,...t,...e})}}}),il=bv,Ev=pe({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>_e(il,{...e,...t,borderRadius:0})}}),xv=Ev,Sv=pe({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,r,i]=nl({...e,sourcePosition:e.sourcePosition??Q.Bottom,targetPosition:e.targetPosition??Q.Top});return _e(ci,{path:n,labelX:r,labelY:i,...t,...e})}}}),kv=Sv,$v=pe({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,r,i]=rl({...e,sourcePosition:e.sourcePosition??Q.Bottom,targetPosition:e.targetPosition??Q.Top});return _e(ci,{path:n,labelX:r,labelY:i,...t,...e})}}}),Nv=$v,Cv={input:sv,default:iv,output:ov},Mv={default:kv,straight:wv,step:xv,smoothstep:il,simplebezier:Nv};function Iv(e,t,n){const r=te(()=>g=>t.value.get(g)),i=te(()=>g=>n.value.get(g)),o=te(()=>{const g={...Mv,...e.edgeTypes},m=Object.keys(g);for(const y of e.edges)y.type&&!m.includes(y.type)&&(g[y.type]=y.type);return g}),s=te(()=>{const g={...Cv,...e.nodeTypes},m=Object.keys(g);for(const y of e.nodes)y.type&&!m.includes(y.type)&&(g[y.type]=y.type);return g}),a=te(()=>e.onlyRenderVisibleElements?Fu(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),u=te(()=>{if(e.onlyRenderVisibleElements){const g=[];for(const m of e.edges){const y=t.value.get(m.source),_=t.value.get(m.target);Ag({sourcePos:y.computedPosition||{x:0,y:0},targetPos:_.computedPosition||{x:0,y:0},sourceWidth:y.dimensions.width,sourceHeight:y.dimensions.height,targetWidth:_.dimensions.width,targetHeight:_.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&g.push(m)}return g}return e.edges}),l=te(()=>[...a.value,...u.value]),c=te(()=>{const g=[];for(const m of e.nodes)m.selected&&g.push(m);return g}),d=te(()=>{const g=[];for(const m of e.edges)m.selected&&g.push(m);return g}),h=te(()=>[...c.value,...d.value]),f=te(()=>{const g=[];for(const m of e.nodes)m.dimensions.width&&m.dimensions.height&&m.handleBounds!==void 0&&g.push(m);return g}),p=te(()=>a.value.length>0&&f.value.length===a.value.length);return{getNode:r,getEdge:i,getElements:l,getEdgeTypes:o,getNodeTypes:s,getEdges:u,getNodes:a,getSelectedElements:h,getSelectedNodes:c,getSelectedEdges:d,getNodesInitialized:f,areNodesInitialized:p}}class Yt{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=qn())==null?void 0:t.appContext.app,r=(n==null?void 0:n.config.globalProperties.$vueFlowStorage)??Yt.instance;return Yt.instance=r??new Yt,n&&(n.config.globalProperties.$vueFlowStorage=Yt.instance),Yt.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const r=Ju(),i=Qc(r),o={};for(const[h,f]of Object.entries(i.hooks)){const p=`on${h.charAt(0).toUpperCase()+h.slice(1)}`;o[p]=f.on}const s={};for(const[h,f]of Object.entries(i.hooks))s[h]=f.trigger;const a=te(()=>{const h=new Map;for(const f of i.nodes)h.set(f.id,f);return h}),u=te(()=>{const h=new Map;for(const f of i.edges)h.set(f.id,f);return h}),l=Iv(i,a,u),c=tv(i,a,u);c.setState({...i,...n});const d={...o,...l,...c,...Od(i),nodeLookup:a,edgeLookup:u,emits:s,id:t,vueFlowVersion:"1.39.0",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}}function ve(e){const t=Yt.getInstance(),n=Za(),r=typeof e=="object",i=r?e:{id:e},o=i.id,s=(n==null?void 0:n.vueFlowId)||o;let a;if(n){const u=Bt(js,null);typeof u<"u"&&u!==null&&(a=u)}if(a||s&&(a=t.get(s)),!a||a&&o&&o!==a.id){const u=o??t.getId(),l=t.create(u,i);a=l,(n??Ua(!0)).run(()=>{we(l.applyDefault,(d,h,f)=>{const p=m=>{l.applyNodeChanges(m)},g=m=>{l.applyEdgeChanges(m)};d?(l.onNodesChange(p),l.onEdgesChange(g)):(l.hooks.value.nodesChange.off(p),l.hooks.value.edgesChange.off(g)),f(()=>{l.hooks.value.nodesChange.off(p),l.hooks.value.edgesChange.off(g)})},{immediate:!0}),Qr(()=>{if(a){const d=t.get(a.id);d?d.$destroy():oi(`No store instance found for id ${a.id} in storage.`)}})})}else r&&a.setState(i);if(n&&(jt(js,a),n.vueFlowId=a.id),r){const u=qn();(u==null?void 0:u.type.name)!=="VueFlow"&&a.emits.error(new Pe(Me.USEVUEFLOW_OPTIONS))}return a}function Pv(e){const{emits:t,dimensions:n}=ve();let r;dt(()=>{const i=e.value,o=()=>{if(!i)return;const s=ri(i);(s.width===0||s.height===0)&&t.error(new Pe(Me.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:s.width||500,height:s.height||500}};o(),window.addEventListener("resize",o),i&&(r=new ResizeObserver(()=>o()),r.observe(i)),ja(()=>{window.removeEventListener("resize",o),r&&i&&r.unobserve(i)})})}const Av={name:"UserSelection",compatConfig:{MODE:3}},Tv=pe({...Av,props:{userSelectionRect:{}},setup(e){return(t,n)=>(W(),ne("div",{class:"vue-flow__selection vue-flow__container",style:We({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),Ov=["tabIndex"],zv={name:"NodesSelection",compatConfig:{MODE:3}},Dv=pe({...zv,setup(e){const{emits:t,viewport:n,getSelectedNodes:r,noPanClassName:i,disableKeyboardA11y:o,userSelectionActive:s}=ve(),a=Qu(),u=de(null),l=Ku({el:u,onStart(p){t.selectionDragStart(p)},onDrag(p){t.selectionDrag(p)},onStop(p){t.selectionDragStop(p)}});dt(()=>{var p;o.value||(p=u.value)==null||p.focus({preventScroll:!0})});const c=te(()=>ii(r.value)),d=te(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function h(p){t.selectionContextMenu({event:p,nodes:r.value})}function f(p){o||dn[p.key]&&a({x:dn[p.key].x,y:dn[p.key].y},p.shiftKey)}return(p,g)=>!H(s)&&c.value.width&&c.value.height?(W(),ne("div",{key:0,class:Re(["vue-flow__nodesselection vue-flow__container",H(i)]),style:We({transform:`translate(${H(n).x}px,${H(n).y}px) scale(${H(n).zoom})`})},[ce("div",{ref_key:"el",ref:u,class:Re([{dragging:H(l)},"vue-flow__nodesselection-rect"]),style:We(d.value),tabIndex:H(o)?void 0:-1,onContextmenu:h,onKeydown:f},null,46,Ov)],6)):be("",!0)}});function Lv(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Rv={name:"Pane",compatConfig:{MODE:3}},Bv=pe({...Rv,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:r,emits:i,userSelectionActive:o,removeSelectedElements:s,panOnDrag:a,userSelectionRect:u,elementsSelectable:l,nodesSelectionActive:c,getSelectedEdges:d,getSelectedNodes:h,removeNodes:f,removeEdges:p,selectionMode:g,deleteKeyCode:m,multiSelectionKeyCode:y,multiSelectionActive:_,edgeLookup:S,nodeLookup:E}=ve(),k=de(null),I=de(0),T=de(0),z=de(),V=de(new Map),O=ye(()=>l.value&&(e.isSelecting||o.value));let N=!1,Y=!1;const X=zn(m,{actInsideInputWithModifier:!1}),v=zn(y);we(X,F=>{F&&(f(h.value),p(d.value),c.value=!1)}),we(v,F=>{_.value=F});function $(F,G){return q=>{q.target===G&&(F==null||F(q))}}function b(){o.value=!1,u.value=null,I.value=0,T.value=0}function P(F){if(N){N=!1;return}i.paneClick(F),s(),c.value=!1}function A(F){var G;if(Array.isArray(a.value)&&((G=a.value)!=null&&G.includes(2))){F.preventDefault();return}i.paneContextMenu(F)}function C(F){i.paneScroll(F)}function M(F){var G,q,oe,re,se;if(z.value=(G=t.value)==null?void 0:G.getBoundingClientRect(),(oe=(q=F.target)==null?void 0:q.setPointerCapture)==null||oe.call(q,F.pointerId),!l.value||!e.isSelecting||F.button!==0||F.target!==k.value||!z.value)return;const{x:ie,y:ue}=Lv(F,z.value);Y=!0,N=!1,V.value=new Map;for(const[J,ee]of S.value)V.value.set(ee.source,((re=V.value.get(ee.source))==null?void 0:re.add(J))||new Set([J])),V.value.set(ee.target,((se=V.value.get(ee.target))==null?void 0:se.add(J))||new Set([J]));s(),u.value={width:0,height:0,startX:ie,startY:ue,x:ie,y:ue},o.value=!0,c.value=!1,i.selectionStart(F)}function R(F){if(!z.value||!u.value)return;N=!0;const{x:G,y:q}=Dt(F,z.value),{startX:oe=0,startY:re=0}=u.value,se={startX:oe,startY:re,x:G<oe?G:oe,y:q<re?q:re,width:Math.abs(G-oe),height:Math.abs(q-re)},ie=Fu(n.value,se,r.value,g.value===Lo.Partial,!0),ue=new Set,J=new Set;for(const ee of ie){J.add(ee.id);const x=V.value.get(ee.id);if(x)for(const w of x)ue.add(w)}if(I.value!==J.size){I.value=J.size;const ee=Mt(E.value,J,!0);i.nodesChange(ee)}if(T.value!==ue.size){T.value=ue.size;const ee=Mt(S.value,ue);i.edgesChange(ee)}u.value=se,o.value=!0,c.value=!1}function U(F){var G;F.button!==0||!Y||((G=F.target)==null||G.releasePointerCapture(F.pointerId),!o.value&&u.value&&F.target===k.value&&P(F),I.value>0&&(c.value=!0),b(),i.selectionEnd(F),e.selectionKeyPressed&&(N=!1),Y=!1)}return(F,G)=>(W(),ne("div",{ref_key:"container",ref:k,class:Re(["vue-flow__pane vue-flow__container",{selection:F.isSelecting}]),onClick:G[0]||(G[0]=q=>O.value?void 0:$(P,k.value)(q)),onContextmenu:G[1]||(G[1]=q=>$(A,k.value)(q)),onWheelPassive:G[2]||(G[2]=q=>$(C,k.value)(q)),onPointerenter:G[3]||(G[3]=q=>O.value?void 0:H(i).paneMouseEnter(q)),onPointerdown:G[4]||(G[4]=q=>O.value?M(q):H(i).paneMouseMove(q)),onPointermove:G[5]||(G[5]=q=>O.value?R(q):H(i).paneMouseMove(q)),onPointerup:G[6]||(G[6]=q=>O.value?U(q):void 0),onPointerleave:G[7]||(G[7]=q=>H(i).paneMouseLeave(q))},[me(F.$slots,"default"),H(o)&&H(u)?(W(),ke(Tv,{key:0,"user-selection-rect":H(u)},null,8,["user-selection-rect"])):be("",!0),H(c)&&H(h).length?(W(),ke(Dv,{key:1})):be("",!0)],34))}}),Vv={name:"Transform",compatConfig:{MODE:3}},Gv=pe({...Vv,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:r}=ve(),i=te(()=>n.value?!r.value:!1),o=te(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(s,a)=>(W(),ne("div",{class:"vue-flow__transformationpane vue-flow__container",style:We({transform:o.value,opacity:i.value?0:void 0})},[me(s.$slots,"default")],4))}}),Fv={name:"Viewport",compatConfig:{MODE:3}},Hv=pe({...Fv,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:r,translateExtent:i,zoomActivationKeyCode:o,selectionKeyCode:s,panActivationKeyCode:a,panOnScroll:u,panOnScrollMode:l,panOnScrollSpeed:c,panOnDrag:d,zoomOnDoubleClick:h,zoomOnPinch:f,zoomOnScroll:p,preventScrolling:g,noWheelClassName:m,noPanClassName:y,emits:_,connectionStartHandle:S,userSelectionActive:E,paneDragging:k,d3Zoom:I,d3Selection:T,d3ZoomHandler:z,viewport:V,viewportRef:O,paneClickDistance:N}=ve();Pv(O);const Y=de(!1),X=de(!1);let v=null,$=!1,b=0,P={x:0,y:0,zoom:0};const A=zn(a),C=zn(s),M=zn(o),R=ye(()=>A.value||d.value),U=ye(()=>A.value||u.value),F=ye(()=>C.value||s.value===!0&&R.value!==!0);dt(()=>{if(!O.value){oi("Viewport element is missing");return}const ie=O.value,ue=ie.getBoundingClientRect(),J=vg().clickDistance(N.value).scaleExtent([t.value,n.value]).translateExtent(i.value),ee=Ze(ie).call(J),x=ee.on("wheel.zoom"),w=vn.translate(r.value.x??0,r.value.y??0).scale(en(r.value.zoom??1,t.value,n.value)),B=[[0,0],[ue.width,ue.height]],D=J.constrain()(w,B,i.value);J.transform(ee,D),J.wheelDelta(q),I.value=J,T.value=ee,z.value=x,V.value={x:D.x,y:D.y,zoom:D.k},J.on("start",L=>{var K;if(!L.sourceEvent)return null;b=L.sourceEvent.button,Y.value=!0;const j=re(L.transform);((K=L.sourceEvent)==null?void 0:K.type)==="mousedown"&&(k.value=!0),P=j,_.viewportChangeStart(j),_.moveStart({event:L,flowTransform:j})}),J.on("end",L=>{if(!L.sourceEvent)return null;if(Y.value=!1,k.value=!1,G(R.value,b??0)&&!$&&_.paneContextMenu(L.sourceEvent),$=!1,oe(P,L.transform)){const K=re(L.transform);P=K,_.viewportChangeEnd(K),_.moveEnd({event:L,flowTransform:K})}}),J.filter(L=>{var K,j,ae;const le=M.value||p.value,Ee=f.value&&L.ctrlKey,fe=L.button;if((R.value===!0||Array.isArray(R.value)&&R.value.includes(1))&&fe===1&&L.type==="mousedown"&&((K=L.target)!=null&&K.closest(".vue-flow__node")||(j=L.target)!=null&&j.closest(".vue-flow__edge")))return!0;if(!R.value&&!le&&!U.value&&!h.value&&!f.value||E.value||!h.value&&L.type==="dblclick"||se(L,m.value)&&L.type==="wheel"||se(L,y.value)&&(L.type!=="wheel"||U.value&&L.type==="wheel"&&!M.value)||!f.value&&L.ctrlKey&&L.type==="wheel"||!le&&!U.value&&!Ee&&L.type==="wheel")return!1;if(!f&&L.type==="touchstart"&&((ae=L.touches)==null?void 0:ae.length)>1)return L.preventDefault(),!1;if(!R.value&&(L.type==="mousedown"||L.type==="touchstart")||Array.isArray(R.value)&&!R.value.includes(fe)&&(L.type==="mousedown"||L.type==="touchstart"))return!1;const xe=Array.isArray(R.value)&&R.value.includes(fe)||!fe||fe<=1;return(!L.ctrlKey||L.type==="wheel")&&xe}),we([E,R],()=>{E.value&&!Y.value?J.on("zoom",null):E.value||J.on("zoom",L=>{V.value={x:L.transform.x,y:L.transform.y,zoom:L.transform.k};const K=re(L.transform);$=G(R.value,b??0),_.viewportChange(K),_.move({event:L,flowTransform:K})})},{immediate:!0}),we([E,U,l,M,f,g,m],()=>{U.value&&!M.value&&!E.value?ee.on("wheel.zoom",L=>{if(se(L,m.value))return!1;const K=M.value||p.value,j=f.value&&L.ctrlKey;if(!(!g.value||U.value||K||j))return!1;L.preventDefault(),L.stopImmediatePropagation();const le=ee.property("__zoom").k||1,Ee=Vr();if(L.ctrlKey&&f.value&&Ee){const Fc=ot(L),Hc=q(L),Yc=le*2**Hc;J.scaleTo(ee,Yc,Fc,L);return}const fe=L.deltaMode===1?20:1;let xe=l.value===On.Vertical?0:L.deltaX*fe,St=l.value===On.Horizontal?0:L.deltaY*fe;!Ee&&L.shiftKey&&l.value!==On.Vertical&&!xe&&St&&(xe=St,St=0),J.translateBy(ee,-(xe/le)*c.value,-(St/le)*c.value);const sn=re(ee.property("__zoom"));v&&clearTimeout(v),X.value?(_.move({event:L,flowTransform:sn}),_.viewportChange(sn),v=setTimeout(()=>{_.moveEnd({event:L,flowTransform:sn}),_.viewportChangeEnd(sn),X.value=!1},150)):(X.value=!0,_.moveStart({event:L,flowTransform:sn}),_.viewportChangeStart(sn))},{passive:!1}):typeof x<"u"&&ee.on("wheel.zoom",function(L,K){const j=!g.value&&L.type==="wheel"&&!L.ctrlKey,ae=M.value||p.value,le=f.value&&L.ctrlKey;if(!ae&&!u.value&&!le&&L.type==="wheel"||j||se(L,m.value))return null;L.preventDefault(),x.call(this,L,K)},{passive:!1})},{immediate:!0})});function G(ie,ue){return ue===2&&Array.isArray(ie)&&ie.includes(2)}function q(ie){const ue=ie.ctrlKey&&Vr()?10:1;return-ie.deltaY*(ie.deltaMode===1?.05:ie.deltaMode?1:.002)*ue}function oe(ie,ue){return ie.x!==ue.x&&!Number.isNaN(ue.x)||ie.y!==ue.y&&!Number.isNaN(ue.y)||ie.zoom!==ue.k&&!Number.isNaN(ue.k)}function re(ie){return{x:ie.x,y:ie.y,zoom:ie.k}}function se(ie,ue){return ie.target.closest(`.${ue}`)}return(ie,ue)=>(W(),ne("div",{ref_key:"viewportRef",ref:O,class:"vue-flow__viewport vue-flow__container"},[he(Bv,{"is-selecting":F.value,"selection-key-pressed":H(C),class:Re({connecting:!!H(S),dragging:H(k),draggable:R.value})},{default:$e(()=>[he(Gv,null,{default:$e(()=>[me(ie.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),Yv=["id"],Xv=["id"],Uv=["id"],Wv={name:"A11yDescriptions",compatConfig:{MODE:3}},qv=pe({...Wv,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:r}=ve();return(i,o)=>(W(),ne(ze,null,[ce("div",{id:`${H(Au)}-${H(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+Oe(H(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Yv),ce("div",{id:`${H(Tu)}-${H(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,Xv),H(n)?be("",!0):(W(),ne("div",{key:0,id:`${H(wg)}-${H(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},Oe(H(r)),9,Uv))],64))}});function Kv(){const e=ve();we(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function Zv(e,t,n){return n===Q.Left?e-t:n===Q.Right?e+t:e}function jv(e,t,n){return n===Q.Top?e-t:n===Q.Bottom?e+t:e}const Fo=function({radius:e=10,centerX:t=0,centerY:n=0,position:r=Q.Top,type:i}){return _e("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${i}`,cx:Zv(t,e,r),cy:jv(n,e,r),r:e,stroke:"transparent",fill:"transparent"})};Fo.props=["radius","centerX","centerY","position","type"];Fo.compatConfig={MODE:3};const na=Fo,Qv=pe({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:r,edgeUpdaterRadius:i,emits:o,nodesSelectionActive:s,noPanClassName:a,getEdgeTypes:u,removeSelectedEdges:l,findEdge:c,findNode:d,isValidConnection:h,multiSelectionActive:f,disableKeyboardA11y:p,elementsSelectable:g,edgesUpdatable:m,edgesFocusable:y}=ve(),_=te(()=>c(e.id)),S=Yg(_.value,o),E=Bt(si),k=qn(),I=de(!1),T=de(!1),z=de(""),V=de(null),O=de("source"),N=de(null),Y=ye(()=>typeof _.value.selectable>"u"?g.value:_.value.selectable),X=ye(()=>typeof _.value.updatable>"u"?m.value:_.value.updatable),v=ye(()=>typeof _.value.focusable>"u"?y.value:_.value.focusable);jt(Gg,e.id),jt(Fg,N);const $=te(()=>_.value.class instanceof Function?_.value.class(_.value):_.value.class),b=te(()=>_.value.style instanceof Function?_.value.style(_.value):_.value.style),P=te(()=>{const x=_.value.type||"default",w=E==null?void 0:E[`edge-${x}`];if(w)return w;let B=_.value.template??u.value[x];if(typeof B=="string"&&k){const D=Object.keys(k.appContext.components);D&&D.includes(x)&&(B=Qa(x,!1))}return B&&typeof B!="string"?B:(o.error(new Pe(Me.EDGE_TYPE_MISSING,B)),!1)}),{handlePointerDown:A}=Zu({nodeId:z,handleId:V,type:O,isValidConnection:h,edgeUpdaterType:O,onEdgeUpdate:R,onEdgeUpdateEnd:U});return()=>{const x=d(_.value.source),w=d(_.value.target),B="pathOptions"in _.value?_.value.pathOptions:{};if(!x&&!w)return o.error(new Pe(Me.EDGE_SOURCE_TARGET_MISSING,_.value.id,_.value.source,_.value.target)),null;if(!x)return o.error(new Pe(Me.EDGE_SOURCE_MISSING,_.value.id,_.value.source)),null;if(!w)return o.error(new Pe(Me.EDGE_TARGET_MISSING,_.value.id,_.value.target)),null;if(!_.value||_.value.hidden||x.hidden||w.hidden)return null;let D;r.value===Jt.Strict?D=x.handleBounds.source:D=[...x.handleBounds.source||[],...x.handleBounds.target||[]];const L=Hs(D,_.value.sourceHandle);let K;r.value===Jt.Strict?K=w.handleBounds.target:K=[...w.handleBounds.target||[],...w.handleBounds.source||[]];const j=Hs(K,_.value.targetHandle),ae=(L==null?void 0:L.position)||Q.Bottom,le=(j==null?void 0:j.position)||Q.Top,{x:Ee,y:fe}=Br(x,L,ae),{x:xe,y:St}=Br(w,j,le);return _.value.sourceX=Ee,_.value.sourceY=fe,_.value.targetX=xe,_.value.targetY=St,_e("g",{ref:N,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${P.value===!1?"default":_.value.type||"default"}`,a.value,$.value,{updating:I.value,selected:_.value.selected,animated:_.value.animated,inactive:!Y.value}],onClick:G,onContextmenu:q,onDblclick:oe,onMouseenter:re,onMousemove:se,onMouseleave:ie,onKeyDown:v.value?ee:void 0,tabIndex:v.value?0:void 0,"aria-label":_.value.ariaLabel===null?void 0:_.value.ariaLabel||`Edge from ${_.value.source} to ${_.value.target}`,"aria-describedby":v.value?`${Tu}-${t}`:void 0,role:v.value?"button":"img"},[T.value?null:_e(P.value===!1?u.value.default:P.value,{id:e.id,sourceNode:x,targetNode:w,source:_.value.source,target:_.value.target,type:_.value.type,updatable:X.value,selected:_.value.selected,animated:_.value.animated,label:_.value.label,labelStyle:_.value.labelStyle,labelShowBg:_.value.labelShowBg,labelBgStyle:_.value.labelBgStyle,labelBgPadding:_.value.labelBgPadding,labelBgBorderRadius:_.value.labelBgBorderRadius,data:_.value.data,events:{..._.value.events,...S.on},style:b.value,markerStart:`url('#${Fn(_.value.markerStart,t)}')`,markerEnd:`url('#${Fn(_.value.markerEnd,t)}')`,sourcePosition:ae,targetPosition:le,sourceX:Ee,sourceY:fe,targetX:xe,targetY:St,sourceHandleId:_.value.sourceHandle,targetHandleId:_.value.targetHandle,interactionWidth:_.value.interactionWidth,...B}),[X.value==="source"||X.value===!0?[_e("g",{onMousedown:ue,onMouseenter:C,onMouseout:M},_e(na,{position:ae,centerX:Ee,centerY:fe,radius:i.value,type:"source","data-type":"source"}))]:null,X.value==="target"||X.value===!0?[_e("g",{onMousedown:J,onMouseenter:C,onMouseout:M},_e(na,{position:le,centerX:xe,centerY:St,radius:i.value,type:"target","data-type":"target"}))]:null]])};function C(){I.value=!0}function M(){I.value=!1}function R(x,w){S.emit.update({event:x,edge:_.value,connection:w})}function U(x){S.emit.updateEnd({event:x,edge:_.value}),T.value=!1}function F(x,w){x.button===0&&(T.value=!0,z.value=w?_.value.target:_.value.source,V.value=(w?_.value.targetHandle:_.value.sourceHandle)??"",O.value=w?"target":"source",S.emit.updateStart({event:x,edge:_.value}),A(x))}function G(x){var w;const B={event:x,edge:_.value};Y.value&&(s.value=!1,_.value.selected&&f.value?(l([_.value]),(w=N.value)==null||w.blur()):n([_.value])),S.emit.click(B)}function q(x){S.emit.contextMenu({event:x,edge:_.value})}function oe(x){S.emit.doubleClick({event:x,edge:_.value})}function re(x){S.emit.mouseEnter({event:x,edge:_.value})}function se(x){S.emit.mouseMove({event:x,edge:_.value})}function ie(x){S.emit.mouseLeave({event:x,edge:_.value})}function ue(x){F(x,!0)}function J(x){F(x,!1)}function ee(x){var w;!p.value&&Ou.includes(x.key)&&Y.value&&(x.key==="Escape"?((w=N.value)==null||w.blur(),l([c(e.id)])):n([c(e.id)]))}}}),Jv=Qv,em={[Q.Left]:Q.Right,[Q.Right]:Q.Left,[Q.Top]:Q.Bottom,[Q.Bottom]:Q.Top},tm=pe({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:r,connectionEndHandle:i,connectionPosition:o,connectionLineType:s,connectionLineStyle:a,connectionLineOptions:u,connectionStatus:l,viewport:c,findNode:d}=ve(),h=(e=Bt(si))==null?void 0:e["connection-line"],f=te(()=>{var _;return d((_=r.value)==null?void 0:_.nodeId)}),p=te(()=>{var _;return d((_=i.value)==null?void 0:_.nodeId)??null}),g=te(()=>({x:(o.value.x-c.value.x)/c.value.zoom,y:(o.value.y-c.value.y)/c.value.zoom})),m=te(()=>u.value.markerStart?`url(#${Fn(u.value.markerStart,t)})`:""),y=te(()=>u.value.markerEnd?`url(#${Fn(u.value.markerEnd,t)})`:"");return()=>{var _,S,E,k;if(!f.value||!r.value)return null;const I=r.value.handleId,T=r.value.type,z=f.value.handleBounds;let V=z==null?void 0:z[T];if(n.value===Jt.Loose&&(V=V||(z==null?void 0:z[T==="source"?"target":"source"])),!V)return null;const O=(I?V.find(C=>C.id===I):V[0])??null,N=(O==null?void 0:O.position)||Q.Top,{x:Y,y:X}=Br(f.value,O,N);let v=null;p.value&&((_=i.value)!=null&&_.handleId)&&(n.value===Jt.Strict?v=((S=p.value.handleBounds[T==="source"?"target":"source"])==null?void 0:S.find(C=>{var M;return C.id===((M=i.value)==null?void 0:M.handleId)}))||null:v=((E=[...p.value.handleBounds.source||[],...p.value.handleBounds.target||[]])==null?void 0:E.find(C=>{var M;return C.id===((M=i.value)==null?void 0:M.handleId)}))||null);const $=((k=i.value)==null?void 0:k.position)??(N?em[N]:null);if(!N||!$)return null;const b=s.value??u.value.type??Ft.Bezier;let P="";const A={sourceX:Y,sourceY:X,sourcePosition:N,targetX:g.value.x,targetY:g.value.y,targetPosition:$};return b===Ft.Bezier?[P]=nl(A):b===Ft.Step?[P]=ao({...A,borderRadius:0}):b===Ft.SmoothStep?[P]=ao(A):b===Ft.SimpleBezier?[P]=rl(A):P=`M${Y},${X} ${g.value.x},${g.value.y}`,_e("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},_e("g",{class:"vue-flow__connection"},h?_e(h,{sourceX:Y,sourceY:X,sourcePosition:N,targetX:g.value.x,targetY:g.value.y,targetPosition:$,sourceNode:f.value,sourceHandle:O,targetNode:p.value,targetHandle:v,markerEnd:y.value,markerStart:m.value,connectionStatus:l.value}):_e("path",{d:P,class:[u.value.class,l,"vue-flow__connection-path"],style:{...a.value,...u.value.style},"marker-end":y.value,"marker-start":m.value})))}}}),nm=tm,rm=["id","markerWidth","markerHeight","markerUnits","orient"],im={name:"MarkerType",compatConfig:{MODE:3}},om=pe({...im,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(W(),ne("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===H(Dr).ArrowClosed?(W(),ne("polyline",{key:0,style:We({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):be("",!0),t.type===H(Dr).Arrow?(W(),ne("polyline",{key:1,style:We({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):be("",!0)],8,rm))}}),sm={class:"vue-flow__marker vue-flow__container"},am={name:"MarkerDefinitions",compatConfig:{MODE:3}},um=pe({...am,setup(e){const{id:t,edges:n,connectionLineOptions:r,defaultMarkerColor:i}=ve(),o=te(()=>{const s=new Set,a=[],u=l=>{if(l){const c=Fn(l,t);s.has(c)||(typeof l=="object"?a.push({...l,id:c,color:l.color||i.value}):a.push({id:c,color:i.value,type:l}),s.add(c))}};for(const l of[r.value.markerEnd,r.value.markerStart])u(l);for(const l of n.value)for(const c of[l.markerStart,l.markerEnd])u(c);return a.sort((l,c)=>l.id.localeCompare(c.id))});return(s,a)=>(W(),ne("svg",sm,[ce("defs",null,[(W(!0),ne(ze,null,zt(o.value,u=>(W(),ke(om,{id:u.id,key:u.id,type:u.type,color:u.color,width:u.width,height:u.height,markerUnits:u.markerUnits,"stroke-width":u.strokeWidth,orient:u.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),lm={name:"Edges",compatConfig:{MODE:3}},cm=pe({...lm,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:r}=ve();return(i,o)=>(W(),ne(ze,null,[he(um),(W(!0),ne(ze,null,zt(H(n),s=>(W(),ne("svg",{key:s.id,class:"vue-flow__edges vue-flow__container",style:We({zIndex:H(Tg)(s,H(t),H(r))})},[he(H(Jv),{id:s.id},null,8,["id"])],4))),128)),he(H(nm))],64))}}),dm=pe({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:r,nodesSelectionActive:i,multiSelectionActive:o,emits:s,removeSelectedNodes:a,addSelectedNodes:u,updateNodeDimensions:l,onUpdateNodeInternals:c,getNodeTypes:d,nodeExtent:h,elevateNodesOnSelect:f,disableKeyboardA11y:p,ariaLiveMessage:g,snapToGrid:m,snapGrid:y,nodeDragThreshold:_,nodesDraggable:S,elementsSelectable:E,nodesConnectable:k,nodesFocusable:I}=ve(),T=de(null);jt(qu,T),jt(Go,e.id);const z=Bt(si),V=qn(),O=Qu(),{node:N,parentNode:Y}=ju(e.id),X=ye(()=>typeof N.draggable>"u"?S.value:N.draggable),v=ye(()=>typeof N.selectable>"u"?E.value:N.selectable),$=ye(()=>typeof N.connectable>"u"?k.value:N.connectable),b=ye(()=>typeof N.focusable>"u"?I.value:N.focusable),P=ye(()=>!!N.dimensions.width&&!!N.dimensions.height),A=te(()=>{const w=N.type||"default",B=z==null?void 0:z[`node-${w}`];if(B)return B;let D=N.template||d.value[w];if(typeof D=="string"&&V){const L=Object.keys(V.appContext.components);L&&L.includes(w)&&(D=Qa(w,!1))}return D&&typeof D!="string"?D:(s.error(new Pe(Me.NODE_TYPE_MISSING,D)),!1)}),{emit:C,on:M}=qg(N,s),R=Ku({id:e.id,el:T,disabled:()=>!X.value,selectable:v,dragHandle:()=>N.dragHandle,onStart(w){C.dragStart(w)},onDrag(w){C.drag(w)},onStop(w){C.dragStop(w)},onClick(w){ee(w)}}),U=te(()=>N.class instanceof Function?N.class(N):N.class),F=te(()=>{const w=(N.style instanceof Function?N.style(N):N.style)||{},B=N.width instanceof Function?N.width(N):N.width,D=N.height instanceof Function?N.height(N):N.height;return B&&(w.width=typeof B=="string"?B:`${B}px`),D&&(w.height=typeof D=="string"?D:`${D}px`),w}),G=ye(()=>Number(N.zIndex??F.value.zIndex??0));return c(w=>{(w.includes(e.id)||!w.length)&&oe()}),dt(()=>{we(()=>N.hidden,(w=!1,B,D)=>{!w&&T.value&&(e.resizeObserver.observe(T.value),D(()=>{T.value&&e.resizeObserver.unobserve(T.value)}))},{immediate:!0,flush:"post"})}),we([()=>N.type,()=>N.sourcePosition,()=>N.targetPosition],()=>{ut(()=>{l([{id:e.id,nodeElement:T.value,forceUpdate:!0}])})}),we([()=>N.position.x,()=>N.position.y,()=>{var w;return(w=Y.value)==null?void 0:w.computedPosition.x},()=>{var w;return(w=Y.value)==null?void 0:w.computedPosition.y},()=>{var w;return(w=Y.value)==null?void 0:w.computedPosition.z},G,()=>N.selected,()=>N.dimensions.height,()=>N.dimensions.width,()=>{var w;return(w=Y.value)==null?void 0:w.dimensions.height},()=>{var w;return(w=Y.value)==null?void 0:w.dimensions.width}],([w,B,D,L,K,j])=>{const ae={x:w,y:B,z:j+(f.value&&N.selected?1e3:0)};typeof D<"u"&&typeof L<"u"?N.computedPosition=Ng({x:D,y:L,z:K},ae):N.computedPosition=ae},{flush:"post",immediate:!0}),we([()=>N.extent,h],([w,B],[D,L])=>{(w!==D||B!==L)&&q()}),N.extent==="parent"||typeof N.extent=="object"&&"range"in N.extent&&N.extent.range==="parent"?qi(()=>P).toBe(!0).then(q):q(),()=>N.hidden?null:_e("div",{ref:T,"data-id":N.id,class:["vue-flow__node",`vue-flow__node-${A.value===!1?"default":N.type||"default"}`,{[n.value]:X.value,dragging:R==null?void 0:R.value,draggable:X.value,selected:N.selected,selectable:v.value,parent:N.isParent},U.value],style:{visibility:P.value?"visible":"hidden",zIndex:N.computedPosition.z??G.value,transform:`translate(${N.computedPosition.x}px,${N.computedPosition.y}px)`,pointerEvents:v.value||X.value?"all":"none",...F.value},tabIndex:b.value?0:void 0,role:b.value?"button":void 0,"aria-describedby":p.value?void 0:`${Au}-${t}`,"aria-label":N.ariaLabel,onMouseenter:re,onMousemove:se,onMouseleave:ie,onContextmenu:ue,onClick:ee,onDblclick:J,onKeydown:x},[_e(A.value===!1?d.value.default:A.value,{id:N.id,type:N.type,data:N.data,events:{...N.events,...M},selected:N.selected,resizing:N.resizing,dragging:R.value,connectable:$.value,position:N.computedPosition,dimensions:N.dimensions,isValidTargetPos:N.isValidTargetPos,isValidSourcePos:N.isValidSourcePos,parent:N.parentNode,parentNodeId:N.parentNode,zIndex:N.computedPosition.z??G.value,targetPosition:N.targetPosition,sourcePosition:N.sourcePosition,label:N.label,dragHandle:N.dragHandle,onUpdateNodeInternals:oe})]);function q(){const w=N.computedPosition;m.value&&(w.x=y.value[0]*Math.round(w.x/y.value[0]),w.y=y.value[1]*Math.round(w.y/y.value[1]));const{computedPosition:B,position:D}=Ro(N,w,s.error,h.value,Y.value);(N.computedPosition.x!==B.x||N.computedPosition.y!==B.y)&&(N.computedPosition={...N.computedPosition,...B}),(N.position.x!==D.x||N.position.y!==D.y)&&(N.position=D)}function oe(){T.value&&l([{id:e.id,nodeElement:T.value,forceUpdate:!0}])}function re(w){R!=null&&R.value||C.mouseEnter({event:w,node:N})}function se(w){R!=null&&R.value||C.mouseMove({event:w,node:N})}function ie(w){R!=null&&R.value||C.mouseLeave({event:w,node:N})}function ue(w){return C.contextMenu({event:w,node:N})}function J(w){return C.doubleClick({event:w,node:N})}function ee(w){v.value&&(!r.value||!X.value||_.value>0)&&so(N,o.value,u,a,i,!1,T.value),C.click({event:w,node:N})}function x(w){if(!(ro(w)||p.value))if(Ou.includes(w.key)&&v.value){const B=w.key==="Escape";so(N,o.value,u,a,i,B,T.value)}else X.value&&N.selected&&dn[w.key]&&(g.value=`Moved selected node ${w.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~N.position.x}, y: ${~~N.position.y}`,O({x:dn[w.key].x,y:dn[w.key].y},w.shiftKey))}}}),hm=dm;function fm(e={includeHiddenNodes:!1}){const{nodes:t}=ve();return te(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&((n==null?void 0:n.handleBounds)===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const pm={class:"vue-flow__nodes vue-flow__container"},gm={name:"Nodes",compatConfig:{MODE:3}},vm=pe({...gm,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:r}=ve(),i=fm(),o=de();return we(i,s=>{s&&ut(()=>{r.nodesInitialized(t.value)})},{immediate:!0}),dt(()=>{o.value=new ResizeObserver(s=>{const a=s.map(u=>({id:u.target.getAttribute("data-id"),nodeElement:u.target,forceUpdate:!0}));ut(()=>n(a))})}),ja(()=>{var s;return(s=o.value)==null?void 0:s.disconnect()}),(s,a)=>(W(),ne("div",pm,[o.value?(W(!0),ne(ze,{key:0},zt(H(t),(u,l,c,d)=>{const h=[u.id];if(d&&d.key===u.id&&nd(d,h))return d;const f=(W(),ke(H(hm),{id:u.id,key:u.id,"resize-observer":o.value},null,8,["id","resize-observer"]));return f.memo=h,f},a,0),128)):be("",!0)]))}});function mm(){const{emits:e}=ve();dt(()=>{if(Wu()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new Pe(Me.MISSING_STYLES))}})}const ym=ce("div",{class:"vue-flow__edge-labels"},null,-1),_m={name:"VueFlow",compatConfig:{MODE:3}},wm=pe({..._m,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneReady","init","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","updateNodeInternals","error","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdate","edgeUpdateEnd","nodeDoubleClick","nodeClick","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeContextMenu","nodeDragStart","nodeDrag","nodeDragStop","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const r=e,i=Ka(),o=bi(r,"modelValue",n),s=bi(r,"nodes",n),a=bi(r,"edges",n),u=ve(r),l=jg({modelValue:o,nodes:s,edges:a},r,u);return Jg(n,u.hooks),Kv(),mm(),jt(si,i),qa(()=>{l()}),t(u),(c,d)=>(W(),ne("div",{ref:H(u).vueFlowRef,class:"vue-flow"},[he(Hv,null,{default:$e(()=>[he(cm),ym,he(vm),me(c.$slots,"zoom-pane")]),_:3}),me(c.$slots,"default"),he(qv)],512))}}),bm={name:"Panel",compatConfig:{MODE:3}},ol=pe({...bm,props:{position:{}},setup(e){const t=e,{userSelectionActive:n}=ve(),r=te(()=>`${t.position}`.split("-"));return(i,o)=>(W(),ne("div",{class:Re(["vue-flow__panel",r.value]),style:We({pointerEvents:H(n)?"none":"all"})},[me(i.$slots,"default")],6))}});var at=(e=>(e.Lines="lines",e.Dots="dots",e))(at||{});const sl=function({dimensions:e,size:t,color:n}){return _e("path",{stroke:n,"stroke-width":t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})},al=function({radius:e,color:t}){return _e("circle",{cx:e,cy:e,r:e,fill:t})};at.Lines+"",at.Dots+"";const Em={[at.Dots]:"#81818a",[at.Lines]:"#eee"},xm=["id","x","y","width","height","patternTransform"],Sm={key:2,height:"100",width:"100"},km=["fill"],$m=["x","y","fill"],Nm={name:"Background",compatConfig:{MODE:3}},Cm=pe({...Nm,props:{id:{},variant:{default:()=>at.Dots},gap:{default:20},size:{default:1},lineWidth:{default:1},patternColor:{},color:{},bgColor:{},height:{default:100},width:{default:100},x:{default:0},y:{default:0},offset:{default:2}},setup(e){const{id:t,viewport:n}=ve(),r=te(()=>{const[s,a]=Array.isArray(e.gap)?e.gap:[e.gap,e.gap],u=[s*n.value.zoom||1,a*n.value.zoom||1],l=e.size*n.value.zoom,c=e.variant===at.Dots?[l/e.offset,l/e.offset]:[u[0]/e.offset,u[1]/e.offset];return{scaledGap:u,offset:c,size:l}}),i=ye(()=>`pattern-${t}${e.id?`-${e.id}`:""}`),o=ye(()=>e.color||e.patternColor||Em[e.variant||at.Dots]);return(s,a)=>(W(),ne("svg",{class:"vue-flow__background vue-flow__container",style:We({height:`${s.height>100?100:s.height}%`,width:`${s.width>100?100:s.width}%`})},[me(s.$slots,"pattern-container",{id:i.value},()=>[ce("pattern",{id:i.value,x:H(n).x%r.value.scaledGap[0],y:H(n).y%r.value.scaledGap[1],width:r.value.scaledGap[0],height:r.value.scaledGap[1],patternTransform:`translate(-${r.value.offset[0]},-${r.value.offset[1]})`,patternUnits:"userSpaceOnUse"},[me(s.$slots,"pattern",{},()=>[s.variant===H(at).Lines?(W(),ke(H(sl),{key:0,size:s.lineWidth,color:o.value,dimensions:r.value.scaledGap},null,8,["size","color","dimensions"])):s.variant===H(at).Dots?(W(),ke(H(al),{key:1,color:o.value,radius:r.value.size/s.offset},null,8,["color","radius"])):be("",!0),s.bgColor?(W(),ne("svg",Sm,[ce("rect",{width:"100%",height:"100%",fill:s.bgColor},null,8,km)])):be("",!0)])],8,xm)]),ce("rect",{x:s.x,y:s.y,width:"100%",height:"100%",fill:`url(#${i.value})`},null,8,$m),me(s.$slots,"default",{id:i.value})],4))}}),Mm={name:"ControlButton",compatConfig:{MODE:3}},Im=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},Pm={class:"vue-flow__controls-button"};function Am(e,t,n,r,i,o){return W(),ne("button",Pm,[me(e.$slots,"default")])}const cr=Im(Mm,[["render",Am]]),Tm={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},Om=ce("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),zm=[Om];function Dm(e,t){return W(),ne("svg",Tm,zm)}const Lm={render:Dm},Rm={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},Bm=ce("path",{d:"M0 0h32v4.2H0z"},null,-1),Vm=[Bm];function Gm(e,t){return W(),ne("svg",Rm,Vm)}const Fm={render:Gm},Hm={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},Ym=ce("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),Xm=[Ym];function Um(e,t){return W(),ne("svg",Hm,Xm)}const Wm={render:Um},qm={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Km=ce("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),Zm=[Km];function jm(e,t){return W(),ne("svg",qm,Zm)}const Qm={render:jm},Jm={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ey=ce("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),ty=[ey];function ny(e,t){return W(),ne("svg",Jm,ty)}const ry={render:ny},iy={name:"Controls",compatConfig:{MODE:3}},oy=pe({...iy,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:{},position:{default:()=>Pu.BottomLeft}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const{nodesDraggable:n,nodesConnectable:r,elementsSelectable:i,setInteractive:o,zoomIn:s,zoomOut:a,fitView:u,viewport:l,minZoom:c,maxZoom:d}=ve(),h=ye(()=>n.value||r.value||i.value),f=ye(()=>l.value.zoom<=c.value),p=ye(()=>l.value.zoom>=d.value);function g(){s(),t("zoomIn")}function m(){a(),t("zoomOut")}function y(){u(e.fitViewParams),t("fitView")}function _(){o(!h.value),t("interactionChange",!h.value)}return(S,E)=>(W(),ke(H(ol),{class:"vue-flow__controls",position:S.position},{default:$e(()=>[me(S.$slots,"top"),S.showZoom?(W(),ne(ze,{key:0},[me(S.$slots,"control-zoom-in",{},()=>[he(cr,{class:"vue-flow__controls-zoomin",disabled:p.value,onClick:g},{default:$e(()=>[me(S.$slots,"icon-zoom-in",{},()=>[(W(),ke(Pt(H(Lm))))])]),_:3},8,["disabled"])]),me(S.$slots,"control-zoom-out",{},()=>[he(cr,{class:"vue-flow__controls-zoomout",disabled:f.value,onClick:m},{default:$e(()=>[me(S.$slots,"icon-zoom-out",{},()=>[(W(),ke(Pt(H(Fm))))])]),_:3},8,["disabled"])])],64)):be("",!0),S.showFitView?me(S.$slots,"control-fit-view",{key:1},()=>[he(cr,{class:"vue-flow__controls-fitview",onClick:y},{default:$e(()=>[me(S.$slots,"icon-fit-view",{},()=>[(W(),ke(Pt(H(Wm))))])]),_:3})]):be("",!0),S.showInteractive?me(S.$slots,"control-interactive",{key:2},()=>[S.showInteractive?(W(),ke(cr,{key:0,class:"vue-flow__controls-interactive",onClick:_},{default:$e(()=>[h.value?me(S.$slots,"icon-unlock",{key:0},()=>[(W(),ke(Pt(H(ry))))]):be("",!0),h.value?be("",!0):me(S.$slots,"icon-lock",{key:1},()=>[(W(),ke(Pt(H(Qm))))])]),_:3})):be("",!0)]):be("",!0),me(S.$slots,"default")]),_:3},8,["position"]))}});var sy={value:()=>{}};function Ho(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Er(n)}function Er(e){this._=e}function ay(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Er.prototype=Ho.prototype={constructor:Er,on:function(e,t){var n=this._,r=ay(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=uy(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=ra(n[i],e.name,t);else if(t==null)for(i in n)n[i]=ra(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Er(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function uy(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function ra(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=sy,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var uo="http://www.w3.org/1999/xhtml";const ia={svg:"http://www.w3.org/2000/svg",xhtml:uo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function di(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ia.hasOwnProperty(t)?{space:ia[t],local:e}:e}function ly(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===uo&&t.documentElement.namespaceURI===uo?t.createElement(e):t.createElementNS(n,e)}}function cy(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ul(e){var t=di(e);return(t.local?cy:ly)(t)}function dy(){}function Yo(e){return e==null?dy:function(){return this.querySelector(e)}}function hy(e){typeof e!="function"&&(e=Yo(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),u,l,c=0;c<s;++c)(u=o[c])&&(l=e.call(u,u.__data__,c,o))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Ye(r,this._parents)}function fy(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function py(){return[]}function ll(e){return e==null?py:function(){return this.querySelectorAll(e)}}function gy(e){return function(){return fy(e.apply(this,arguments))}}function vy(e){typeof e=="function"?e=gy(e):e=ll(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&(r.push(e.call(u,u.__data__,l,s)),i.push(u));return new Ye(r,i)}function cl(e){return function(){return this.matches(e)}}function dl(e){return function(t){return t.matches(e)}}var my=Array.prototype.find;function yy(e){return function(){return my.call(this.children,e)}}function _y(){return this.firstElementChild}function wy(e){return this.select(e==null?_y:yy(typeof e=="function"?e:dl(e)))}var by=Array.prototype.filter;function Ey(){return Array.from(this.children)}function xy(e){return function(){return by.call(this.children,e)}}function Sy(e){return this.selectAll(e==null?Ey:xy(typeof e=="function"?e:dl(e)))}function ky(e){typeof e!="function"&&(e=cl(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,l=0;l<s;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&a.push(u);return new Ye(r,this._parents)}function hl(e){return new Array(e.length)}function $y(){return new Ye(this._enter||this._groups.map(hl),this._parents)}function Gr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Gr.prototype={constructor:Gr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ny(e){return function(){return e}}function Cy(e,t,n,r,i,o){for(var s=0,a,u=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new Gr(e,o[s]);for(;s<u;++s)(a=t[s])&&(i[s]=a)}function My(e,t,n,r,i,o,s){var a,u,l=new Map,c=t.length,d=o.length,h=new Array(c),f;for(a=0;a<c;++a)(u=t[a])&&(h[a]=f=s.call(u,u.__data__,a,t)+"",l.has(f)?i[a]=u:l.set(f,u));for(a=0;a<d;++a)f=s.call(e,o[a],a,o)+"",(u=l.get(f))?(r[a]=u,u.__data__=o[a],l.delete(f)):n[a]=new Gr(e,o[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(h[a])===u&&(i[a]=u)}function Iy(e){return e.__data__}function Py(e,t){if(!arguments.length)return Array.from(this,Iy);var n=t?My:Cy,r=this._parents,i=this._groups;typeof e!="function"&&(e=Ny(e));for(var o=i.length,s=new Array(o),a=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],d=i[l],h=d.length,f=Ay(e.call(c,c&&c.__data__,l,r)),p=f.length,g=a[l]=new Array(p),m=s[l]=new Array(p),y=u[l]=new Array(h);n(c,d,g,m,y,f,t);for(var _=0,S=0,E,k;_<p;++_)if(E=g[_]){for(_>=S&&(S=_+1);!(k=m[S])&&++S<p;);E._next=k||null}}return s=new Ye(s,r),s._enter=a,s._exit=u,s}function Ay(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ty(){return new Ye(this._exit||this._groups.map(hl),this._parents)}function Oy(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function zy(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),u=0;u<s;++u)for(var l=n[u],c=r[u],d=l.length,h=a[u]=new Array(d),f,p=0;p<d;++p)(f=l[p]||c[p])&&(h[p]=f);for(;u<i;++u)a[u]=n[u];return new Ye(a,this._parents)}function Dy(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Ly(e){e||(e=Ry);function t(d,h){return d&&h?e(d.__data__,h.__data__):!d-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,u=i[o]=new Array(a),l,c=0;c<a;++c)(l=s[c])&&(u[c]=l);u.sort(t)}return new Ye(i,this._parents).order()}function Ry(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function By(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Vy(){return Array.from(this)}function Gy(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Fy(){let e=0;for(const t of this)++e;return e}function Hy(){return!this.node()}function Yy(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function Xy(e){return function(){this.removeAttribute(e)}}function Uy(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Wy(e,t){return function(){this.setAttribute(e,t)}}function qy(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ky(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Zy(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function jy(e,t){var n=di(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Uy:Xy:typeof t=="function"?n.local?Zy:Ky:n.local?qy:Wy)(n,t))}function fl(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Qy(e){return function(){this.style.removeProperty(e)}}function Jy(e,t,n){return function(){this.style.setProperty(e,t,n)}}function e0(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function t0(e,t,n){return arguments.length>1?this.each((t==null?Qy:typeof t=="function"?e0:Jy)(e,t,n??"")):mn(this.node(),e)}function mn(e,t){return e.style.getPropertyValue(t)||fl(e).getComputedStyle(e,null).getPropertyValue(t)}function n0(e){return function(){delete this[e]}}function r0(e,t){return function(){this[e]=t}}function i0(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function o0(e,t){return arguments.length>1?this.each((t==null?n0:typeof t=="function"?i0:r0)(e,t)):this.node()[e]}function pl(e){return e.trim().split(/^|\s+/)}function Xo(e){return e.classList||new gl(e)}function gl(e){this._node=e,this._names=pl(e.getAttribute("class")||"")}gl.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function vl(e,t){for(var n=Xo(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function ml(e,t){for(var n=Xo(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function s0(e){return function(){vl(this,e)}}function a0(e){return function(){ml(this,e)}}function u0(e,t){return function(){(t.apply(this,arguments)?vl:ml)(this,e)}}function l0(e,t){var n=pl(e+"");if(arguments.length<2){for(var r=Xo(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?u0:t?s0:a0)(n,t))}function c0(){this.textContent=""}function d0(e){return function(){this.textContent=e}}function h0(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function f0(e){return arguments.length?this.each(e==null?c0:(typeof e=="function"?h0:d0)(e)):this.node().textContent}function p0(){this.innerHTML=""}function g0(e){return function(){this.innerHTML=e}}function v0(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function m0(e){return arguments.length?this.each(e==null?p0:(typeof e=="function"?v0:g0)(e)):this.node().innerHTML}function y0(){this.nextSibling&&this.parentNode.appendChild(this)}function _0(){return this.each(y0)}function w0(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function b0(){return this.each(w0)}function E0(e){var t=typeof e=="function"?e:ul(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function x0(){return null}function S0(e,t){var n=typeof e=="function"?e:ul(e),r=t==null?x0:typeof t=="function"?t:Yo(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function k0(){var e=this.parentNode;e&&e.removeChild(this)}function $0(){return this.each(k0)}function N0(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function C0(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function M0(e){return this.select(e?C0:N0)}function I0(e){return arguments.length?this.property("__data__",e):this.node().__data__}function P0(e){return function(t){e.call(this,t,this.__data__)}}function A0(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function T0(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function O0(e,t,n){return function(){var r=this.__on,i,o=P0(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function z0(e,t,n){var r=A0(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<o;++i)if((s=r[i]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?O0:T0,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function yl(e,t,n){var r=fl(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function D0(e,t){return function(){return yl(this,e,t)}}function L0(e,t){return function(){return yl(this,e,t.apply(this,arguments))}}function R0(e,t){return this.each((typeof t=="function"?L0:D0)(e,t))}function*B0(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var _l=[null];function Ye(e,t){this._groups=e,this._parents=t}function jn(){return new Ye([[document.documentElement]],_l)}function V0(){return this}Ye.prototype=jn.prototype={constructor:Ye,select:hy,selectAll:vy,selectChild:wy,selectChildren:Sy,filter:ky,data:Py,enter:$y,exit:Ty,join:Oy,merge:zy,selection:V0,order:Dy,sort:Ly,call:By,nodes:Vy,node:Gy,size:Fy,empty:Hy,each:Yy,attr:jy,style:t0,property:o0,classed:l0,text:f0,html:m0,raise:_0,lower:b0,append:E0,insert:S0,remove:$0,clone:M0,datum:I0,on:z0,dispatch:R0,[Symbol.iterator]:B0};function At(e){return typeof e=="string"?new Ye([[document.querySelector(e)]],[document.documentElement]):new Ye([[e]],_l)}function G0(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Nt(e,t){if(e=G0(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const lo={capture:!0,passive:!1};function co(e){e.preventDefault(),e.stopImmediatePropagation()}function F0(e){var t=e.document.documentElement,n=At(e).on("dragstart.drag",co,lo);"onselectstart"in t?n.on("selectstart.drag",co,lo):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function H0(e,t){var n=e.document.documentElement,r=At(e).on("dragstart.drag",null);t&&(r.on("click.drag",co,lo),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Uo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function wl(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Qn(){}var Hn=.7,Fr=1/Hn,hn="\\s*([+-]?\\d+)\\s*",Yn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ct="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Y0=/^#([0-9a-f]{3,8})$/,X0=new RegExp(`^rgb\\(${hn},${hn},${hn}\\)$`),U0=new RegExp(`^rgb\\(${ct},${ct},${ct}\\)$`),W0=new RegExp(`^rgba\\(${hn},${hn},${hn},${Yn}\\)$`),q0=new RegExp(`^rgba\\(${ct},${ct},${ct},${Yn}\\)$`),K0=new RegExp(`^hsl\\(${Yn},${ct},${ct}\\)$`),Z0=new RegExp(`^hsla\\(${Yn},${ct},${ct},${Yn}\\)$`),oa={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Uo(Qn,Xn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:sa,formatHex:sa,formatHex8:j0,formatHsl:Q0,formatRgb:aa,toString:aa});function sa(){return this.rgb().formatHex()}function j0(){return this.rgb().formatHex8()}function Q0(){return bl(this).formatHsl()}function aa(){return this.rgb().formatRgb()}function Xn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Y0.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ua(t):n===3?new Le(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?dr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?dr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=X0.exec(e))?new Le(t[1],t[2],t[3],1):(t=U0.exec(e))?new Le(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=W0.exec(e))?dr(t[1],t[2],t[3],t[4]):(t=q0.exec(e))?dr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=K0.exec(e))?da(t[1],t[2]/100,t[3]/100,1):(t=Z0.exec(e))?da(t[1],t[2]/100,t[3]/100,t[4]):oa.hasOwnProperty(e)?ua(oa[e]):e==="transparent"?new Le(NaN,NaN,NaN,0):null}function ua(e){return new Le(e>>16&255,e>>8&255,e&255,1)}function dr(e,t,n,r){return r<=0&&(e=t=n=NaN),new Le(e,t,n,r)}function J0(e){return e instanceof Qn||(e=Xn(e)),e?(e=e.rgb(),new Le(e.r,e.g,e.b,e.opacity)):new Le}function ho(e,t,n,r){return arguments.length===1?J0(e):new Le(e,t,n,r??1)}function Le(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Uo(Le,ho,wl(Qn,{brighter(e){return e=e==null?Fr:Math.pow(Fr,e),new Le(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Hn:Math.pow(Hn,e),new Le(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Le(Zt(this.r),Zt(this.g),Zt(this.b),Hr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:la,formatHex:la,formatHex8:e_,formatRgb:ca,toString:ca}));function la(){return`#${Ut(this.r)}${Ut(this.g)}${Ut(this.b)}`}function e_(){return`#${Ut(this.r)}${Ut(this.g)}${Ut(this.b)}${Ut((isNaN(this.opacity)?1:this.opacity)*255)}`}function ca(){const e=Hr(this.opacity);return`${e===1?"rgb(":"rgba("}${Zt(this.r)}, ${Zt(this.g)}, ${Zt(this.b)}${e===1?")":`, ${e})`}`}function Hr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Zt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ut(e){return e=Zt(e),(e<16?"0":"")+e.toString(16)}function da(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Qe(e,t,n,r)}function bl(e){if(e instanceof Qe)return new Qe(e.h,e.s,e.l,e.opacity);if(e instanceof Qn||(e=Xn(e)),!e)return new Qe;if(e instanceof Qe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new Qe(s,a,u,e.opacity)}function t_(e,t,n,r){return arguments.length===1?bl(e):new Qe(e,t,n,r??1)}function Qe(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Uo(Qe,t_,wl(Qn,{brighter(e){return e=e==null?Fr:Math.pow(Fr,e),new Qe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Hn:Math.pow(Hn,e),new Qe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Le(Pi(e>=240?e-240:e+120,i,r),Pi(e,i,r),Pi(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Qe(ha(this.h),hr(this.s),hr(this.l),Hr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Hr(this.opacity);return`${e===1?"hsl(":"hsla("}${ha(this.h)}, ${hr(this.s)*100}%, ${hr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ha(e){return e=(e||0)%360,e<0?e+360:e}function hr(e){return Math.max(0,Math.min(1,e||0))}function Pi(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const El=e=>()=>e;function n_(e,t){return function(n){return e+n*t}}function r_(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function i_(e){return(e=+e)==1?xl:function(t,n){return n-t?r_(t,n,e):El(isNaN(t)?n:t)}}function xl(e,t){var n=t-e;return n?n_(e,n):El(isNaN(e)?t:e)}const fa=function e(t){var n=i_(t);function r(i,o){var s=n((i=ho(i)).r,(o=ho(o)).r),a=n(i.g,o.g),u=n(i.b,o.b),l=xl(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function It(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var fo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ai=new RegExp(fo.source,"g");function o_(e){return function(){return e}}function s_(e){return function(t){return e(t)+""}}function a_(e,t){var n=fo.lastIndex=Ai.lastIndex=0,r,i,o,s=-1,a=[],u=[];for(e=e+"",t=t+"";(r=fo.exec(e))&&(i=Ai.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:It(r,i)})),n=Ai.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?s_(u[0].x):o_(t):(t=u.length,function(l){for(var c=0,d;c<t;++c)a[(d=u[c]).i]=d.x(l);return a.join("")})}var pa=180/Math.PI,po={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sl(e,t,n,r,i,o){var s,a,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*pa,skewX:Math.atan(u)*pa,scaleX:s,scaleY:a}}var fr;function u_(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?po:Sl(t.a,t.b,t.c,t.d,t.e,t.f)}function l_(e){return e==null||(fr||(fr=document.createElementNS("http://www.w3.org/2000/svg","g")),fr.setAttribute("transform",e),!(e=fr.transform.baseVal.consolidate()))?po:(e=e.matrix,Sl(e.a,e.b,e.c,e.d,e.e,e.f))}function kl(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,c,d,h,f,p){if(l!==d||c!==h){var g=f.push("translate(",null,t,null,n);p.push({i:g-4,x:It(l,d)},{i:g-2,x:It(c,h)})}else(d||h)&&f.push("translate("+d+t+h+n)}function s(l,c,d,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:d.push(i(d)+"rotate(",null,r)-2,x:It(l,c)})):c&&d.push(i(d)+"rotate("+c+r)}function a(l,c,d,h){l!==c?h.push({i:d.push(i(d)+"skewX(",null,r)-2,x:It(l,c)}):c&&d.push(i(d)+"skewX("+c+r)}function u(l,c,d,h,f,p){if(l!==d||c!==h){var g=f.push(i(f)+"scale(",null,",",null,")");p.push({i:g-4,x:It(l,d)},{i:g-2,x:It(c,h)})}else(d!==1||h!==1)&&f.push(i(f)+"scale("+d+","+h+")")}return function(l,c){var d=[],h=[];return l=e(l),c=e(c),o(l.translateX,l.translateY,c.translateX,c.translateY,d,h),s(l.rotate,c.rotate,d,h),a(l.skewX,c.skewX,d,h),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,d,h),l=c=null,function(f){for(var p=-1,g=h.length,m;++p<g;)d[(m=h[p]).i]=m.x(f);return d.join("")}}}var c_=kl(u_,"px, ","px)","deg)"),d_=kl(l_,", ",")",")"),h_=1e-12;function ga(e){return((e=Math.exp(e))+1/e)/2}function f_(e){return((e=Math.exp(e))-1/e)/2}function p_(e){return((e=Math.exp(2*e))-1)/(e+1)}const g_=function e(t,n,r){function i(o,s){var a=o[0],u=o[1],l=o[2],c=s[0],d=s[1],h=s[2],f=c-a,p=d-u,g=f*f+p*p,m,y;if(g<h_)y=Math.log(h/l)/t,m=function(T){return[a+T*f,u+T*p,l*Math.exp(t*T*y)]};else{var _=Math.sqrt(g),S=(h*h-l*l+r*g)/(2*l*n*_),E=(h*h-l*l-r*g)/(2*h*n*_),k=Math.log(Math.sqrt(S*S+1)-S),I=Math.log(Math.sqrt(E*E+1)-E);y=(I-k)/t,m=function(T){var z=T*y,V=ga(k),O=l/(n*_)*(V*p_(t*z+k)-f_(k));return[a+O*f,u+O*p,l*V/ga(t*z+k)]}}return m.duration=y*1e3*t/Math.SQRT2,m}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,u=a*a;return e(s,a,u)},i}(Math.SQRT2,2,4);var yn=0,Mn=0,Sn=0,$l=1e3,Yr,In,Xr=0,tn=0,hi=0,Un=typeof performance=="object"&&performance.now?performance:Date,Nl=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Wo(){return tn||(Nl(v_),tn=Un.now()+hi)}function v_(){tn=0}function Ur(){this._call=this._time=this._next=null}Ur.prototype=Cl.prototype={constructor:Ur,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Wo():+n)+(t==null?0:+t),!this._next&&In!==this&&(In?In._next=this:Yr=this,In=this),this._call=e,this._time=n,go()},stop:function(){this._call&&(this._call=null,this._time=1/0,go())}};function Cl(e,t,n){var r=new Ur;return r.restart(e,t,n),r}function m_(){Wo(),++yn;for(var e=Yr,t;e;)(t=tn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--yn}function va(){tn=(Xr=Un.now())+hi,yn=Mn=0;try{m_()}finally{yn=0,__(),tn=0}}function y_(){var e=Un.now(),t=e-Xr;t>$l&&(hi-=t,Xr=e)}function __(){for(var e,t=Yr,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Yr=n);In=e,go(r)}function go(e){if(!yn){Mn&&(Mn=clearTimeout(Mn));var t=e-tn;t>24?(e<1/0&&(Mn=setTimeout(va,e-Un.now()-hi)),Sn&&(Sn=clearInterval(Sn))):(Sn||(Xr=Un.now(),Sn=setInterval(y_,$l)),yn=1,Nl(va))}}function ma(e,t,n){var r=new Ur;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var w_=Ho("start","end","cancel","interrupt"),b_=[],Ml=0,ya=1,vo=2,xr=3,_a=4,mo=5,Sr=6;function fi(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;E_(e,n,{name:t,index:r,group:i,on:w_,tween:b_,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Ml})}function qo(e,t){var n=tt(e,t);if(n.state>Ml)throw new Error("too late; already scheduled");return n}function ft(e,t){var n=tt(e,t);if(n.state>xr)throw new Error("too late; already running");return n}function tt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function E_(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Cl(o,0,n.time);function o(l){n.state=ya,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var c,d,h,f;if(n.state!==ya)return u();for(c in r)if(f=r[c],f.name===n.name){if(f.state===xr)return ma(s);f.state===_a?(f.state=Sr,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete r[c]):+c<t&&(f.state=Sr,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete r[c])}if(ma(function(){n.state===xr&&(n.state=_a,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=vo,n.on.call("start",e,e.__data__,n.index,n.group),n.state===vo){for(n.state=xr,i=new Array(h=n.tween.length),c=0,d=-1;c<h;++c)(f=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=f);i.length=d+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=mo,1),d=-1,h=i.length;++d<h;)i[d].call(e,c);n.state===mo&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Sr,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function kr(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>vo&&r.state<mo,r.state=Sr,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function x_(e){return this.each(function(){kr(this,e)})}function S_(e,t){var n,r;return function(){var i=ft(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function k_(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=ft(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}o.tween=i}}function $_(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=tt(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?S_:k_)(n,e,t))}function Ko(e,t,n){var r=e._id;return e.each(function(){var i=ft(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return tt(i,r).value[t]}}function Il(e,t){var n;return(typeof t=="number"?It:t instanceof Xn?fa:(n=Xn(t))?(t=n,fa):a_)(e,t)}function N_(e){return function(){this.removeAttribute(e)}}function C_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function M_(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function I_(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function P_(e,t,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a)))}}function A_(e,t,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a)))}}function T_(e,t){var n=di(e),r=n==="transform"?d_:Il;return this.attrTween(e,typeof t=="function"?(n.local?A_:P_)(n,r,Ko(this,"attr."+e,t)):t==null?(n.local?C_:N_)(n):(n.local?I_:M_)(n,r,t))}function O_(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function z_(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function D_(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&z_(e,o)),n}return i._value=t,i}function L_(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&O_(e,o)),n}return i._value=t,i}function R_(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=di(e);return this.tween(n,(r.local?D_:L_)(r,t))}function B_(e,t){return function(){qo(this,e).delay=+t.apply(this,arguments)}}function V_(e,t){return t=+t,function(){qo(this,e).delay=t}}function G_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?B_:V_)(t,e)):tt(this.node(),t).delay}function F_(e,t){return function(){ft(this,e).duration=+t.apply(this,arguments)}}function H_(e,t){return t=+t,function(){ft(this,e).duration=t}}function Y_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?F_:H_)(t,e)):tt(this.node(),t).duration}function X_(e,t){if(typeof t!="function")throw new Error;return function(){ft(this,e).ease=t}}function U_(e){var t=this._id;return arguments.length?this.each(X_(t,e)):tt(this.node(),t).ease}function W_(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ft(this,e).ease=n}}function q_(e){if(typeof e!="function")throw new Error;return this.each(W_(this._id,e))}function K_(e){typeof e!="function"&&(e=cl(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,l=0;l<s;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&a.push(u);return new Et(r,this._parents,this._name,this._id)}function Z_(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u=t[a],l=n[a],c=u.length,d=s[a]=new Array(c),h,f=0;f<c;++f)(h=u[f]||l[f])&&(d[f]=h);for(;a<r;++a)s[a]=t[a];return new Et(s,this._parents,this._name,this._id)}function j_(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Q_(e,t,n){var r,i,o=j_(t)?qo:ft;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function J_(e,t){var n=this._id;return arguments.length<2?tt(this.node(),n).on.on(e):this.each(Q_(n,e,t))}function e1(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function t1(){return this.on("end.remove",e1(this._id))}function n1(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Yo(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],u=a.length,l=o[s]=new Array(u),c,d,h=0;h<u;++h)(c=a[h])&&(d=e.call(c,c.__data__,h,a))&&("__data__"in c&&(d.__data__=c.__data__),l[h]=d,fi(l[h],t,n,h,l,tt(c,n)));return new Et(o,this._parents,t,n)}function r1(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ll(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,d=0;d<l;++d)if(c=u[d]){for(var h=e.call(c,c.__data__,d,u),f,p=tt(c,n),g=0,m=h.length;g<m;++g)(f=h[g])&&fi(f,t,n,g,h,p);o.push(h),s.push(c)}return new Et(o,s,t,n)}var i1=jn.prototype.constructor;function o1(){return new i1(this._groups,this._parents)}function s1(e,t){var n,r,i;return function(){var o=mn(this,e),s=(this.style.removeProperty(e),mn(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function Pl(e){return function(){this.style.removeProperty(e)}}function a1(e,t,n){var r,i=n+"",o;return function(){var s=mn(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function u1(e,t,n){var r,i,o;return function(){var s=mn(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),mn(this,e))),s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a))}}function l1(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var u=ft(this,e),l=u.on,c=u.value[o]==null?a||(a=Pl(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(s,i=c),u.on=r}}function c1(e,t,n){var r=(e+="")=="transform"?c_:Il;return t==null?this.styleTween(e,s1(e,r)).on("end.style."+e,Pl(e)):typeof t=="function"?this.styleTween(e,u1(e,r,Ko(this,"style."+e,t))).each(l1(this._id,e)):this.styleTween(e,a1(e,r,t),n).on("end.style."+e,null)}function d1(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function h1(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&d1(e,s,n)),r}return o._value=t,o}function f1(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,h1(e,t,n??""))}function p1(e){return function(){this.textContent=e}}function g1(e){return function(){var t=e(this);this.textContent=t??""}}function v1(e){return this.tween("text",typeof e=="function"?g1(Ko(this,"text",e)):p1(e==null?"":e+""))}function m1(e){return function(t){this.textContent=e.call(this,t)}}function y1(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&m1(i)),t}return r._value=e,r}function _1(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,y1(e))}function w1(){for(var e=this._name,t=this._id,n=Al(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,l=0;l<a;++l)if(u=s[l]){var c=tt(u,t);fi(u,e,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Et(r,this._parents,e,n)}function b1(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},u={value:function(){--i===0&&o()}};n.each(function(){var l=ft(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&o()})}var E1=0;function Et(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Al(){return++E1}var gt=jn.prototype;Et.prototype={constructor:Et,select:n1,selectAll:r1,selectChild:gt.selectChild,selectChildren:gt.selectChildren,filter:K_,merge:Z_,selection:o1,transition:w1,call:gt.call,nodes:gt.nodes,node:gt.node,size:gt.size,empty:gt.empty,each:gt.each,on:J_,attr:T_,attrTween:R_,style:c1,styleTween:f1,text:v1,textTween:_1,remove:t1,tween:$_,delay:G_,duration:Y_,ease:U_,easeVarying:q_,end:b1,[Symbol.iterator]:gt[Symbol.iterator]};function x1(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var S1={time:null,delay:0,duration:250,ease:x1};function k1(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function $1(e){var t,n;e instanceof Et?(t=e._id,e=e._name):(t=Al(),(n=S1).time=Wo(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&fi(u,e,t,l,s,n||k1(u,t));return new Et(r,this._parents,e,t)}jn.prototype.interrupt=x_;jn.prototype.transition=$1;const pr=e=>()=>e;function N1(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function _t(e,t,n){this.k=e,this.x=t,this.y=n}_t.prototype={constructor:_t,scale:function(e){return e===1?this:new _t(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new _t(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Zo=new _t(1,0,0);_t.prototype;function Ti(e){e.stopImmediatePropagation()}function kn(e){e.preventDefault(),e.stopImmediatePropagation()}function C1(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function M1(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function wa(){return this.__zoom||Zo}function I1(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function P1(){return navigator.maxTouchPoints||"ontouchstart"in this}function A1(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function T1(){var e=C1,t=M1,n=A1,r=I1,i=P1,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,u=g_,l=Ho("start","zoom","end"),c,d,h,f=500,p=150,g=0,m=10;function y(v){v.property("__zoom",wa).on("wheel.zoom",z,{passive:!1}).on("mousedown.zoom",V).on("dblclick.zoom",O).filter(i).on("touchstart.zoom",N).on("touchmove.zoom",Y).on("touchend.zoom touchcancel.zoom",X).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(v,$,b,P){var A=v.selection?v.selection():v;A.property("__zoom",wa),v!==A?k(v,$,b,P):A.interrupt().each(function(){I(this,arguments).event(P).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},y.scaleBy=function(v,$,b,P){y.scaleTo(v,function(){var A=this.__zoom.k,C=typeof $=="function"?$.apply(this,arguments):$;return A*C},b,P)},y.scaleTo=function(v,$,b,P){y.transform(v,function(){var A=t.apply(this,arguments),C=this.__zoom,M=b==null?E(A):typeof b=="function"?b.apply(this,arguments):b,R=C.invert(M),U=typeof $=="function"?$.apply(this,arguments):$;return n(S(_(C,U),M,R),A,s)},b,P)},y.translateBy=function(v,$,b,P){y.transform(v,function(){return n(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof b=="function"?b.apply(this,arguments):b),t.apply(this,arguments),s)},null,P)},y.translateTo=function(v,$,b,P,A){y.transform(v,function(){var C=t.apply(this,arguments),M=this.__zoom,R=P==null?E(C):typeof P=="function"?P.apply(this,arguments):P;return n(Zo.translate(R[0],R[1]).scale(M.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof b=="function"?-b.apply(this,arguments):-b),C,s)},P,A)};function _(v,$){return $=Math.max(o[0],Math.min(o[1],$)),$===v.k?v:new _t($,v.x,v.y)}function S(v,$,b){var P=$[0]-b[0]*v.k,A=$[1]-b[1]*v.k;return P===v.x&&A===v.y?v:new _t(v.k,P,A)}function E(v){return[(+v[0][0]+ +v[1][0])/2,(+v[0][1]+ +v[1][1])/2]}function k(v,$,b,P){v.on("start.zoom",function(){I(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(P).end()}).tween("zoom",function(){var A=this,C=arguments,M=I(A,C).event(P),R=t.apply(A,C),U=b==null?E(R):typeof b=="function"?b.apply(A,C):b,F=Math.max(R[1][0]-R[0][0],R[1][1]-R[0][1]),G=A.__zoom,q=typeof $=="function"?$.apply(A,C):$,oe=u(G.invert(U).concat(F/G.k),q.invert(U).concat(F/q.k));return function(re){if(re===1)re=q;else{var se=oe(re),ie=F/se[2];re=new _t(ie,U[0]-se[0]*ie,U[1]-se[1]*ie)}M.zoom(null,re)}})}function I(v,$,b){return!b&&v.__zooming||new T(v,$)}function T(v,$){this.that=v,this.args=$,this.active=0,this.sourceEvent=null,this.extent=t.apply(v,$),this.taps=0}T.prototype={event:function(v){return v&&(this.sourceEvent=v),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(v,$){return this.mouse&&v!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&v!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&v!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(v){var $=At(this.that).datum();l.call(v,this.that,new N1(v,{sourceEvent:this.sourceEvent,target:y,type:v,transform:this.that.__zoom,dispatch:l}),$)}};function z(v,...$){if(!e.apply(this,arguments))return;var b=I(this,$).event(v),P=this.__zoom,A=Math.max(o[0],Math.min(o[1],P.k*Math.pow(2,r.apply(this,arguments)))),C=Nt(v);if(b.wheel)(b.mouse[0][0]!==C[0]||b.mouse[0][1]!==C[1])&&(b.mouse[1]=P.invert(b.mouse[0]=C)),clearTimeout(b.wheel);else{if(P.k===A)return;b.mouse=[C,P.invert(C)],kr(this),b.start()}kn(v),b.wheel=setTimeout(M,p),b.zoom("mouse",n(S(_(P,A),b.mouse[0],b.mouse[1]),b.extent,s));function M(){b.wheel=null,b.end()}}function V(v,...$){if(h||!e.apply(this,arguments))return;var b=v.currentTarget,P=I(this,$,!0).event(v),A=At(v.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",F,!0),C=Nt(v,b),M=v.clientX,R=v.clientY;F0(v.view),Ti(v),P.mouse=[C,this.__zoom.invert(C)],kr(this),P.start();function U(G){if(kn(G),!P.moved){var q=G.clientX-M,oe=G.clientY-R;P.moved=q*q+oe*oe>g}P.event(G).zoom("mouse",n(S(P.that.__zoom,P.mouse[0]=Nt(G,b),P.mouse[1]),P.extent,s))}function F(G){A.on("mousemove.zoom mouseup.zoom",null),H0(G.view,P.moved),kn(G),P.event(G).end()}}function O(v,...$){if(e.apply(this,arguments)){var b=this.__zoom,P=Nt(v.changedTouches?v.changedTouches[0]:v,this),A=b.invert(P),C=b.k*(v.shiftKey?.5:2),M=n(S(_(b,C),P,A),t.apply(this,$),s);kn(v),a>0?At(this).transition().duration(a).call(k,M,P,v):At(this).call(y.transform,M,P,v)}}function N(v,...$){if(e.apply(this,arguments)){var b=v.touches,P=b.length,A=I(this,$,v.changedTouches.length===P).event(v),C,M,R,U;for(Ti(v),M=0;M<P;++M)R=b[M],U=Nt(R,this),U=[U,this.__zoom.invert(U),R.identifier],A.touch0?!A.touch1&&A.touch0[2]!==U[2]&&(A.touch1=U,A.taps=0):(A.touch0=U,C=!0,A.taps=1+!!c);c&&(c=clearTimeout(c)),C&&(A.taps<2&&(d=U[0],c=setTimeout(function(){c=null},f)),kr(this),A.start())}}function Y(v,...$){if(this.__zooming){var b=I(this,$).event(v),P=v.changedTouches,A=P.length,C,M,R,U;for(kn(v),C=0;C<A;++C)M=P[C],R=Nt(M,this),b.touch0&&b.touch0[2]===M.identifier?b.touch0[0]=R:b.touch1&&b.touch1[2]===M.identifier&&(b.touch1[0]=R);if(M=b.that.__zoom,b.touch1){var F=b.touch0[0],G=b.touch0[1],q=b.touch1[0],oe=b.touch1[1],re=(re=q[0]-F[0])*re+(re=q[1]-F[1])*re,se=(se=oe[0]-G[0])*se+(se=oe[1]-G[1])*se;M=_(M,Math.sqrt(re/se)),R=[(F[0]+q[0])/2,(F[1]+q[1])/2],U=[(G[0]+oe[0])/2,(G[1]+oe[1])/2]}else if(b.touch0)R=b.touch0[0],U=b.touch0[1];else return;b.zoom("touch",n(S(M,R,U),b.extent,s))}}function X(v,...$){if(this.__zooming){var b=I(this,$).event(v),P=v.changedTouches,A=P.length,C,M;for(Ti(v),h&&clearTimeout(h),h=setTimeout(function(){h=null},f),C=0;C<A;++C)M=P[C],b.touch0&&b.touch0[2]===M.identifier?delete b.touch0:b.touch1&&b.touch1[2]===M.identifier&&delete b.touch1;if(b.touch1&&!b.touch0&&(b.touch0=b.touch1,delete b.touch1),b.touch0)b.touch0[1]=this.__zoom.invert(b.touch0[0]);else if(b.end(),b.taps===2&&(M=Nt(M,this),Math.hypot(d[0]-M[0],d[1]-M[1])<m)){var R=At(this).on("dblclick.zoom");R&&R.apply(this,arguments)}}}return y.wheelDelta=function(v){return arguments.length?(r=typeof v=="function"?v:pr(+v),y):r},y.filter=function(v){return arguments.length?(e=typeof v=="function"?v:pr(!!v),y):e},y.touchable=function(v){return arguments.length?(i=typeof v=="function"?v:pr(!!v),y):i},y.extent=function(v){return arguments.length?(t=typeof v=="function"?v:pr([[+v[0][0],+v[0][1]],[+v[1][0],+v[1][1]]]),y):t},y.scaleExtent=function(v){return arguments.length?(o[0]=+v[0],o[1]=+v[1],y):[o[0],o[1]]},y.translateExtent=function(v){return arguments.length?(s[0][0]=+v[0][0],s[1][0]=+v[1][0],s[0][1]=+v[0][1],s[1][1]=+v[1][1],y):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},y.constrain=function(v){return arguments.length?(n=v,y):n},y.duration=function(v){return arguments.length?(a=+v,y):a},y.interpolate=function(v){return arguments.length?(u=v,y):u},y.on=function(){var v=l.on.apply(l,arguments);return v===l?y:v},y.clickDistance=function(v){return arguments.length?(g=(v=+v)*v,y):Math.sqrt(g)},y.tapDistance=function(v){return arguments.length?(m=+v,y):m},y}const Tl=Symbol("MiniMapSlots"),O1=["id","x","y","rx","ry","width","height","fill","stroke","stroke-width","shape-rendering"],z1={name:"MiniMapNode",compatConfig:{MODE:3}},D1=pe({...z1,props:{id:{},type:{},selected:{type:Boolean},dragging:{type:Boolean},position:{},dimensions:{},borderRadius:{},color:{},shapeRendering:{},strokeColor:{},strokeWidth:{}},emits:["click","dblclick","mouseenter","mousemove","mouseleave"],setup(e,{emit:t}){const n=e,r=Bt(Tl),i=Mo(),o=ye(()=>i.style??{});function s(d){t("click",d)}function a(d){t("dblclick",d)}function u(d){t("mouseenter",d)}function l(d){t("mousemove",d)}function c(d){t("mouseleave",d)}return(d,h)=>H(r)[`node-${n.type}`]?(W(),ke(Pt(H(r)[`node-${n.type}`]),od(Te({key:0},n)),null,16)):(W(),ne("rect",{key:1,id:d.id,class:Re(["vue-flow__minimap-node",{selected:d.selected,dragging:d.dragging}]),x:d.position.x,y:d.position.y,rx:d.borderRadius,ry:d.borderRadius,width:d.dimensions.width,height:d.dimensions.height,fill:d.color||o.value.background||o.value.backgroundColor,stroke:d.strokeColor,"stroke-width":d.strokeWidth,"shape-rendering":d.shapeRendering,onClick:s,onDblclick:a,onMouseenter:u,onMousemove:l,onMouseleave:c},null,42,O1))}}),L1=["width","height","viewBox","aria-labelledby"],R1=["id"],B1=["d","fill","stroke","stroke-width"],V1={name:"MiniMap",compatConfig:{MODE:3}},G1=pe({...V1,props:{nodeColor:{type:[String,Function],default:"#e2e2e2"},nodeStrokeColor:{type:[String,Function],default:"transparent"},nodeClassName:{type:[String,Function]},nodeBorderRadius:{default:5},nodeStrokeWidth:{default:2},maskColor:{default:"rgb(240, 240, 240, 0.6)"},maskStrokeColor:{default:"none"},maskStrokeWidth:{default:1},position:{default:"bottom-right"},pannable:{type:Boolean,default:!1},zoomable:{type:Boolean,default:!1},width:{},height:{},ariaLabel:{default:"Vue Flow mini map"},inversePan:{type:Boolean,default:!1},zoomStep:{default:10},offsetScale:{default:5},maskBorderRadius:{default:0}},emits:["click","nodeClick","nodeDblclick","nodeMouseenter","nodeMousemove","nodeMouseleave"],setup(e,{emit:t}){const n=Ka(),r=Mo(),i=200,o=150,{id:s,edges:a,viewport:u,translateExtent:l,dimensions:c,emits:d,d3Selection:h,d3Zoom:f,getNodesInitialized:p}=ve(),g=de();jt(Tl,n);const m=ye(()=>{var A;return e.width??((A=r.style)==null?void 0:A.width)??i}),y=ye(()=>{var A;return e.height??((A=r.style)==null?void 0:A.height)??o}),_=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",S=te(()=>typeof e.nodeColor=="string"?()=>e.nodeColor:e.nodeColor),E=te(()=>typeof e.nodeStrokeColor=="string"?()=>e.nodeStrokeColor:e.nodeStrokeColor),k=te(()=>typeof e.nodeClassName=="string"?()=>e.nodeClassName:typeof e.nodeClassName=="function"?e.nodeClassName:()=>""),I=te(()=>ii(p.value)),T=te(()=>({x:-u.value.x/u.value.zoom,y:-u.value.y/u.value.zoom,width:c.value.width/u.value.zoom,height:c.value.height/u.value.zoom})),z=te(()=>p.value&&p.value.length?$g(I.value,T.value):T.value),V=te(()=>{const A=z.value.width/m.value,C=z.value.height/y.value;return Math.max(A,C)}),O=te(()=>{const A=V.value*m.value,C=V.value*y.value,M=e.offsetScale*V.value;return{offset:M,x:z.value.x-(A-z.value.width)/2-M,y:z.value.y-(C-z.value.height)/2-M,width:A+M*2,height:C+M*2}}),N=te(()=>!O.value.x||!O.value.y?"":`
    M${O.value.x-O.value.offset},${O.value.y-O.value.offset}
    h${O.value.width+O.value.offset*2}
    v${O.value.height+O.value.offset*2}
    h${-O.value.width-O.value.offset*2}z
    M${T.value.x+e.maskBorderRadius},${T.value.y}
    h${T.value.width-2*e.maskBorderRadius}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 ${e.maskBorderRadius},${e.maskBorderRadius}
    v${T.value.height-2*e.maskBorderRadius}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 -${e.maskBorderRadius},${e.maskBorderRadius}
    h${-(T.value.width-2*e.maskBorderRadius)}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 -${e.maskBorderRadius},-${e.maskBorderRadius}
    v${-(T.value.height-2*e.maskBorderRadius)}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 ${e.maskBorderRadius},-${e.maskBorderRadius}z`);id(A=>{if(g.value){const C=At(g.value),M=F=>{if(F.sourceEvent.type!=="wheel"||!h.value||!f.value)return;const G=-F.sourceEvent.deltaY*(F.sourceEvent.deltaMode===1?.05:F.sourceEvent.deltaMode?1:.002)*e.zoomStep,q=u.value.zoom*2**G;f.value.scaleTo(h.value,q)},R=F=>{if(F.sourceEvent.type!=="mousemove"||!h.value||!f.value)return;const G=V.value*Math.max(1,u.value.zoom)*(e.inversePan?-1:1),q={x:u.value.x-F.sourceEvent.movementX*G,y:u.value.y-F.sourceEvent.movementY*G},oe=[[0,0],[c.value.width,c.value.height]],re=Zo.translate(q.x,q.y).scale(u.value.zoom),se=f.value.constrain()(re,oe,l.value);f.value.transform(h.value,se)},U=T1().on("zoom",e.pannable?R:()=>{}).on("zoom.wheel",e.zoomable?M:()=>{});C.call(U),A(()=>{C.on("zoom",null)})}},{flush:"post"});function Y(A){const[C,M]=Nt(A);t("click",{event:A,position:{x:C,y:M}})}function X(A,C){const M={event:A,node:C,connectedEdges:Ht([C],a.value)};d.miniMapNodeClick(M),t("nodeClick",M)}function v(A,C){const M={event:A,node:C,connectedEdges:Ht([C],a.value)};d.miniMapNodeDoubleClick(M),t("nodeDblclick",M)}function $(A,C){const M={event:A,node:C,connectedEdges:Ht([C],a.value)};d.miniMapNodeMouseEnter(M),t("nodeMouseenter",M)}function b(A,C){const M={event:A,node:C,connectedEdges:Ht([C],a.value)};d.miniMapNodeMouseMove(M),t("nodeMousemove",M)}function P(A,C){const M={event:A,node:C,connectedEdges:Ht([C],a.value)};d.miniMapNodeMouseLeave(M),t("nodeMouseleave",M)}return(A,C)=>(W(),ke(H(ol),{position:A.position,class:Re(["vue-flow__minimap",{pannable:A.pannable,zoomable:A.zoomable}])},{default:$e(()=>[(W(),ne("svg",{ref_key:"el",ref:g,width:m.value,height:y.value,viewBox:[O.value.x,O.value.y,O.value.width,O.value.height].join(" "),role:"img","aria-labelledby":`vue-flow__minimap-${H(s)}`,onClick:Y},[A.ariaLabel?(W(),ne("title",{key:0,id:`vue-flow__minimap-${H(s)}`},Oe(A.ariaLabel),9,R1)):be("",!0),(W(!0),ne(ze,null,zt(H(p),M=>(W(),ke(D1,{id:M.id,key:M.id,position:M.computedPosition,dimensions:M.dimensions,selected:M.selected,dragging:M.dragging,style:We(M.style),class:Re(k.value(M)),color:S.value(M),"border-radius":A.nodeBorderRadius,"stroke-color":E.value(M),"stroke-width":A.nodeStrokeWidth,"shape-rendering":H(_),type:M.type,onClick:R=>X(R,M),onDblclick:R=>v(R,M),onMouseenter:R=>$(R,M),onMousemove:R=>b(R,M),onMouseleave:R=>P(R,M)},null,8,["id","position","dimensions","selected","dragging","style","class","color","border-radius","stroke-color","stroke-width","shape-rendering","type","onClick","onDblclick","onMouseenter","onMousemove","onMouseleave"]))),128)),ce("path",{class:"vue-flow__minimap-mask",d:N.value,fill:A.maskColor,stroke:A.maskStrokeColor,"stroke-width":A.maskStrokeWidth,"fill-rule":"evenodd"},null,8,B1)],8,L1))]),_:1},8,["position","class"]))}}),F1={name:"NodeToolbar",compatConfig:{MODE:3},inheritAttrs:!1},Ol=pe({...F1,props:{nodeId:null,isVisible:{type:Boolean},position:{default:Q.Top},offset:{default:10},align:{default:"center"}},setup(e){const t=e,n=Bt(Go,null),{viewportRef:r,viewport:i,getSelectedNodes:o,findNode:s}=ve();function a(f,p,g,m,y){let _=.5;y==="start"?_=0:y==="end"&&(_=1);let S=[(f.x+f.width*_)*p.zoom+p.x,f.y*p.zoom+p.y-m],E=[-100*_,-100];switch(g){case Q.Right:S=[(f.x+f.width)*p.zoom+p.x+m,(f.y+f.height*_)*p.zoom+p.y],E=[0,-100*_];break;case Q.Bottom:S[1]=(f.y+f.height)*p.zoom+p.y+m,E[1]=0;break;case Q.Left:S=[f.x*p.zoom+p.x-m,(f.y+f.height*_)*p.zoom+p.y],E=[-100,-100*_];break}return`translate(${S[0]}px, ${S[1]}px) translate(${E[0]}%, ${E[1]}%)`}const u=te(()=>(Array.isArray(t.nodeId)?t.nodeId:[t.nodeId||n||""]).reduce((f,p)=>{const g=s(p);return g&&f.push(g),f},[])),l=te(()=>typeof t.isVisible=="boolean"?t.isVisible:u.value.length===1&&u.value[0].selected&&o.value.length===1),c=te(()=>ii(u.value)),d=te(()=>Math.max(...u.value.map(f=>(f.computedPosition.z||1)+1))),h=te(()=>({position:"absolute",transform:a(c.value,i.value,t.position,t.offset,t.align),zIndex:d.value}));return(f,p)=>(W(),ke(sd,{to:H(r),disabled:!H(r)},[H(l)&&H(u).length?(W(),ne("div",Te({key:0},f.$attrs,{style:H(h),class:"vue-flow__node-toolbar"}),[me(f.$slots,"default")],16)):be("",!0)],8,["to","disabled"]))}}),H1=ce("button",null,"+ EDataType",-1),Y1=pe({__name:"PackageV",props:{data:{},label:{},id:{}},emits:["nodeClick"],setup(e,{emit:t}){const n=e,r=t,i=new jr({length:10}),o=Io(),{onNodeClick:s}=ve();s(l=>{r("nodeClick",l)});const a=()=>{const l=Ot().ecorePackage.eFactoryInstance,c=Tt(n.data.instance),d=l.createEClassFromContainer(c),h=i.rnd();Fe().setInstance(h,d),o.push({name:st,params:{instanceid:h}})},u=()=>{const l=Ot().ecorePackage.eFactoryInstance,c=Tt(n.data.instance),d=l.createEAnnotationFromContainer(c),h=i.rnd();Fe().setInstance(h,d),o.push({name:st,params:{instanceid:h}})};return(l,c)=>(W(),ne("div",null,[he(H(Ol),{"is-visible":l.data.toolbarVisible,position:l.data.toolbarPosition},{default:$e(()=>[ce("button",{onClick:u},"+ EAnnotation"),ce("button",{onClick:a},"+ EClass"),H1]),_:1},8,["is-visible","position"]),ce("div",null,Oe(l.label)+" "+Oe(n.id),1)]))}});var X1=function(t){var n=t.dt;return`
.p-card {
    background: `.concat(n("card.background"),`;
    color: `).concat(n("card.color"),`;
    box-shadow: `).concat(n("card.shadow"),`;
    border-radius: `).concat(n("card.border.radius"),`;
    display: flex;
    flex-direction: column;
}

.p-card-caption {
    display: flex;
    flex-direction: column;
    gap: `).concat(n("card.caption.gap"),`;
}

.p-card-body {
    padding: `).concat(n("card.body.padding"),`;
    display: flex;
    flex-direction: column;
    gap: `).concat(n("card.body.gap"),`;
}

.p-card-title {
    font-size: `).concat(n("card.title.font.size"),`;
    font-weight: `).concat(n("card.title.font.weight"),`;
}

.p-card-subtitle {
    color: `).concat(n("card.subtitle.color"),`;
}
`)},U1={root:"p-card p-component",header:"p-card-header",body:"p-card-body",caption:"p-card-caption",title:"p-card-title",subtitle:"p-card-subtitle",content:"p-card-content",footer:"p-card-footer"},W1=No.extend({name:"card",theme:X1,classes:U1}),q1={name:"BaseCard",extends:$o,style:W1,provide:function(){return{$pcCard:this,$parentInstance:this}}},zl={name:"Card",extends:q1,inheritAttrs:!1};function K1(e,t,n,r,i,o){return W(),ne("div",Te({class:e.cx("root")},e.ptmi("root")),[e.$slots.header?(W(),ne("div",Te({key:0,class:e.cx("header")},e.ptm("header")),[me(e.$slots,"header")],16)):be("",!0),ce("div",Te({class:e.cx("body")},e.ptm("body")),[e.$slots.title||e.$slots.subtitle?(W(),ne("div",Te({key:0,class:e.cx("caption")},e.ptm("caption")),[e.$slots.title?(W(),ne("div",Te({key:0,class:e.cx("title")},e.ptm("title")),[me(e.$slots,"title")],16)):be("",!0),e.$slots.subtitle?(W(),ne("div",Te({key:1,class:e.cx("subtitle")},e.ptm("subtitle")),[me(e.$slots,"subtitle")],16)):be("",!0)],16)):be("",!0),ce("div",Te({class:e.cx("content")},e.ptm("content")),[me(e.$slots,"content")],16),e.$slots.footer?(W(),ne("div",Te({key:1,class:e.cx("footer")},e.ptm("footer")),[me(e.$slots,"footer")],16)):be("",!0)],16)],16)}zl.render=K1;const Z1={class:"gradient"},j1=ce("h4",null,"EClass",-1),Q1=["onClick"],J1=["onClick"],ew=["onClick"],tw=pe({__name:"ClassV",props:{data:{},label:{},id:{}},emits:["nodeClick"],setup(e,{emit:t}){const n=e,r=t,i=new jr({length:10}),{identify:o,getInstance:s}=Fe(),a=Io(),u=Ja(),{onNodeClick:l}=ve();l(S=>{r("nodeClick",S)});const c=te(()=>n.data.instance.eGet(n.data.instance.eClass().getEStructuralFeatureFromName("name"))),d=te(()=>{let S=[],E=s(n.id).eGet(n.data.instance.eClass().getEStructuralFeatureFromName("eAttributes"));for(const k of E){let I="";const T=k.eGet(k.eClass().getEStructuralFeatureFromName("eAttributeType"));T&&(I=T.eGet(T.eClass().getEStructuralFeatureFromName("name"))),S.push({name:k.eGet(k.eClass().getEStructuralFeatureFromName("name")),type:I,id:o(k)})}return S}),h=te(()=>{let S=[],E=n.data.instance.eGet(n.data.instance.eClass().getEStructuralFeatureFromName("eOperations"));for(const k of E){let I="";const T=k.eGet(k.eClass().getEStructuralFeatureFromName("eType"));T&&(I=T.eGet(T.eClass().getEStructuralFeatureFromName("name"))),S.push({name:k.eGet(k.eClass().getEStructuralFeatureFromName("name")),id:o(k),type:I})}return S}),f=te(()=>{let S=[],E=n.data.instance.eGet(n.data.instance.eClass().getEStructuralFeatureFromName("eReferences"));for(const k of E){let I="";const T=k.eGet(k.eClass().getEStructuralFeatureFromName("eType"));T&&(I=T.eGet(T.eClass().getEStructuralFeatureFromName("name")));let z="";try{const V=k.eGet(k.eClass().getEStructuralFeatureFromName("eReferenceType"));V&&(z=V.eGet(V.eClass().getEStructuralFeatureFromName("name")))}catch(V){console.log(V)}S.push({name:k.eGet(k.eClass().getEStructuralFeatureFromName("name")),aclass:z,type:I,id:o(k)})}return S}),p=()=>{const S=Ot().ecorePackage.eFactoryInstance,E=Tt(n.data.instance),k=S.createEAttributeFromContainer(E),I=i.rnd();Fe().setInstance(I,k),a.push({name:st,params:{instanceid:I}})},g=()=>{const S=Ot().ecorePackage.eFactoryInstance,E=Tt(n.data.instance),k=S.createEOperationFromContainer(E),I=i.rnd();Fe().setInstance(I,k),a.push({name:st,params:{instanceid:I}})},m=()=>{const S=Ot().ecorePackage.eFactoryInstance,E=Tt(n.data.instance),k=S.createEReferenceFromContainer(E),I=i.rnd();Fe().setInstance(I,k),a.push({name:st,params:{instanceid:I}})},y=()=>{const S=Ot().ecorePackage.eFactoryInstance,E=Tt(n.data.instance),k=S.createEAnnotationFromContainer(E),I=i.rnd();Fe().setInstance(I,k),a.push({name:st,params:{instanceid:I}})},_=S=>{a.push({name:st,params:{instanceid:S}})};return(S,E)=>(W(),ne("div",null,[he(H(Ol),{"is-visible":S.data.toolbarVisible,position:S.data.toolbarPosition},{default:$e(()=>[ce("button",{class:"prim",onClick:y},"+ EAnnotation"),ce("button",{class:"prim",onClick:g}," + EOperation"),ce("button",{class:"prim",onClick:p},"+ EAttribute"),ce("button",{class:"prim",onClick:m},"+ EReference")]),_:1},8,["is-visible","position"]),he(H(zl),{style:{overflow:"hidden"}},{header:$e(()=>[ce("div",Z1,[ce("h2",null,Oe(c.value),1),j1,Yi(" "+Oe(n.id),1)])]),content:$e(()=>[(W(!0),ne(ze,null,zt(d.value,k=>{var I;return W(),ne("div",{class:Re(["attribute",{active:k.id==((I=H(u).params)==null?void 0:I.instanceid)}]),key:k.name,onClick:T=>{T.stopImmediatePropagation(),_(k.id??"")}},Oe(k.name)+" : "+Oe(k.type),11,Q1)}),128)),he(H(cs)),(W(!0),ne(ze,null,zt(f.value,k=>{var I;return W(),ne("div",{class:Re(["refrences",{active:k.id==((I=H(u).params)==null?void 0:I.instanceid)}]),key:k.name,onClick:T=>{T.stopImmediatePropagation(),_(k.id??"")}},[Yi(Oe(k.name)+" : "+Oe(k.aclass)+" ",1),he(H(Kt),{id:k.name,type:"source",position:H(Q).Right,style:{"{position":"absolute",right:"-18px"}},null,8,["id","position"])],10,J1)}),128)),he(H(cs)),(W(!0),ne(ze,null,zt(h.value,k=>{var I;return W(),ne("div",{class:Re(["operation",{active:k.id==((I=H(u).params)==null?void 0:I.instanceid)}]),key:k.name,onClick:T=>{T.stopImmediatePropagation(),_(k.id??"")}},Oe(k.name)+"() : "+Oe(k.type),11,ew)}),128))]),_:1}),he(H(Kt),{type:"target",position:H(Q).Bottom},null,8,["position"]),he(H(Kt),{type:"source",id:n.id,position:H(Q).Top},null,8,["id","position"])]))}}),nw=e=>(ad("data-v-f64e1e55"),e=e(),ud(),e),rw={class:"sidebar margin"},iw=nw(()=>ce("div",{style:{height:"25px"}},null,-1)),ow=pe({__name:"Tree",setup(e){const t=new jr({length:10});de([{separator:!0},{label:"no items",items:[]}]);const{store:n,efc:r}=Ot(),{instances:i,identify:o,getInstance:s}=Fe(),a=Ja(),u=te(()=>{let d=[],h=[];const f=(g,m)=>{for(let y of g){if(y.key===m)return y;{let _=f(y.children,m);if(_)return _}}},p=g=>{let m=s(g);if(m){let y="",_=m.eClass().name;try{y=m.eGet(m.eClass().getEStructuralFeatureFromName("name"))}catch(E){console.log(E)}const S=o(s(g).eContainer());if(S){const E=f(d,S);if(E)E.children.push({key:g,label:y||g,type:_,children:[]});else return g}else{d.push({key:g,label:y||g,type:_,children:[]});return}}};for(Array.from(i.value.keys()).forEach(g=>{h.push(g)});h.length!=0;){const g=h.shift(),m=p(g);m&&h.push(m)}return d}),l=()=>{const d=r.createEPackage();console.log(d);const h=t.rnd();Fe().setInstance(h,d),ds.push({name:st,params:{instanceid:h}})},c=te({get:()=>{if(a.params.instanceid){const d={};return d[a.params.instanceid]=!0,d}else return},set:d=>{console.log(Object.keys(d)[0]),ds.push({name:st,params:{instanceid:Object.keys(d)[0]}})}});return(d,h)=>(W(),ne("div",rw,[iw,ce("button",{onClick:l},"+ EPackage"),he(H(Wc),{value:u.value,filter:!0,filterMode:"lenient",selectionKeys:c.value,"onUpdate:selectionKeys":h[0]||(h[0]=f=>c.value=f),selectionMode:"single",class:"w-full md:w-[30rem]"},{nodeicon:$e(f=>[ce("div",{class:Re(["icon",f.node.type])},Oe(f.node.type=="EAnnotation"?"@":f.node.type.substring(1,2)),3)]),_:1},8,["value","selectionKeys"])]))}}),sw=qc(ow,[["__scopeId","data-v-f64e1e55"]]);var aw="\0",Gt="\0",ba="";let uw=class{constructor(t){Ne(this,"_isDirected",!0);Ne(this,"_isMultigraph",!1);Ne(this,"_isCompound",!1);Ne(this,"_label");Ne(this,"_defaultNodeLabelFn",()=>{});Ne(this,"_defaultEdgeLabelFn",()=>{});Ne(this,"_nodes",{});Ne(this,"_in",{});Ne(this,"_preds",{});Ne(this,"_out",{});Ne(this,"_sucs",{});Ne(this,"_edgeObjs",{});Ne(this,"_edgeLabels",{});Ne(this,"_nodeCount",0);Ne(this,"_edgeCount",0);Ne(this,"_parent");Ne(this,"_children");t&&(this._isDirected=Object.hasOwn(t,"directed")?t.directed:!0,this._isMultigraph=Object.hasOwn(t,"multigraph")?t.multigraph:!1,this._isCompound=Object.hasOwn(t,"compound")?t.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[Gt]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(t){return this._label=t,this}graph(){return this._label}setDefaultNodeLabel(t){return this._defaultNodeLabelFn=t,typeof t!="function"&&(this._defaultNodeLabelFn=()=>t),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var t=this;return this.nodes().filter(n=>Object.keys(t._in[n]).length===0)}sinks(){var t=this;return this.nodes().filter(n=>Object.keys(t._out[n]).length===0)}setNodes(t,n){var r=arguments,i=this;return t.forEach(function(o){r.length>1?i.setNode(o,n):i.setNode(o)}),this}setNode(t,n){return Object.hasOwn(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=n),this):(this._nodes[t]=arguments.length>1?n:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=Gt,this._children[t]={},this._children[Gt][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)}node(t){return this._nodes[t]}hasNode(t){return Object.hasOwn(this._nodes,t)}removeNode(t){var n=this;if(Object.hasOwn(this._nodes,t)){var r=i=>n.removeEdge(n._edgeObjs[i]);delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],this.children(t).forEach(function(i){n.setParent(i)}),delete this._children[t]),Object.keys(this._in[t]).forEach(r),delete this._in[t],delete this._preds[t],Object.keys(this._out[t]).forEach(r),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this}setParent(t,n){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(n===void 0)n=Gt;else{n+="";for(var r=n;r!==void 0;r=this.parent(r))if(r===t)throw new Error("Setting "+n+" as parent of "+t+" would create a cycle");this.setNode(n)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=n,this._children[n][t]=!0,this}_removeFromParentsChildList(t){delete this._children[this._parent[t]][t]}parent(t){if(this._isCompound){var n=this._parent[t];if(n!==Gt)return n}}children(t=Gt){if(this._isCompound){var n=this._children[t];if(n)return Object.keys(n)}else{if(t===Gt)return this.nodes();if(this.hasNode(t))return[]}}predecessors(t){var n=this._preds[t];if(n)return Object.keys(n)}successors(t){var n=this._sucs[t];if(n)return Object.keys(n)}neighbors(t){var n=this.predecessors(t);if(n){const i=new Set(n);for(var r of this.successors(t))i.add(r);return Array.from(i.values())}}isLeaf(t){var n;return this.isDirected()?n=this.successors(t):n=this.neighbors(t),n.length===0}filterNodes(t){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var r=this;Object.entries(this._nodes).forEach(function([s,a]){t(s)&&n.setNode(s,a)}),Object.values(this._edgeObjs).forEach(function(s){n.hasNode(s.v)&&n.hasNode(s.w)&&n.setEdge(s,r.edge(s))});var i={};function o(s){var a=r.parent(s);return a===void 0||n.hasNode(a)?(i[s]=a,a):a in i?i[a]:o(a)}return this._isCompound&&n.nodes().forEach(s=>n.setParent(s,o(s))),n}setDefaultEdgeLabel(t){return this._defaultEdgeLabelFn=t,typeof t!="function"&&(this._defaultEdgeLabelFn=()=>t),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(t,n){var r=this,i=arguments;return t.reduce(function(o,s){return i.length>1?r.setEdge(o,s,n):r.setEdge(o,s),s}),this}setEdge(){var t,n,r,i,o=!1,s=arguments[0];typeof s=="object"&&s!==null&&"v"in s?(t=s.v,n=s.w,r=s.name,arguments.length===2&&(i=arguments[1],o=!0)):(t=s,n=arguments[1],r=arguments[3],arguments.length>2&&(i=arguments[2],o=!0)),t=""+t,n=""+n,r!==void 0&&(r=""+r);var a=Pn(this._isDirected,t,n,r);if(Object.hasOwn(this._edgeLabels,a))return o&&(this._edgeLabels[a]=i),this;if(r!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(n),this._edgeLabels[a]=o?i:this._defaultEdgeLabelFn(t,n,r);var u=lw(this._isDirected,t,n,r);return t=u.v,n=u.w,Object.freeze(u),this._edgeObjs[a]=u,Ea(this._preds[n],t),Ea(this._sucs[t],n),this._in[n][a]=u,this._out[t][a]=u,this._edgeCount++,this}edge(t,n,r){var i=arguments.length===1?Oi(this._isDirected,arguments[0]):Pn(this._isDirected,t,n,r);return this._edgeLabels[i]}edgeAsObj(){const t=this.edge(...arguments);return typeof t!="object"?{label:t}:t}hasEdge(t,n,r){var i=arguments.length===1?Oi(this._isDirected,arguments[0]):Pn(this._isDirected,t,n,r);return Object.hasOwn(this._edgeLabels,i)}removeEdge(t,n,r){var i=arguments.length===1?Oi(this._isDirected,arguments[0]):Pn(this._isDirected,t,n,r),o=this._edgeObjs[i];return o&&(t=o.v,n=o.w,delete this._edgeLabels[i],delete this._edgeObjs[i],xa(this._preds[n],t),xa(this._sucs[t],n),delete this._in[n][i],delete this._out[t][i],this._edgeCount--),this}inEdges(t,n){var r=this._in[t];if(r){var i=Object.values(r);return n?i.filter(o=>o.v===n):i}}outEdges(t,n){var r=this._out[t];if(r){var i=Object.values(r);return n?i.filter(o=>o.w===n):i}}nodeEdges(t,n){var r=this.inEdges(t,n);if(r)return r.concat(this.outEdges(t,n))}};function Ea(e,t){e[t]?e[t]++:e[t]=1}function xa(e,t){--e[t]||delete e[t]}function Pn(e,t,n,r){var i=""+t,o=""+n;if(!e&&i>o){var s=i;i=o,o=s}return i+ba+o+ba+(r===void 0?aw:r)}function lw(e,t,n,r){var i=""+t,o=""+n;if(!e&&i>o){var s=i;i=o,o=s}var a={v:i,w:o};return r&&(a.name=r),a}function Oi(e,t){return Pn(e,t.v,t.w,t.name)}var jo=uw,cw="2.2.4",dw={Graph:jo,version:cw},hw=jo,fw={write:pw,read:mw};function pw(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:gw(e),edges:vw(e)};return e.graph()!==void 0&&(t.value=structuredClone(e.graph())),t}function gw(e){return e.nodes().map(function(t){var n=e.node(t),r=e.parent(t),i={v:t};return n!==void 0&&(i.value=n),r!==void 0&&(i.parent=r),i})}function vw(e){return e.edges().map(function(t){var n=e.edge(t),r={v:t.v,w:t.w};return t.name!==void 0&&(r.name=t.name),n!==void 0&&(r.value=n),r})}function mw(e){var t=new hw(e.options).setGraph(e.value);return e.nodes.forEach(function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),e.edges.forEach(function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}var yw=_w;function _w(e){var t={},n=[],r;function i(o){Object.hasOwn(t,o)||(t[o]=!0,r.push(o),e.successors(o).forEach(i),e.predecessors(o).forEach(i))}return e.nodes().forEach(function(o){r=[],i(o),r.length&&n.push(r)}),n}let ww=class{constructor(){Ne(this,"_arr",[]);Ne(this,"_keyIndices",{})}size(){return this._arr.length}keys(){return this._arr.map(function(t){return t.key})}has(t){return Object.hasOwn(this._keyIndices,t)}priority(t){var n=this._keyIndices[t];if(n!==void 0)return this._arr[n].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(t,n){var r=this._keyIndices;if(t=String(t),!Object.hasOwn(r,t)){var i=this._arr,o=i.length;return r[t]=o,i.push({key:t,priority:n}),this._decrease(o),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key}decrease(t,n){var r=this._keyIndices[t];if(n>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[r].priority+" New: "+n);this._arr[r].priority=n,this._decrease(r)}_heapify(t){var n=this._arr,r=2*t,i=r+1,o=t;r<n.length&&(o=n[r].priority<n[o].priority?r:o,i<n.length&&(o=n[i].priority<n[o].priority?i:o),o!==t&&(this._swap(t,o),this._heapify(o)))}_decrease(t){for(var n=this._arr,r=n[t].priority,i;t!==0&&(i=t>>1,!(n[i].priority<r));)this._swap(t,i),t=i}_swap(t,n){var r=this._arr,i=this._keyIndices,o=r[t],s=r[n];r[t]=s,r[n]=o,i[s.key]=t,i[o.key]=n}};var Dl=ww,bw=Dl,Ll=xw,Ew=()=>1;function xw(e,t,n,r){return Sw(e,String(t),n||Ew,r||function(i){return e.outEdges(i)})}function Sw(e,t,n,r){var i={},o=new bw,s,a,u=function(l){var c=l.v!==s?l.v:l.w,d=i[c],h=n(l),f=a.distance+h;if(h<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+l+" Weight: "+h);f<d.distance&&(d.distance=f,d.predecessor=s,o.decrease(c,f))};for(e.nodes().forEach(function(l){var c=l===t?0:Number.POSITIVE_INFINITY;i[l]={distance:c},o.add(l,c)});o.size()>0&&(s=o.removeMin(),a=i[s],a.distance!==Number.POSITIVE_INFINITY);)r(s).forEach(u);return i}var kw=Ll,$w=Nw;function Nw(e,t,n){return e.nodes().reduce(function(r,i){return r[i]=kw(e,i,t,n),r},{})}var Rl=Cw;function Cw(e){var t=0,n=[],r={},i=[];function o(s){var a=r[s]={onStack:!0,lowlink:t,index:t++};if(n.push(s),e.successors(s).forEach(function(c){Object.hasOwn(r,c)?r[c].onStack&&(a.lowlink=Math.min(a.lowlink,r[c].index)):(o(c),a.lowlink=Math.min(a.lowlink,r[c].lowlink))}),a.lowlink===a.index){var u=[],l;do l=n.pop(),r[l].onStack=!1,u.push(l);while(s!==l);i.push(u)}}return e.nodes().forEach(function(s){Object.hasOwn(r,s)||o(s)}),i}var Mw=Rl,Iw=Pw;function Pw(e){return Mw(e).filter(function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})}var Aw=Ow,Tw=()=>1;function Ow(e,t,n){return zw(e,t||Tw,n||function(r){return e.outEdges(r)})}function zw(e,t,n){var r={},i=e.nodes();return i.forEach(function(o){r[o]={},r[o][o]={distance:0},i.forEach(function(s){o!==s&&(r[o][s]={distance:Number.POSITIVE_INFINITY})}),n(o).forEach(function(s){var a=s.v===o?s.w:s.v,u=t(s);r[o][a]={distance:u,predecessor:o}})}),i.forEach(function(o){var s=r[o];i.forEach(function(a){var u=r[a];i.forEach(function(l){var c=u[o],d=s[l],h=u[l],f=c.distance+d.distance;f<h.distance&&(h.distance=f,h.predecessor=d.predecessor)})})}),r}function Bl(e){var t={},n={},r=[];function i(o){if(Object.hasOwn(n,o))throw new yo;Object.hasOwn(t,o)||(n[o]=!0,t[o]=!0,e.predecessors(o).forEach(i),delete n[o],r.push(o))}if(e.sinks().forEach(i),Object.keys(t).length!==e.nodeCount())throw new yo;return r}class yo extends Error{constructor(){super(...arguments)}}var Vl=Bl;Bl.CycleException=yo;var Sa=Vl,Dw=Lw;function Lw(e){try{Sa(e)}catch(t){if(t instanceof Sa.CycleException)return!1;throw t}return!0}var Gl=Rw;function Rw(e,t,n){Array.isArray(t)||(t=[t]);var r=e.isDirected()?a=>e.successors(a):a=>e.neighbors(a),i=n==="post"?Bw:Vw,o=[],s={};return t.forEach(a=>{if(!e.hasNode(a))throw new Error("Graph does not have node: "+a);i(a,r,s,o)}),o}function Bw(e,t,n,r){for(var i=[[e,!1]];i.length>0;){var o=i.pop();o[1]?r.push(o[0]):Object.hasOwn(n,o[0])||(n[o[0]]=!0,i.push([o[0],!0]),Fl(t(o[0]),s=>i.push([s,!1])))}}function Vw(e,t,n,r){for(var i=[e];i.length>0;){var o=i.pop();Object.hasOwn(n,o)||(n[o]=!0,r.push(o),Fl(t(o),s=>i.push(s)))}}function Fl(e,t){for(var n=e.length;n--;)t(e[n],n,e);return e}var Gw=Gl,Fw=Hw;function Hw(e,t){return Gw(e,t,"post")}var Yw=Gl,Xw=Uw;function Uw(e,t){return Yw(e,t,"pre")}var Ww=jo,qw=Dl,Kw=Zw;function Zw(e,t){var n=new Ww,r={},i=new qw,o;function s(u){var l=u.v===o?u.w:u.v,c=i.priority(l);if(c!==void 0){var d=t(u);d<c&&(r[l]=o,i.decrease(l,d))}}if(e.nodeCount()===0)return n;e.nodes().forEach(function(u){i.add(u,Number.POSITIVE_INFINITY),n.setNode(u)}),i.decrease(e.nodes()[0],0);for(var a=!1;i.size()>0;){if(o=i.removeMin(),Object.hasOwn(r,o))n.setEdge(o,r[o]);else{if(a)throw new Error("Input graph is not connected: "+e);a=!0}e.nodeEdges(o).forEach(s)}return n}var jw={components:yw,dijkstra:Ll,dijkstraAll:$w,findCycles:Iw,floydWarshall:Aw,isAcyclic:Dw,postorder:Fw,preorder:Xw,prim:Kw,tarjan:Rl,topsort:Vl},ka=dw,nt={Graph:ka.Graph,json:fw,alg:jw,version:ka.version};let Qw=class{constructor(){let t={};t._next=t._prev=t,this._sentinel=t}dequeue(){let t=this._sentinel,n=t._prev;if(n!==t)return $a(n),n}enqueue(t){let n=this._sentinel;t._prev&&t._next&&$a(t),t._next=n._next,n._next._prev=t,n._next=t,t._prev=n}toString(){let t=[],n=this._sentinel,r=n._prev;for(;r!==n;)t.push(JSON.stringify(r,Jw)),r=r._prev;return"["+t.join(", ")+"]"}};function $a(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function Jw(e,t){if(e!=="_next"&&e!=="_prev")return t}var eb=Qw;let tb=nt.Graph,nb=eb;var rb=ob;let ib=()=>1;function ob(e,t){if(e.nodeCount()<=1)return[];let n=ab(e,t||ib);return sb(n.graph,n.buckets,n.zeroIdx).flatMap(i=>e.outEdges(i.v,i.w))}function sb(e,t,n){let r=[],i=t[t.length-1],o=t[0],s;for(;e.nodeCount();){for(;s=o.dequeue();)zi(e,t,n,s);for(;s=i.dequeue();)zi(e,t,n,s);if(e.nodeCount()){for(let a=t.length-2;a>0;--a)if(s=t[a].dequeue(),s){r=r.concat(zi(e,t,n,s,!0));break}}}return r}function zi(e,t,n,r,i){let o=i?[]:void 0;return e.inEdges(r.v).forEach(s=>{let a=e.edge(s),u=e.node(s.v);i&&o.push({v:s.v,w:s.w}),u.out-=a,_o(t,n,u)}),e.outEdges(r.v).forEach(s=>{let a=e.edge(s),u=s.w,l=e.node(u);l.in-=a,_o(t,n,l)}),e.removeNode(r.v),o}function ab(e,t){let n=new tb,r=0,i=0;e.nodes().forEach(a=>{n.setNode(a,{v:a,in:0,out:0})}),e.edges().forEach(a=>{let u=n.edge(a.v,a.w)||0,l=t(a),c=u+l;n.setEdge(a.v,a.w,c),i=Math.max(i,n.node(a.v).out+=l),r=Math.max(r,n.node(a.w).in+=l)});let o=ub(i+r+3).map(()=>new nb),s=r+1;return n.nodes().forEach(a=>{_o(o,s,n.node(a))}),{graph:n,buckets:o,zeroIdx:s}}function _o(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}function ub(e){const t=[];for(let n=0;n<e;n++)t.push(n);return t}let Hl=nt.Graph;var Ie={addBorderNode:mb,addDummyNode:Yl,applyWithChunking:pi,asNonCompoundGraph:cb,buildLayerMatrix:pb,intersectRect:fb,mapValues:Sb,maxRank:Ul,normalizeRanks:gb,notime:bb,partition:_b,pick:xb,predecessorWeights:hb,range:ql,removeEmptyRanks:vb,simplify:lb,successorWeights:db,time:wb,uniqueId:Wl,zipObject:Qo};function Yl(e,t,n,r){let i;do i=Wl(r);while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i}function lb(e){let t=new Hl().setGraph(e.graph());return e.nodes().forEach(n=>t.setNode(n,e.node(n))),e.edges().forEach(n=>{let r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),t}function cb(e){let t=new Hl({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{e.children(n).length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdge(n,e.edge(n))}),t}function db(e){let t=e.nodes().map(n=>{let r={};return e.outEdges(n).forEach(i=>{r[i.w]=(r[i.w]||0)+e.edge(i).weight}),r});return Qo(e.nodes(),t)}function hb(e){let t=e.nodes().map(n=>{let r={};return e.inEdges(n).forEach(i=>{r[i.v]=(r[i.v]||0)+e.edge(i).weight}),r});return Qo(e.nodes(),t)}function fb(e,t){let n=e.x,r=e.y,i=t.x-n,o=t.y-r,s=e.width/2,a=e.height/2;if(!i&&!o)throw new Error("Not possible to find intersection inside of the rectangle");let u,l;return Math.abs(o)*s>Math.abs(i)*a?(o<0&&(a=-a),u=a*i/o,l=a):(i<0&&(s=-s),u=s,l=s*o/i),{x:n+u,y:r+l}}function pb(e){let t=ql(Ul(e)+1).map(()=>[]);return e.nodes().forEach(n=>{let r=e.node(n),i=r.rank;i!==void 0&&(t[i][r.order]=n)}),t}function gb(e){let t=e.nodes().map(r=>{let i=e.node(r).rank;return i===void 0?Number.MAX_VALUE:i}),n=pi(Math.min,t);e.nodes().forEach(r=>{let i=e.node(r);Object.hasOwn(i,"rank")&&(i.rank-=n)})}function vb(e){let t=e.nodes().map(s=>e.node(s).rank),n=pi(Math.min,t),r=[];e.nodes().forEach(s=>{let a=e.node(s).rank-n;r[a]||(r[a]=[]),r[a].push(s)});let i=0,o=e.graph().nodeRankFactor;Array.from(r).forEach((s,a)=>{s===void 0&&a%o!==0?--i:s!==void 0&&i&&s.forEach(u=>e.node(u).rank+=i)})}function mb(e,t,n,r){let i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),Yl(e,"border",i,t)}function yb(e,t=Xl){const n=[];for(let r=0;r<e.length;r+=t){const i=e.slice(r,r+t);n.push(i)}return n}const Xl=65535;function pi(e,t){if(t.length>Xl){const n=yb(t);return e.apply(null,n.map(r=>e.apply(null,r)))}else return e.apply(null,t)}function Ul(e){const n=e.nodes().map(r=>{let i=e.node(r).rank;return i===void 0?Number.MIN_VALUE:i});return pi(Math.max,n)}function _b(e,t){let n={lhs:[],rhs:[]};return e.forEach(r=>{t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function wb(e,t){let n=Date.now();try{return t()}finally{console.log(e+" time: "+(Date.now()-n)+"ms")}}function bb(e,t){return t()}let Eb=0;function Wl(e){var t=++Eb;return toString(e)+t}function ql(e,t,n=1){t==null&&(t=e,e=0);let r=o=>o<t;n<0&&(r=o=>t<o);const i=[];for(let o=e;r(o);o+=n)i.push(o);return i}function xb(e,t){const n={};for(const r of t)e[r]!==void 0&&(n[r]=e[r]);return n}function Sb(e,t){let n=t;return typeof t=="string"&&(n=r=>r[t]),Object.entries(e).reduce((r,[i,o])=>(r[i]=n(o,i),r),{})}function Qo(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}let kb=rb,$b=Ie.uniqueId;var Nb={run:Cb,undo:Ib};function Cb(e){(e.graph().acyclicer==="greedy"?kb(e,n(e)):Mb(e)).forEach(r=>{let i=e.edge(r);e.removeEdge(r),i.forwardName=r.name,i.reversed=!0,e.setEdge(r.w,r.v,i,$b("rev"))});function n(r){return i=>r.edge(i).weight}}function Mb(e){let t=[],n={},r={};function i(o){Object.hasOwn(r,o)||(r[o]=!0,n[o]=!0,e.outEdges(o).forEach(s=>{Object.hasOwn(n,s.w)?t.push(s):i(s.w)}),delete n[o])}return e.nodes().forEach(i),t}function Ib(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.reversed){e.removeEdge(t);let r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}let Pb=Ie;var Ab={run:Tb,undo:zb};function Tb(e){e.graph().dummyChains=[],e.edges().forEach(t=>Ob(e,t))}function Ob(e,t){let n=t.v,r=e.node(n).rank,i=t.w,o=e.node(i).rank,s=t.name,a=e.edge(t),u=a.labelRank;if(o===r+1)return;e.removeEdge(t);let l,c,d;for(d=0,++r;r<o;++d,++r)a.points=[],c={width:0,height:0,edgeLabel:a,edgeObj:t,rank:r},l=Pb.addDummyNode(e,"edge",c,"_d"),r===u&&(c.width=a.width,c.height=a.height,c.dummy="edge-label",c.labelpos=a.labelpos),e.setEdge(n,l,{weight:a.weight},s),d===0&&e.graph().dummyChains.push(l),n=l;e.setEdge(n,i,{weight:a.weight},s)}function zb(e){e.graph().dummyChains.forEach(t=>{let n=e.node(t),r=n.edgeLabel,i;for(e.setEdge(n.edgeObj,r);n.dummy;)i=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=i,n=e.node(t)})}const{applyWithChunking:Db}=Ie;var gi={longestPath:Lb,slack:Rb};function Lb(e){var t={};function n(r){var i=e.node(r);if(Object.hasOwn(t,r))return i.rank;t[r]=!0;let o=e.outEdges(r).map(a=>a==null?Number.POSITIVE_INFINITY:n(a.w)-e.edge(a).minlen);var s=Db(Math.min,o);return s===Number.POSITIVE_INFINITY&&(s=0),i.rank=s}e.sources().forEach(n)}function Rb(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var Bb=nt.Graph,Wr=gi.slack,Kl=Vb;function Vb(e){var t=new Bb({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var i,o;Gb(t,e)<r;)i=Fb(t,e),o=t.hasNode(i.v)?Wr(e,i):-Wr(e,i),Hb(t,e,o);return t}function Gb(e,t){function n(r){t.nodeEdges(r).forEach(i=>{var o=i.v,s=r===o?i.w:o;!e.hasNode(s)&&!Wr(t,i)&&(e.setNode(s,{}),e.setEdge(r,s,{}),n(s))})}return e.nodes().forEach(n),e.nodeCount()}function Fb(e,t){return t.edges().reduce((r,i)=>{let o=Number.POSITIVE_INFINITY;return e.hasNode(i.v)!==e.hasNode(i.w)&&(o=Wr(t,i)),o<r[0]?[o,i]:r},[Number.POSITIVE_INFINITY,null])[1]}function Hb(e,t,n){e.nodes().forEach(r=>t.node(r).rank+=n)}var Yb=Kl,Na=gi.slack,Xb=gi.longestPath,Ub=nt.alg.preorder,Wb=nt.alg.postorder,qb=Ie.simplify,Kb=nn;nn.initLowLimValues=es;nn.initCutValues=Jo;nn.calcCutValue=Zl;nn.leaveEdge=Ql;nn.enterEdge=Jl;nn.exchangeEdges=ec;function nn(e){e=qb(e),Xb(e);var t=Yb(e);es(t),Jo(t,e);for(var n,r;n=Ql(t);)r=Jl(t,e,n),ec(t,e,n,r)}function Jo(e,t){var n=Wb(e,e.nodes());n=n.slice(0,n.length-1),n.forEach(r=>Zb(e,t,r))}function Zb(e,t,n){var r=e.node(n),i=r.parent;e.edge(n,i).cutvalue=Zl(e,t,n)}function Zl(e,t,n){var r=e.node(n),i=r.parent,o=!0,s=t.edge(n,i),a=0;return s||(o=!1,s=t.edge(i,n)),a=s.weight,t.nodeEdges(n).forEach(u=>{var l=u.v===n,c=l?u.w:u.v;if(c!==i){var d=l===o,h=t.edge(u).weight;if(a+=d?h:-h,Qb(e,n,c)){var f=e.edge(n,c).cutvalue;a+=d?-f:f}}}),a}function es(e,t){arguments.length<2&&(t=e.nodes()[0]),jl(e,{},1,t)}function jl(e,t,n,r,i){var o=n,s=e.node(r);return t[r]=!0,e.neighbors(r).forEach(a=>{Object.hasOwn(t,a)||(n=jl(e,t,n,a,r))}),s.low=o,s.lim=n++,i?s.parent=i:delete s.parent,n}function Ql(e){return e.edges().find(t=>e.edge(t).cutvalue<0)}function Jl(e,t,n){var r=n.v,i=n.w;t.hasEdge(r,i)||(r=n.w,i=n.v);var o=e.node(r),s=e.node(i),a=o,u=!1;o.lim>s.lim&&(a=s,u=!0);var l=t.edges().filter(c=>u===Ca(e,e.node(c.v),a)&&u!==Ca(e,e.node(c.w),a));return l.reduce((c,d)=>Na(t,d)<Na(t,c)?d:c)}function ec(e,t,n,r){var i=n.v,o=n.w;e.removeEdge(i,o),e.setEdge(r.v,r.w,{}),es(e),Jo(e,t),jb(e,t)}function jb(e,t){var n=e.nodes().find(i=>!t.node(i).parent),r=Ub(e,n);r=r.slice(1),r.forEach(i=>{var o=e.node(i).parent,s=t.edge(i,o),a=!1;s||(s=t.edge(o,i),a=!0),t.node(i).rank=t.node(o).rank+(a?s.minlen:-s.minlen)})}function Qb(e,t,n){return e.hasEdge(t,n)}function Ca(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var Jb=gi,tc=Jb.longestPath,eE=Kl,tE=Kb,nE=rE;function rE(e){switch(e.graph().ranker){case"network-simplex":Ma(e);break;case"tight-tree":oE(e);break;case"longest-path":iE(e);break;default:Ma(e)}}var iE=tc;function oE(e){tc(e),eE(e)}function Ma(e){tE(e)}var sE=aE;function aE(e){let t=lE(e);e.graph().dummyChains.forEach(n=>{let r=e.node(n),i=r.edgeObj,o=uE(e,t,i.v,i.w),s=o.path,a=o.lca,u=0,l=s[u],c=!0;for(;n!==i.w;){if(r=e.node(n),c){for(;(l=s[u])!==a&&e.node(l).maxRank<r.rank;)u++;l===a&&(c=!1)}if(!c){for(;u<s.length-1&&e.node(l=s[u+1]).minRank<=r.rank;)u++;l=s[u]}e.setParent(n,l),n=e.successors(n)[0]}})}function uE(e,t,n,r){let i=[],o=[],s=Math.min(t[n].low,t[r].low),a=Math.max(t[n].lim,t[r].lim),u,l;u=n;do u=e.parent(u),i.push(u);while(u&&(t[u].low>s||a>t[u].lim));for(l=u,u=r;(u=e.parent(u))!==l;)o.push(u);return{path:i.concat(o.reverse()),lca:l}}function lE(e){let t={},n=0;function r(i){let o=n;e.children(i).forEach(r),t[i]={low:o,lim:n++}}return e.children().forEach(r),t}let qr=Ie;var cE={run:dE,cleanup:pE};function dE(e){let t=qr.addDummyNode(e,"root",{},"_root"),n=hE(e),r=Object.values(n),i=qr.applyWithChunking(Math.max,r)-1,o=2*i+1;e.graph().nestingRoot=t,e.edges().forEach(a=>e.edge(a).minlen*=o);let s=fE(e)+1;e.children().forEach(a=>nc(e,t,o,s,i,n,a)),e.graph().nodeRankFactor=o}function nc(e,t,n,r,i,o,s){let a=e.children(s);if(!a.length){s!==t&&e.setEdge(t,s,{weight:0,minlen:n});return}let u=qr.addBorderNode(e,"_bt"),l=qr.addBorderNode(e,"_bb"),c=e.node(s);e.setParent(u,s),c.borderTop=u,e.setParent(l,s),c.borderBottom=l,a.forEach(d=>{nc(e,t,n,r,i,o,d);let h=e.node(d),f=h.borderTop?h.borderTop:d,p=h.borderBottom?h.borderBottom:d,g=h.borderTop?r:2*r,m=f!==p?1:i-o[s]+1;e.setEdge(u,f,{weight:g,minlen:m,nestingEdge:!0}),e.setEdge(p,l,{weight:g,minlen:m,nestingEdge:!0})}),e.parent(s)||e.setEdge(t,u,{weight:0,minlen:i+o[s]})}function hE(e){var t={};function n(r,i){var o=e.children(r);o&&o.length&&o.forEach(s=>n(s,i+1)),t[r]=i}return e.children().forEach(r=>n(r,1)),t}function fE(e){return e.edges().reduce((t,n)=>t+e.edge(n).weight,0)}function pE(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}let gE=Ie;var vE=mE;function mE(e){function t(n){let r=e.children(n),i=e.node(n);if(r.length&&r.forEach(t),Object.hasOwn(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(let o=i.minRank,s=i.maxRank+1;o<s;++o)Ia(e,"borderLeft","_bl",n,i,o),Ia(e,"borderRight","_br",n,i,o)}}e.children().forEach(t)}function Ia(e,t,n,r,i,o){let s={width:0,height:0,rank:o,borderType:t},a=i[t][o-1],u=gE.addDummyNode(e,"border",s,n);i[t][o]=u,e.setParent(u,r),a&&e.setEdge(a,u,{weight:1})}var yE={adjust:_E,undo:wE};function _E(e){let t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&rc(e)}function wE(e){let t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&bE(e),(t==="lr"||t==="rl")&&(EE(e),rc(e))}function rc(e){e.nodes().forEach(t=>Pa(e.node(t))),e.edges().forEach(t=>Pa(e.edge(t)))}function Pa(e){let t=e.width;e.width=e.height,e.height=t}function bE(e){e.nodes().forEach(t=>Di(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);n.points.forEach(Di),Object.hasOwn(n,"y")&&Di(n)})}function Di(e){e.y=-e.y}function EE(e){e.nodes().forEach(t=>Li(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);n.points.forEach(Li),Object.hasOwn(n,"x")&&Li(n)})}function Li(e){let t=e.x;e.x=e.y,e.y=t}let Aa=Ie;var xE=SE;function SE(e){let t={},n=e.nodes().filter(u=>!e.children(u).length),r=n.map(u=>e.node(u).rank),i=Aa.applyWithChunking(Math.max,r),o=Aa.range(i+1).map(()=>[]);function s(u){if(t[u])return;t[u]=!0;let l=e.node(u);o[l.rank].push(u),e.successors(u).forEach(s)}return n.sort((u,l)=>e.node(u).rank-e.node(l).rank).forEach(s),o}let kE=Ie.zipObject;var $E=NE;function NE(e,t){let n=0;for(let r=1;r<t.length;++r)n+=CE(e,t[r-1],t[r]);return n}function CE(e,t,n){let r=kE(n,n.map((l,c)=>c)),i=t.flatMap(l=>e.outEdges(l).map(c=>({pos:r[c.w],weight:e.edge(c).weight})).sort((c,d)=>c.pos-d.pos)),o=1;for(;o<n.length;)o<<=1;let s=2*o-1;o-=1;let a=new Array(s).fill(0),u=0;return i.forEach(l=>{let c=l.pos+o;a[c]+=l.weight;let d=0;for(;c>0;)c%2&&(d+=a[c+1]),c=c-1>>1,a[c]+=l.weight;u+=l.weight*d}),u}var ME=IE;function IE(e,t=[]){return t.map(n=>{let r=e.inEdges(n);if(r.length){let i=r.reduce((o,s)=>{let a=e.edge(s),u=e.node(s.v);return{sum:o.sum+a.weight*u.order,weight:o.weight+a.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}let PE=Ie;var AE=TE;function TE(e,t){let n={};e.forEach((i,o)=>{let s=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:o};i.barycenter!==void 0&&(s.barycenter=i.barycenter,s.weight=i.weight)}),t.edges().forEach(i=>{let o=n[i.v],s=n[i.w];o!==void 0&&s!==void 0&&(s.indegree++,o.out.push(n[i.w]))});let r=Object.values(n).filter(i=>!i.indegree);return OE(r)}function OE(e){let t=[];function n(i){return o=>{o.merged||(o.barycenter===void 0||i.barycenter===void 0||o.barycenter>=i.barycenter)&&zE(i,o)}}function r(i){return o=>{o.in.push(i),--o.indegree===0&&e.push(o)}}for(;e.length;){let i=e.pop();t.push(i),i.in.reverse().forEach(n(i)),i.out.forEach(r(i))}return t.filter(i=>!i.merged).map(i=>PE.pick(i,["vs","i","barycenter","weight"]))}function zE(e,t){let n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}let DE=Ie;var LE=RE;function RE(e,t){let n=DE.partition(e,c=>Object.hasOwn(c,"barycenter")),r=n.lhs,i=n.rhs.sort((c,d)=>d.i-c.i),o=[],s=0,a=0,u=0;r.sort(BE(!!t)),u=Ta(o,i,u),r.forEach(c=>{u+=c.vs.length,o.push(c.vs),s+=c.barycenter*c.weight,a+=c.weight,u=Ta(o,i,u)});let l={vs:o.flat(!0)};return a&&(l.barycenter=s/a,l.weight=a),l}function Ta(e,t,n){let r;for(;t.length&&(r=t[t.length-1]).i<=n;)t.pop(),e.push(r.vs),n++;return n}function BE(e){return(t,n)=>t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}let VE=ME,GE=AE,FE=LE;var HE=ic;function ic(e,t,n,r){let i=e.children(t),o=e.node(t),s=o?o.borderLeft:void 0,a=o?o.borderRight:void 0,u={};s&&(i=i.filter(h=>h!==s&&h!==a));let l=VE(e,i);l.forEach(h=>{if(e.children(h.v).length){let f=ic(e,h.v,n,r);u[h.v]=f,Object.hasOwn(f,"barycenter")&&XE(h,f)}});let c=GE(l,n);YE(c,u);let d=FE(c,r);if(s&&(d.vs=[s,d.vs,a].flat(!0),e.predecessors(s).length)){let h=e.node(e.predecessors(s)[0]),f=e.node(e.predecessors(a)[0]);Object.hasOwn(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+h.order+f.order)/(d.weight+2),d.weight+=2}return d}function YE(e,t){e.forEach(n=>{n.vs=n.vs.flatMap(r=>t[r]?t[r].vs:r)})}function XE(e,t){e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)}let UE=nt.Graph,WE=Ie;var qE=KE;function KE(e,t,n){let r=ZE(e),i=new UE({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(o=>e.node(o));return e.nodes().forEach(o=>{let s=e.node(o),a=e.parent(o);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(i.setNode(o),i.setParent(o,a||r),e[n](o).forEach(u=>{let l=u.v===o?u.w:u.v,c=i.edge(l,o),d=c!==void 0?c.weight:0;i.setEdge(l,o,{weight:e.edge(u).weight+d})}),Object.hasOwn(s,"minRank")&&i.setNode(o,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))}),i}function ZE(e){for(var t;e.hasNode(t=WE.uniqueId("_root")););return t}var jE=QE;function QE(e,t,n){let r={},i;n.forEach(o=>{let s=e.parent(o),a,u;for(;s;){if(a=e.parent(s),a?(u=r[a],r[a]=s):(u=i,i=s),u&&u!==s){t.setEdge(u,s);return}s=a}})}let JE=xE,ex=$E,tx=HE,nx=qE,rx=jE,ix=nt.Graph,gr=Ie;var ox=oc;function oc(e,t){if(t&&typeof t.customOrder=="function"){t.customOrder(e,oc);return}let n=gr.maxRank(e),r=Oa(e,gr.range(1,n+1),"inEdges"),i=Oa(e,gr.range(n-1,-1,-1),"outEdges"),o=JE(e);if(za(e,o),t&&t.disableOptimalOrderHeuristic)return;let s=Number.POSITIVE_INFINITY,a;for(let u=0,l=0;l<4;++u,++l){sx(u%2?r:i,u%4>=2),o=gr.buildLayerMatrix(e);let c=ex(e,o);c<s&&(l=0,a=Object.assign({},o),s=c)}za(e,a)}function Oa(e,t,n){return t.map(function(r){return nx(e,r,n)})}function sx(e,t){let n=new ix;e.forEach(function(r){let i=r.graph().root,o=tx(r,i,n,t);o.vs.forEach((s,a)=>r.node(s).order=a),rx(r,n,o.vs)})}function za(e,t){Object.values(t).forEach(n=>n.forEach((r,i)=>e.node(r).order=i))}let ax=nt.Graph,mt=Ie;var ux={positionX:dx,findType1Conflicts:sc,findType2Conflicts:ac,addConflict:ts,hasConflict:uc,verticalAlignment:lc,horizontalCompaction:cc,alignCoordinates:hc,findSmallestWidthAlignment:dc,balance:fc};function sc(e,t){let n={};function r(i,o){let s=0,a=0,u=i.length,l=o[o.length-1];return o.forEach((c,d)=>{let h=lx(e,c),f=h?e.node(h).order:u;(h||c===l)&&(o.slice(a,d+1).forEach(p=>{e.predecessors(p).forEach(g=>{let m=e.node(g),y=m.order;(y<s||f<y)&&!(m.dummy&&e.node(p).dummy)&&ts(n,g,p)})}),a=d+1,s=f)}),o}return t.length&&t.reduce(r),n}function ac(e,t){let n={};function r(o,s,a,u,l){let c;mt.range(s,a).forEach(d=>{c=o[d],e.node(c).dummy&&e.predecessors(c).forEach(h=>{let f=e.node(h);f.dummy&&(f.order<u||f.order>l)&&ts(n,h,c)})})}function i(o,s){let a=-1,u,l=0;return s.forEach((c,d)=>{if(e.node(c).dummy==="border"){let h=e.predecessors(c);h.length&&(u=e.node(h[0]).order,r(s,l,d,a,u),l=d,a=u)}r(s,l,s.length,u,o.length)}),s}return t.length&&t.reduce(i),n}function lx(e,t){if(e.node(t).dummy)return e.predecessors(t).find(n=>e.node(n).dummy)}function ts(e,t,n){if(t>n){let i=t;t=n,n=i}let r=e[t];r||(e[t]=r={}),r[n]=!0}function uc(e,t,n){if(t>n){let r=t;t=n,n=r}return!!e[t]&&Object.hasOwn(e[t],n)}function lc(e,t,n,r){let i={},o={},s={};return t.forEach(a=>{a.forEach((u,l)=>{i[u]=u,o[u]=u,s[u]=l})}),t.forEach(a=>{let u=-1;a.forEach(l=>{let c=r(l);if(c.length){c=c.sort((h,f)=>s[h]-s[f]);let d=(c.length-1)/2;for(let h=Math.floor(d),f=Math.ceil(d);h<=f;++h){let p=c[h];o[l]===l&&u<s[p]&&!uc(n,l,p)&&(o[p]=l,o[l]=i[l]=i[p],u=s[p])}}})}),{root:i,align:o}}function cc(e,t,n,r,i){let o={},s=cx(e,t,n,i),a=i?"borderLeft":"borderRight";function u(d,h){let f=s.nodes(),p=f.pop(),g={};for(;p;)g[p]?d(p):(g[p]=!0,f.push(p),f=f.concat(h(p))),p=f.pop()}function l(d){o[d]=s.inEdges(d).reduce((h,f)=>Math.max(h,o[f.v]+s.edge(f)),0)}function c(d){let h=s.outEdges(d).reduce((p,g)=>Math.min(p,o[g.w]-s.edge(g)),Number.POSITIVE_INFINITY),f=e.node(d);h!==Number.POSITIVE_INFINITY&&f.borderType!==a&&(o[d]=Math.max(o[d],h))}return u(l,s.predecessors.bind(s)),u(c,s.successors.bind(s)),Object.keys(r).forEach(d=>o[d]=o[n[d]]),o}function cx(e,t,n,r){let i=new ax,o=e.graph(),s=hx(o.nodesep,o.edgesep,r);return t.forEach(a=>{let u;a.forEach(l=>{let c=n[l];if(i.setNode(c),u){var d=n[u],h=i.edge(d,c);i.setEdge(d,c,Math.max(s(e,l,u),h||0))}u=l})}),i}function dc(e,t){return Object.values(t).reduce((n,r)=>{let i=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;Object.entries(r).forEach(([a,u])=>{let l=fx(e,a)/2;i=Math.max(u+l,i),o=Math.min(u-l,o)});const s=i-o;return s<n[0]&&(n=[s,r]),n},[Number.POSITIVE_INFINITY,null])[1]}function hc(e,t){let n=Object.values(t),r=mt.applyWithChunking(Math.min,n),i=mt.applyWithChunking(Math.max,n);["u","d"].forEach(o=>{["l","r"].forEach(s=>{let a=o+s,u=e[a];if(u===t)return;let l=Object.values(u),c=r-mt.applyWithChunking(Math.min,l);s!=="l"&&(c=i-mt.applyWithChunking(Math.max,l)),c&&(e[a]=mt.mapValues(u,d=>d+c))})})}function fc(e,t){return mt.mapValues(e.ul,(n,r)=>{if(t)return e[t.toLowerCase()][r];{let i=Object.values(e).map(o=>o[r]).sort((o,s)=>o-s);return(i[1]+i[2])/2}})}function dx(e){let t=mt.buildLayerMatrix(e),n=Object.assign(sc(e,t),ac(e,t)),r={},i;["u","d"].forEach(s=>{i=s==="u"?t:Object.values(t).reverse(),["l","r"].forEach(a=>{a==="r"&&(i=i.map(d=>Object.values(d).reverse()));let u=(s==="u"?e.predecessors:e.successors).bind(e),l=lc(e,i,n,u),c=cc(e,i,l.root,l.align,a==="r");a==="r"&&(c=mt.mapValues(c,d=>-d)),r[s+a]=c})});let o=dc(e,r);return hc(r,o),fc(r,e.graph().align)}function hx(e,t,n){return(r,i,o)=>{let s=r.node(i),a=r.node(o),u=0,l;if(u+=s.width/2,Object.hasOwn(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":l=-s.width/2;break;case"r":l=s.width/2;break}if(l&&(u+=n?l:-l),l=0,u+=(s.dummy?t:e)/2,u+=(a.dummy?t:e)/2,u+=a.width/2,Object.hasOwn(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":l=a.width/2;break;case"r":l=-a.width/2;break}return l&&(u+=n?l:-l),l=0,u}}function fx(e,t){return e.node(t).width}let pc=Ie,px=ux.positionX;var gx=vx;function vx(e){e=pc.asNonCompoundGraph(e),mx(e),Object.entries(px(e)).forEach(([t,n])=>e.node(t).x=n)}function mx(e){let t=pc.buildLayerMatrix(e),n=e.graph().ranksep,r=0;t.forEach(i=>{const o=i.reduce((s,a)=>{const u=e.node(a).height;return s>u?s:u},0);i.forEach(s=>e.node(s).y=r+o/2),r+=o+n})}let Da=Nb,La=Ab,yx=nE,_x=Ie.normalizeRanks,wx=sE,bx=Ie.removeEmptyRanks,Ra=cE,Ex=vE,Ba=yE,xx=ox,Sx=gx,Ke=Ie,kx=nt.Graph;var $x=Nx;function Nx(e,t){let n=t&&t.debugTiming?Ke.time:Ke.notime;n("layout",()=>{let r=n("  buildLayoutGraph",()=>Lx(e));n("  runLayout",()=>Cx(r,n,t)),n("  updateInputGraph",()=>Mx(e,r))})}function Cx(e,t,n){t("    makeSpaceForEdgeLabels",()=>Rx(e)),t("    removeSelfEdges",()=>Wx(e)),t("    acyclic",()=>Da.run(e)),t("    nestingGraph.run",()=>Ra.run(e)),t("    rank",()=>yx(Ke.asNonCompoundGraph(e))),t("    injectEdgeLabelProxies",()=>Bx(e)),t("    removeEmptyRanks",()=>bx(e)),t("    nestingGraph.cleanup",()=>Ra.cleanup(e)),t("    normalizeRanks",()=>_x(e)),t("    assignRankMinMax",()=>Vx(e)),t("    removeEdgeLabelProxies",()=>Gx(e)),t("    normalize.run",()=>La.run(e)),t("    parentDummyChains",()=>wx(e)),t("    addBorderSegments",()=>Ex(e)),t("    order",()=>xx(e,n)),t("    insertSelfEdges",()=>qx(e)),t("    adjustCoordinateSystem",()=>Ba.adjust(e)),t("    position",()=>Sx(e)),t("    positionSelfEdges",()=>Kx(e)),t("    removeBorderNodes",()=>Ux(e)),t("    normalize.undo",()=>La.undo(e)),t("    fixupEdgeLabelCoords",()=>Yx(e)),t("    undoCoordinateSystem",()=>Ba.undo(e)),t("    translateGraph",()=>Fx(e)),t("    assignNodeIntersects",()=>Hx(e)),t("    reversePoints",()=>Xx(e)),t("    acyclic.undo",()=>Da.undo(e))}function Mx(e,t){e.nodes().forEach(n=>{let r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,r.rank=i.rank,t.children(n).length&&(r.width=i.width,r.height=i.height))}),e.edges().forEach(n=>{let r=e.edge(n),i=t.edge(n);r.points=i.points,Object.hasOwn(i,"x")&&(r.x=i.x,r.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}let Ix=["nodesep","edgesep","ranksep","marginx","marginy"],Px={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Ax=["acyclicer","ranker","rankdir","align"],Tx=["width","height"],Va={width:0,height:0},Ox=["minlen","weight","width","height","labeloffset"],zx={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Dx=["labelpos"];function Lx(e){let t=new kx({multigraph:!0,compound:!0}),n=Bi(e.graph());return t.setGraph(Object.assign({},Px,Ri(n,Ix),Ke.pick(n,Ax))),e.nodes().forEach(r=>{let i=Bi(e.node(r));const o=Ri(i,Tx);Object.keys(Va).forEach(s=>{o[s]===void 0&&(o[s]=Va[s])}),t.setNode(r,o),t.setParent(r,e.parent(r))}),e.edges().forEach(r=>{let i=Bi(e.edge(r));t.setEdge(r,Object.assign({},zx,Ri(i,Ox),Ke.pick(i,Dx)))}),t}function Rx(e){let t=e.graph();t.ranksep/=2,e.edges().forEach(n=>{let r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function Bx(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.width&&n.height){let r=e.node(t.v),o={rank:(e.node(t.w).rank-r.rank)/2+r.rank,e:t};Ke.addDummyNode(e,"edge-proxy",o,"_ep")}})}function Vx(e){let t=0;e.nodes().forEach(n=>{let r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=Math.max(t,r.maxRank))}),e.graph().maxRank=t}function Gx(e){e.nodes().forEach(t=>{let n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function Fx(e){let t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,o=e.graph(),s=o.marginx||0,a=o.marginy||0;function u(l){let c=l.x,d=l.y,h=l.width,f=l.height;t=Math.min(t,c-h/2),n=Math.max(n,c+h/2),r=Math.min(r,d-f/2),i=Math.max(i,d+f/2)}e.nodes().forEach(l=>u(e.node(l))),e.edges().forEach(l=>{let c=e.edge(l);Object.hasOwn(c,"x")&&u(c)}),t-=s,r-=a,e.nodes().forEach(l=>{let c=e.node(l);c.x-=t,c.y-=r}),e.edges().forEach(l=>{let c=e.edge(l);c.points.forEach(d=>{d.x-=t,d.y-=r}),Object.hasOwn(c,"x")&&(c.x-=t),Object.hasOwn(c,"y")&&(c.y-=r)}),o.width=n-t+s,o.height=i-r+a}function Hx(e){e.edges().forEach(t=>{let n=e.edge(t),r=e.node(t.v),i=e.node(t.w),o,s;n.points?(o=n.points[0],s=n.points[n.points.length-1]):(n.points=[],o=i,s=r),n.points.unshift(Ke.intersectRect(r,o)),n.points.push(Ke.intersectRect(i,s))})}function Yx(e){e.edges().forEach(t=>{let n=e.edge(t);if(Object.hasOwn(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function Xx(e){e.edges().forEach(t=>{let n=e.edge(t);n.reversed&&n.points.reverse()})}function Ux(e){e.nodes().forEach(t=>{if(e.children(t).length){let n=e.node(t),r=e.node(n.borderTop),i=e.node(n.borderBottom),o=e.node(n.borderLeft[n.borderLeft.length-1]),s=e.node(n.borderRight[n.borderRight.length-1]);n.width=Math.abs(s.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}}),e.nodes().forEach(t=>{e.node(t).dummy==="border"&&e.removeNode(t)})}function Wx(e){e.edges().forEach(t=>{if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function qx(e){var t=Ke.buildLayerMatrix(e);t.forEach(n=>{var r=0;n.forEach((i,o)=>{var s=e.node(i);s.order=o+r,(s.selfEdges||[]).forEach(a=>{Ke.addDummyNode(e,"selfedge",{width:a.label.width,height:a.label.height,rank:s.rank,order:o+ ++r,e:a.e,label:a.label},"_se")}),delete s.selfEdges})})}function Kx(e){e.nodes().forEach(t=>{var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),i=r.x+r.width/2,o=r.y,s=n.x-i,a=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*s/3,y:o-a},{x:i+5*s/6,y:o-a},{x:i+s,y:o},{x:i+5*s/6,y:o+a},{x:i+2*s/3,y:o+a}],n.label.x=n.x,n.label.y=n.y}})}function Ri(e,t){return Ke.mapValues(Ke.pick(e,t),Number)}function Bi(e){var t={};return e&&Object.entries(e).forEach(([n,r])=>{typeof n=="string"&&(n=n.toLowerCase()),t[n]=r}),t}let Zx=Ie,jx=nt.Graph;var Qx={debugOrdering:Jx};function Jx(e){let t=Zx.buildLayerMatrix(e),n=new jx({compound:!0,multigraph:!0}).setGraph({});return e.nodes().forEach(r=>{n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),e.edges().forEach(r=>n.setEdge(r.v,r.w,{},r.name)),t.forEach((r,i)=>{let o="layer"+i;n.setNode(o,{rank:"same"}),r.reduce((s,a)=>(n.setEdge(s,a,{style:"invis"}),a))}),n}var eS="1.1.4",tS={graphlib:nt,layout:$x,debug:Qx,util:{time:Ie.time,notime:Ie.notime},version:eS};const nS=ld(tS);var gc={},vi={},_n={},xt={};Object.defineProperty(xt,"__esModule",{value:!0});var ns=function(){function e(t,n,r){this.source=t,this.target=n,this.type=r}return e}();xt.PowerEdge=ns;var vc=function(){function e(t,n,r,i){var o=this;if(this.linkAccessor=r,this.modules=new Array(t),this.roots=[],i)this.initModulesFromGroup(i);else{this.roots.push(new fn);for(var s=0;s<t;++s)this.roots[0].add(this.modules[s]=new An(s))}this.R=n.length,n.forEach(function(a){var u=o.modules[r.getSourceIndex(a)],l=o.modules[r.getTargetIndex(a)],c=r.getType(a);u.outgoing.add(c,l),l.incoming.add(c,u)})}return e.prototype.initModulesFromGroup=function(t){var n=new fn;this.roots.push(n);for(var r=0;r<t.leaves.length;++r){var i=t.leaves[r],o=new An(i.id);this.modules[i.id]=o,n.add(o)}if(t.groups)for(var s=0;s<t.groups.length;++s){var a=t.groups[s],u={};for(var l in a)l!=="leaves"&&l!=="groups"&&a.hasOwnProperty(l)&&(u[l]=a[l]);n.add(new An(-1-s,new Wn,new Wn,this.initModulesFromGroup(a),u))}return n},e.prototype.merge=function(t,n,r){r===void 0&&(r=0);var i=t.incoming.intersection(n.incoming),o=t.outgoing.intersection(n.outgoing),s=new fn;s.add(t),s.add(n);var a=new An(this.modules.length,o,i,s);this.modules.push(a);var u=function(l,c,d){l.forAll(function(h,f){h.forAll(function(p){var g=p[c];g.add(f,a),g.remove(f,t),g.remove(f,n),t[d].remove(f,p),n[d].remove(f,p)})})};return u(o,"incoming","outgoing"),u(i,"outgoing","incoming"),this.R-=i.count()+o.count(),this.roots[r].remove(t),this.roots[r].remove(n),this.roots[r].add(a),a},e.prototype.rootMerges=function(t){t===void 0&&(t=0);for(var n=this.roots[t].modules(),r=n.length,i=new Array(r*(r-1)),o=0,s=0,a=r-1;s<a;++s)for(var u=s+1;u<r;++u){var l=n[s],c=n[u];i[o]={id:o,nEdges:this.nEdges(l,c),a:l,b:c},o++}return i},e.prototype.greedyMerge=function(){for(var t=0;t<this.roots.length;++t)if(!(this.roots[t].modules().length<2)){var n=this.rootMerges(t).sort(function(i,o){return i.nEdges==o.nEdges?i.id-o.id:i.nEdges-o.nEdges}),r=n[0];if(!(r.nEdges>=this.R))return this.merge(r.a,r.b,t),!0}},e.prototype.nEdges=function(t,n){var r=t.incoming.intersection(n.incoming),i=t.outgoing.intersection(n.outgoing);return this.R-r.count()-i.count()},e.prototype.getGroupHierarchy=function(t){var n=this,r=[],i={};mc(this.roots[0],i,r);var o=this.allEdges();return o.forEach(function(s){var a=n.modules[s.source],u=n.modules[s.target];t.push(new ns(typeof a.gid>"u"?s.source:r[a.gid],typeof u.gid>"u"?s.target:r[u.gid],s.type))}),r},e.prototype.allEdges=function(){var t=[];return e.getEdges(this.roots[0],t),t},e.getEdges=function(t,n){t.forAll(function(r){r.getEdges(n),e.getEdges(r.children,n)})},e}();xt.Configuration=vc;function mc(e,t,n){e.forAll(function(r){if(r.isLeaf())t.leaves||(t.leaves=[]),t.leaves.push(r.id);else{var i=t;if(r.gid=n.length,!r.isIsland()||r.isPredefined()){if(i={id:r.gid},r.isPredefined())for(var o in r.definition)i[o]=r.definition[o];t.groups||(t.groups=[]),t.groups.push(r.gid),n.push(i)}mc(r.children,i,n)}})}var An=function(){function e(t,n,r,i,o){n===void 0&&(n=new Wn),r===void 0&&(r=new Wn),i===void 0&&(i=new fn),this.id=t,this.outgoing=n,this.incoming=r,this.children=i,this.definition=o}return e.prototype.getEdges=function(t){var n=this;this.outgoing.forAll(function(r,i){r.forAll(function(o){t.push(new ns(n.id,o.id,i))})})},e.prototype.isLeaf=function(){return this.children.count()===0},e.prototype.isIsland=function(){return this.outgoing.count()===0&&this.incoming.count()===0},e.prototype.isPredefined=function(){return typeof this.definition<"u"},e}();xt.Module=An;function rS(e,t){var n={};for(var r in e)r in t&&(n[r]=e[r]);return n}var fn=function(){function e(){this.table={}}return e.prototype.count=function(){return Object.keys(this.table).length},e.prototype.intersection=function(t){var n=new e;return n.table=rS(this.table,t.table),n},e.prototype.intersectionCount=function(t){return this.intersection(t).count()},e.prototype.contains=function(t){return t in this.table},e.prototype.add=function(t){this.table[t.id]=t},e.prototype.remove=function(t){delete this.table[t.id]},e.prototype.forAll=function(t){for(var n in this.table)t(this.table[n])},e.prototype.modules=function(){var t=[];return this.forAll(function(n){n.isPredefined()||t.push(n)}),t},e}();xt.ModuleSet=fn;var Wn=function(){function e(){this.sets={},this.n=0}return e.prototype.count=function(){return this.n},e.prototype.contains=function(t){var n=!1;return this.forAllModules(function(r){!n&&r.id==t&&(n=!0)}),n},e.prototype.add=function(t,n){var r=t in this.sets?this.sets[t]:this.sets[t]=new fn;r.add(n),++this.n},e.prototype.remove=function(t,n){var r=this.sets[t];r.remove(n),r.count()===0&&delete this.sets[t],--this.n},e.prototype.forAll=function(t){for(var n in this.sets)t(this.sets[n],Number(n))},e.prototype.forAllModules=function(t){this.forAll(function(n,r){return n.forAll(t)})},e.prototype.intersection=function(t){var n=new e;return this.forAll(function(r,i){if(i in t.sets){var o=r.intersection(t.sets[i]),s=o.count();s>0&&(n.sets[i]=o,n.n+=s)}}),n},e}();xt.LinkSets=Wn;function iS(e,t,n,r){for(var i=e.length,o=new vc(i,t,n,r);o.greedyMerge(););var s=[],a=o.getGroupHierarchy(s);return s.forEach(function(u){var l=function(c){var d=u[c];typeof d=="number"&&(u[c]=e[d])};l("source"),l("target")}),{groups:a,powerEdges:s}}xt.getGroups=iS;var Vt={};Object.defineProperty(Vt,"__esModule",{value:!0});function yc(e,t){var n={};for(var r in e)n[r]={};for(var r in t)n[r]={};return Object.keys(n).length}function _c(e,t){var n=0;for(var r in e)typeof t[r]<"u"&&++n;return n}function oS(e,t){var n={},r=function(i,o){typeof n[i]>"u"&&(n[i]={}),n[i][o]={}};return e.forEach(function(i){var o=t.getSourceIndex(i),s=t.getTargetIndex(i);r(o,s),r(s,o)}),n}function wc(e,t,n,r){var i=oS(e,r);e.forEach(function(o){var s=i[r.getSourceIndex(o)],a=i[r.getTargetIndex(o)];r.setLength(o,1+t*n(s,a))})}function sS(e,t,n){n===void 0&&(n=1),wc(e,n,function(r,i){return Math.sqrt(yc(r,i)-_c(r,i))},t)}Vt.symmetricDiffLinkLengths=sS;function aS(e,t,n){n===void 0&&(n=1),wc(e,n,function(r,i){return Math.min(Object.keys(r).length,Object.keys(i).length)<1.1?0:_c(r,i)/yc(r,i)},t)}Vt.jaccardLinkLengths=aS;function uS(e,t,n,r){var i=bc(e,t,r),o={};i.forEach(function(a,u){return a.forEach(function(l){return o[l]=u})});var s=[];return t.forEach(function(a){var u=r.getSourceIndex(a),l=r.getTargetIndex(a),c=o[u],d=o[l];c!==d&&s.push({axis:n,left:u,right:l,gap:r.getMinSeparation(a)})}),s}Vt.generateDirectedEdgeConstraints=uS;function bc(e,t,n){var r=[],i=0,o=[],s=[];function a(y){y.index=y.lowlink=i++,o.push(y),y.onStack=!0;for(var _=0,S=y.out;_<S.length;_++){var E=S[_];typeof E.index>"u"?(a(E),y.lowlink=Math.min(y.lowlink,E.lowlink)):E.onStack&&(y.lowlink=Math.min(y.lowlink,E.index))}if(y.lowlink===y.index){for(var k=[];o.length&&(E=o.pop(),E.onStack=!1,k.push(E),E!==y););s.push(k.map(function(I){return I.id}))}}for(var u=0;u<e;u++)r.push({id:u,out:[]});for(var l=0,c=t;l<c.length;l++){var d=c[l],h=r[n.getSourceIndex(d)],f=r[n.getTargetIndex(d)];h.out.push(f)}for(var p=0,g=r;p<g.length;p++){var m=g[p];typeof m.index>"u"&&a(m)}return s}Vt.stronglyConnectedComponents=bc;var rn={};Object.defineProperty(rn,"__esModule",{value:!0});var Ec=function(){function e(){this.locks={}}return e.prototype.add=function(t,n){this.locks[t]=n},e.prototype.clear=function(){this.locks={}},e.prototype.isEmpty=function(){for(var t in this.locks)return!1;return!0},e.prototype.apply=function(t){for(var n in this.locks)t(Number(n),this.locks[n])},e}();rn.Locks=Ec;var lS=function(){function e(t,n,r){r===void 0&&(r=null),this.D=n,this.G=r,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new xc,this.project=null,this.x=t,this.k=t.length;var i=this.n=t[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new Ec,this.minD=Number.MAX_VALUE;for(var o=i,s;o--;)for(s=i;--s>o;){var a=n[o][s];a>0&&a<this.minD&&(this.minD=a)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),o=this.k;o--;){for(this.g[o]=new Array(i),this.H[o]=new Array(i),s=i;s--;)this.H[o][s]=new Array(i);this.Hd[o]=new Array(i),this.a[o]=new Array(i),this.b[o]=new Array(i),this.c[o]=new Array(i),this.d[o]=new Array(i),this.e[o]=new Array(i),this.ia[o]=new Array(i),this.ib[o]=new Array(i),this.xtmp[o]=new Array(i)}}return e.createSquareMatrix=function(t,n){for(var r=new Array(t),i=0;i<t;++i){r[i]=new Array(t);for(var o=0;o<t;++o)r[i][o]=n(i,o)}return r},e.prototype.offsetDir=function(){for(var t=this,n=new Array(this.k),r=0,i=0;i<this.k;++i){var o=n[i]=this.random.getNextBetween(.01,1)-.5;r+=o*o}return r=Math.sqrt(r),n.map(function(s){return s*=t.minD/r})},e.prototype.computeDerivatives=function(t){var n=this,r=this.n;if(!(r<1)){for(var i,o=new Array(this.k),s=new Array(this.k),a=new Array(this.k),u=0,l=0;l<r;++l){for(i=0;i<this.k;++i)a[i]=this.g[i][l]=0;for(var c=0;c<r;++c)if(l!==c){for(var d=r;d--;){var h=0;for(i=0;i<this.k;++i){var f=o[i]=t[i][l]-t[i][c];h+=s[i]=f*f}if(h>1e-9)break;var p=this.offsetDir();for(i=0;i<this.k;++i)t[i][c]+=p[i]}var g=Math.sqrt(h),m=this.D[l][c],y=this.G!=null?this.G[l][c]:1;if(y>1&&g>m||!isFinite(m)){for(i=0;i<this.k;++i)this.H[i][l][c]=0;continue}y>1&&(y=1);var _=m*m,S=2*y*(g-m)/(_*g),E=g*g*g,k=2*-y/(_*E);for(isFinite(S)||console.log(S),i=0;i<this.k;++i)this.g[i][l]+=o[i]*S,a[i]-=this.H[i][l][c]=k*(E+m*(s[i]-h)+g*h)}for(i=0;i<this.k;++i)u=Math.max(u,this.H[i][l][l]=a[i])}for(var I=this.snapGridSize/2,T=this.snapGridSize,z=this.snapStrength,V=z/(I*I),O=this.numGridSnapNodes,l=0;l<O;++l)for(i=0;i<this.k;++i){var N=this.x[i][l],Y=N/T,X=Y%1,v=Y-X,$=Math.abs(X),f=$<=.5?N-v*T:N>0?N-(v+1)*T:N-(v-1)*T;-I<f&&f<=I&&(this.scaleSnapByMaxH?(this.g[i][l]+=u*V*f,this.H[i][l][l]+=u*V):(this.g[i][l]+=V*f,this.H[i][l][l]+=V))}this.locks.isEmpty()||this.locks.apply(function(b,P){for(i=0;i<n.k;++i)n.H[i][b][b]+=u,n.g[i][b]-=u*(P[i]-t[i][b])})}},e.dotProd=function(t,n){for(var r=0,i=t.length;i--;)r+=t[i]*n[i];return r},e.rightMultiply=function(t,n,r){for(var i=t.length;i--;)r[i]=e.dotProd(t[i],n)},e.prototype.computeStepSize=function(t){for(var n=0,r=0,i=0;i<this.k;++i)n+=e.dotProd(this.g[i],t[i]),e.rightMultiply(this.H[i],t[i],this.Hd[i]),r+=e.dotProd(t[i],this.Hd[i]);return r===0||!isFinite(r)?0:1*n/r},e.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var t=this.computeStepSize(this.g),n=0;n<this.k;++n)this.takeDescentStep(this.x[n],this.g[n],t);return this.computeStress()},e.copy=function(t,n){for(var r=t.length,i=n[0].length,o=0;o<r;++o)for(var s=0;s<i;++s)n[o][s]=t[o][s]},e.prototype.stepAndProject=function(t,n,r,i){e.copy(t,n),this.takeDescentStep(n[0],r[0],i),this.project&&this.project[0](t[0],t[1],n[0]),this.takeDescentStep(n[1],r[1],i),this.project&&this.project[1](n[0],t[1],n[1]);for(var o=2;o<this.k;o++)this.takeDescentStep(n[o],r[o],i)},e.mApply=function(t,n,r){for(var i=t;i-- >0;)for(var o=n;o-- >0;)r(i,o)},e.prototype.matrixApply=function(t){e.mApply(this.k,this.n,t)},e.prototype.computeNextPosition=function(t,n){var r=this;this.computeDerivatives(t);var i=this.computeStepSize(this.g);if(this.stepAndProject(t,n,this.g,i),this.project){this.matrixApply(function(s,a){return r.e[s][a]=t[s][a]-n[s][a]});var o=this.computeStepSize(this.e);o=Math.max(.2,Math.min(o,1)),this.stepAndProject(t,n,this.e,o)}},e.prototype.run=function(t){for(var n=Number.MAX_VALUE,r=!1;!r&&t-- >0;){var i=this.rungeKutta();r=Math.abs(n/i-1)<this.threshold,n=i}return n},e.prototype.rungeKutta=function(){var t=this;this.computeNextPosition(this.x,this.a),e.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),e.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var n=0;return this.matrixApply(function(r,i){var o=(t.a[r][i]+2*t.b[r][i]+2*t.c[r][i]+t.d[r][i])/6,s=t.x[r][i]-o;n+=s*s,t.x[r][i]=o}),n},e.mid=function(t,n,r){e.mApply(t.length,t[0].length,function(i,o){return r[i][o]=t[i][o]+(n[i][o]-t[i][o])/2})},e.prototype.takeDescentStep=function(t,n,r){for(var i=0;i<this.n;++i)t[i]=t[i]-r*n[i]},e.prototype.computeStress=function(){for(var t=0,n=0,r=this.n-1;n<r;++n)for(var i=n+1,o=this.n;i<o;++i){for(var s=0,a=0;a<this.k;++a){var u=this.x[a][n]-this.x[a][i];s+=u*u}s=Math.sqrt(s);var l=this.D[n][i];if(isFinite(l)){var c=l-s,d=l*l;t+=c*c/d}}return t},e.zeroDistance=1e-10,e}();rn.Descent=lS;var xc=function(){function e(t){t===void 0&&(t=1),this.seed=t,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return e.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},e.prototype.getNextBetween=function(t,n){return t+this.getNext()*(n-t)},e}();rn.PseudoRandom=xc;var Ae={},rt={};Object.defineProperty(rt,"__esModule",{value:!0});var Sc=function(){function e(t){this.scale=t,this.AB=0,this.AD=0,this.A2=0}return e.prototype.addVariable=function(t){var n=this.scale/t.scale,r=t.offset/t.scale,i=t.weight;this.AB+=i*n*r,this.AD+=i*n*t.desiredPosition,this.A2+=i*n*n},e.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},e}();rt.PositionStats=Sc;var $r=function(){function e(t,n,r,i){i===void 0&&(i=!1),this.left=t,this.right=n,this.gap=r,this.equality=i,this.active=!1,this.unsatisfiable=!1,this.left=t,this.right=n,this.gap=r,this.equality=i}return e.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},e}();rt.Constraint=$r;var Nr=function(){function e(t,n,r){n===void 0&&(n=1),r===void 0&&(r=1),this.desiredPosition=t,this.weight=n,this.scale=r,this.offset=0}return e.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},e.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},e.prototype.visitNeighbours=function(t,n){var r=function(i,o){return i.active&&t!==o&&n(i,o)};this.cOut.forEach(function(i){return r(i,i.right)}),this.cIn.forEach(function(i){return r(i,i.left)})},e}();rt.Variable=Nr;var wo=function(){function e(t){this.vars=[],t.offset=0,this.ps=new Sc(t.scale),this.addVariable(t)}return e.prototype.addVariable=function(t){t.block=this,this.vars.push(t),this.ps.addVariable(t),this.posn=this.ps.getPosn()},e.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var t=0,n=this.vars.length;t<n;++t)this.ps.addVariable(this.vars[t]);this.posn=this.ps.getPosn()},e.prototype.compute_lm=function(t,n,r){var i=this,o=t.dfdv();return t.visitNeighbours(n,function(s,a){var u=i.compute_lm(a,t,r);a===s.right?(o+=u*s.left.scale,s.lm=u):(o+=u*s.right.scale,s.lm=-u),r(s)}),o/t.scale},e.prototype.populateSplitBlock=function(t,n){var r=this;t.visitNeighbours(n,function(i,o){o.offset=t.offset+(o===i.right?i.gap:-i.gap),r.addVariable(o),r.populateSplitBlock(o,t)})},e.prototype.traverse=function(t,n,r,i){var o=this;r===void 0&&(r=this.vars[0]),i===void 0&&(i=null),r.visitNeighbours(i,function(s,a){n.push(t(s)),o.traverse(t,n,a,r)})},e.prototype.findMinLM=function(){var t=null;return this.compute_lm(this.vars[0],null,function(n){!n.equality&&(t===null||n.lm<t.lm)&&(t=n)}),t},e.prototype.findMinLMBetween=function(t,n){this.compute_lm(t,null,function(){});var r=null;return this.findPath(t,null,n,function(i,o){!i.equality&&i.right===o&&(r===null||i.lm<r.lm)&&(r=i)}),r},e.prototype.findPath=function(t,n,r,i){var o=this,s=!1;return t.visitNeighbours(n,function(a,u){!s&&(u===r||o.findPath(u,t,r,i))&&(s=!0,i(a,u))}),s},e.prototype.isActiveDirectedPathBetween=function(t,n){if(t===n)return!0;for(var r=t.cOut.length;r--;){var i=t.cOut[r];if(i.active&&this.isActiveDirectedPathBetween(i.right,n))return!0}return!1},e.split=function(t){return t.active=!1,[e.createSplitBlock(t.left),e.createSplitBlock(t.right)]},e.createSplitBlock=function(t){var n=new e(t);return n.populateSplitBlock(t,null),n},e.prototype.splitBetween=function(t,n){var r=this.findMinLMBetween(t,n);if(r!==null){var i=e.split(r);return{constraint:r,lb:i[0],rb:i[1]}}return null},e.prototype.mergeAcross=function(t,n,r){n.active=!0;for(var i=0,o=t.vars.length;i<o;++i){var s=t.vars[i];s.offset+=r,this.addVariable(s)}this.posn=this.ps.getPosn()},e.prototype.cost=function(){for(var t=0,n=this.vars.length;n--;){var r=this.vars[n],i=r.position()-r.desiredPosition;t+=i*i*r.weight}return t},e}();rt.Block=wo;var bo=function(){function e(t){this.vs=t;var n=t.length;for(this.list=new Array(n);n--;){var r=new wo(t[n]);this.list[n]=r,r.blockInd=n}}return e.prototype.cost=function(){for(var t=0,n=this.list.length;n--;)t+=this.list[n].cost();return t},e.prototype.insert=function(t){t.blockInd=this.list.length,this.list.push(t)},e.prototype.remove=function(t){var n=this.list.length-1,r=this.list[n];this.list.length=n,t!==r&&(this.list[t.blockInd]=r,r.blockInd=t.blockInd)},e.prototype.merge=function(t){var n=t.left.block,r=t.right.block,i=t.right.offset-t.left.offset-t.gap;n.vars.length<r.vars.length?(r.mergeAcross(n,t,i),this.remove(n)):(n.mergeAcross(r,t,-i),this.remove(r))},e.prototype.forEach=function(t){this.list.forEach(t)},e.prototype.updateBlockPositions=function(){this.list.forEach(function(t){return t.updateWeightedPosition()})},e.prototype.split=function(t){var n=this;this.updateBlockPositions(),this.list.forEach(function(r){var i=r.findMinLM();i!==null&&i.lm<rs.LAGRANGIAN_TOLERANCE&&(r=i.left.block,wo.split(i).forEach(function(o){return n.insert(o)}),n.remove(r),t.push(i))})},e}();rt.Blocks=bo;var rs=function(){function e(t,n){this.vs=t,this.cs=n,this.vs=t,t.forEach(function(r){r.cIn=[],r.cOut=[]}),this.cs=n,n.forEach(function(r){r.left.cOut.push(r),r.right.cIn.push(r)}),this.inactive=n.map(function(r){return r.active=!1,r}),this.bs=null}return e.prototype.cost=function(){return this.bs.cost()},e.prototype.setStartingPositions=function(t){this.inactive=this.cs.map(function(n){return n.active=!1,n}),this.bs=new bo(this.vs),this.bs.forEach(function(n,r){return n.posn=t[r]})},e.prototype.setDesiredPositions=function(t){this.vs.forEach(function(n,r){return n.desiredPosition=t[r]})},e.prototype.mostViolated=function(){for(var t=Number.MAX_VALUE,n=null,r=this.inactive,i=r.length,o=i,s=0;s<i;++s){var a=r[s];if(!a.unsatisfiable){var u=a.slack();if((a.equality||u<t)&&(t=u,n=a,o=s,a.equality))break}}return o!==i&&(t<e.ZERO_UPPERBOUND&&!n.active||n.equality)&&(r[o]=r[i-1],r.length=i-1),n},e.prototype.satisfy=function(){this.bs==null&&(this.bs=new bo(this.vs)),this.bs.split(this.inactive);for(var t=null;(t=this.mostViolated())&&(t.equality||t.slack()<e.ZERO_UPPERBOUND&&!t.active);){var n=t.left.block,r=t.right.block;if(n!==r)this.bs.merge(t);else{if(n.isActiveDirectedPathBetween(t.right,t.left)){t.unsatisfiable=!0;continue}var i=n.splitBetween(t.left,t.right);if(i!==null)this.bs.insert(i.lb),this.bs.insert(i.rb),this.bs.remove(n),this.inactive.push(i.constraint);else{t.unsatisfiable=!0;continue}t.slack()>=0?this.inactive.push(t):this.bs.merge(t)}}},e.prototype.solve=function(){this.satisfy();for(var t=Number.MAX_VALUE,n=this.bs.cost();Math.abs(t-n)>1e-4;)this.satisfy(),t=n,n=this.bs.cost();return n},e.LAGRANGIAN_TOLERANCE=-1e-4,e.ZERO_UPPERBOUND=-1e-10,e}();rt.Solver=rs;function cS(e,t,n){for(var r=e.map(function(m){return new Nr(m.desiredCenter)}),i=[],o=e.length,s=0;s<o-1;s++){var a=e[s],u=e[s+1];i.push(new $r(r[s],r[s+1],(a.size+u.size)/2))}var l=r[0],c=r[o-1],d=e[0].size/2,h=e[o-1].size/2,f=null,p=null;t&&(f=new Nr(t,l.weight*1e3),r.push(f),i.push(new $r(f,l,d))),n&&(p=new Nr(n,c.weight*1e3),r.push(p),i.push(new $r(c,p,h)));var g=new rs(r,i);return g.solve(),{newCenters:r.slice(0,e.length).map(function(m){return m.position()}),lowerBound:f?f.position():l.position()-d,upperBound:p?p.position():c.position()+h}}rt.removeOverlapInOneDimension=cS;var wn={},dS=qe&&qe.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(wn,"__esModule",{value:!0});var kc=function(){function e(){this.findIter=function(t){for(var n=this._root,r=this.iterator();n!==null;){var i=this._comparator(t,n.data);if(i===0)return r._cursor=n,r;r._ancestors.push(n),n=n.get_child(i>0)}return null}}return e.prototype.clear=function(){this._root=null,this.size=0},e.prototype.find=function(t){for(var n=this._root;n!==null;){var r=this._comparator(t,n.data);if(r===0)return n.data;n=n.get_child(r>0)}return null},e.prototype.lowerBound=function(t){return this._bound(t,this._comparator)},e.prototype.upperBound=function(t){var n=this._comparator;function r(i,o){return n(o,i)}return this._bound(t,r)},e.prototype.min=function(){var t=this._root;if(t===null)return null;for(;t.left!==null;)t=t.left;return t.data},e.prototype.max=function(){var t=this._root;if(t===null)return null;for(;t.right!==null;)t=t.right;return t.data},e.prototype.iterator=function(){return new $c(this)},e.prototype.each=function(t){for(var n=this.iterator(),r;(r=n.next())!==null;)t(r)},e.prototype.reach=function(t){for(var n=this.iterator(),r;(r=n.prev())!==null;)t(r)},e.prototype._bound=function(t,n){for(var r=this._root,i=this.iterator();r!==null;){var o=this._comparator(t,r.data);if(o===0)return i._cursor=r,i;i._ancestors.push(r),r=r.get_child(o>0)}for(var s=i._ancestors.length-1;s>=0;--s)if(r=i._ancestors[s],n(t,r.data)>0)return i._cursor=r,i._ancestors.length=s,i;return i._ancestors.length=0,i},e}();wn.TreeBase=kc;var $c=function(){function e(t){this._tree=t,this._ancestors=[],this._cursor=null}return e.prototype.data=function(){return this._cursor!==null?this._cursor.data:null},e.prototype.next=function(){if(this._cursor===null){var t=this._tree._root;t!==null&&this._minNode(t)}else if(this._cursor.right===null){var n;do if(n=this._cursor,this._ancestors.length)this._cursor=this._ancestors.pop();else{this._cursor=null;break}while(this._cursor.right===n)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return this._cursor!==null?this._cursor.data:null},e.prototype.prev=function(){if(this._cursor===null){var t=this._tree._root;t!==null&&this._maxNode(t)}else if(this._cursor.left===null){var n;do if(n=this._cursor,this._ancestors.length)this._cursor=this._ancestors.pop();else{this._cursor=null;break}while(this._cursor.left===n)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return this._cursor!==null?this._cursor.data:null},e.prototype._minNode=function(t){for(;t.left!==null;)this._ancestors.push(t),t=t.left;this._cursor=t},e.prototype._maxNode=function(t){for(;t.right!==null;)this._ancestors.push(t),t=t.right;this._cursor=t},e}();wn.Iterator=$c;var vr=function(){function e(t){this.data=t,this.left=null,this.right=null,this.red=!0}return e.prototype.get_child=function(t){return t?this.right:this.left},e.prototype.set_child=function(t,n){t?this.right=n:this.left=n},e}(),hS=function(e){dS(t,e);function t(n){var r=e.call(this)||this;return r._root=null,r._comparator=n,r.size=0,r}return t.prototype.insert=function(n){var r=!1;if(this._root===null)this._root=new vr(n),r=!0,this.size++;else{var i=new vr(void 0),o=!1,s=!1,a=null,u=i,l=null,c=this._root;for(u.right=this._root;;){if(c===null?(c=new vr(n),l.set_child(o,c),r=!0,this.size++):t.is_red(c.left)&&t.is_red(c.right)&&(c.red=!0,c.left.red=!1,c.right.red=!1),t.is_red(c)&&t.is_red(l)){var d=u.right===a;c===l.get_child(s)?u.set_child(d,t.single_rotate(a,!s)):u.set_child(d,t.double_rotate(a,!s))}var h=this._comparator(c.data,n);if(h===0)break;s=o,o=h<0,a!==null&&(u=a),a=l,l=c,c=c.get_child(o)}this._root=i.right}return this._root.red=!1,r},t.prototype.remove=function(n){if(this._root===null)return!1;var r=new vr(void 0),i=r;i.right=this._root;for(var o=null,s=null,a=null,u=!0;i.get_child(u)!==null;){var l=u;s=o,o=i,i=i.get_child(u);var c=this._comparator(n,i.data);if(u=c>0,c===0&&(a=i),!t.is_red(i)&&!t.is_red(i.get_child(u))){if(t.is_red(i.get_child(!u))){var d=t.single_rotate(i,u);o.set_child(l,d),o=d}else if(!t.is_red(i.get_child(!u))){var h=o.get_child(!l);if(h!==null)if(!t.is_red(h.get_child(!l))&&!t.is_red(h.get_child(l)))o.red=!1,h.red=!0,i.red=!0;else{var f=s.right===o;t.is_red(h.get_child(l))?s.set_child(f,t.double_rotate(o,l)):t.is_red(h.get_child(!l))&&s.set_child(f,t.single_rotate(o,l));var p=s.get_child(f);p.red=!0,i.red=!0,p.left.red=!1,p.right.red=!1}}}}return a!==null&&(a.data=i.data,o.set_child(o.right===i,i.get_child(i.left===null)),this.size--),this._root=r.right,this._root!==null&&(this._root.red=!1),a!==null},t.is_red=function(n){return n!==null&&n.red},t.single_rotate=function(n,r){var i=n.get_child(!r);return n.set_child(!r,i.get_child(r)),i.set_child(r,n),n.red=!0,i.red=!1,i},t.double_rotate=function(n,r){return n.set_child(!r,t.single_rotate(n.get_child(!r),!r)),t.single_rotate(n,r)},t}(kc);wn.RBTree=hS;var fS=qe&&qe.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Ae,"__esModule",{value:!0});var wt=rt,pS=wn;function Dn(e){return e.bounds=typeof e.leaves<"u"?e.leaves.reduce(function(t,n){return n.bounds.union(t)},Lt.empty()):Lt.empty(),typeof e.groups<"u"&&(e.bounds=e.groups.reduce(function(t,n){return Dn(n).union(t)},e.bounds)),e.bounds=e.bounds.inflate(e.padding),e.bounds}Ae.computeGroupBounds=Dn;var Lt=function(){function e(t,n,r,i){this.x=t,this.X=n,this.y=r,this.Y=i}return e.empty=function(){return new e(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},e.prototype.cx=function(){return(this.x+this.X)/2},e.prototype.cy=function(){return(this.y+this.Y)/2},e.prototype.overlapX=function(t){var n=this.cx(),r=t.cx();return n<=r&&t.x<this.X?this.X-t.x:r<=n&&this.x<t.X?t.X-this.x:0},e.prototype.overlapY=function(t){var n=this.cy(),r=t.cy();return n<=r&&t.y<this.Y?this.Y-t.y:r<=n&&this.y<t.Y?t.Y-this.y:0},e.prototype.setXCentre=function(t){var n=t-this.cx();this.x+=n,this.X+=n},e.prototype.setYCentre=function(t){var n=t-this.cy();this.y+=n,this.Y+=n},e.prototype.width=function(){return this.X-this.x},e.prototype.height=function(){return this.Y-this.y},e.prototype.union=function(t){return new e(Math.min(this.x,t.x),Math.max(this.X,t.X),Math.min(this.y,t.y),Math.max(this.Y,t.Y))},e.prototype.lineIntersections=function(t,n,r,i){for(var o=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],s=[],a=0;a<4;++a){var u=e.lineIntersection(t,n,r,i,o[a][0],o[a][1],o[a][2],o[a][3]);u!==null&&s.push({x:u.x,y:u.y})}return s},e.prototype.rayIntersection=function(t,n){var r=this.lineIntersections(this.cx(),this.cy(),t,n);return r.length>0?r[0]:null},e.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},e.lineIntersection=function(t,n,r,i,o,s,a,u){var l=r-t,c=a-o,d=i-n,h=u-s,f=h*l-c*d;if(f==0)return null;var p=t-o,g=n-s,m=c*g-h*p,y=m/f,_=l*g-d*p,S=_/f;return y>=0&&y<=1&&S>=0&&S<=1?{x:t+y*l,y:n+y*d}:null},e.prototype.inflate=function(t){return new e(this.x-t,this.X+t,this.y-t,this.Y+t)},e}();Ae.Rectangle=Lt;function gS(e,t,n){var r=e.rayIntersection(t.cx(),t.cy())||{x:e.cx(),y:e.cy()},i=t.rayIntersection(e.cx(),e.cy())||{x:t.cx(),y:t.cy()},o=i.x-r.x,s=i.y-r.y,a=Math.sqrt(o*o+s*s),u=a-n;return{sourceIntersection:r,targetIntersection:i,arrowStart:{x:r.x+u*o/a,y:r.y+u*s/a}}}Ae.makeEdgeBetween=gS;function vS(e,t,n){var r=t.rayIntersection(e.x,e.y);r||(r={x:t.cx(),y:t.cy()});var i=r.x-e.x,o=r.y-e.y,s=Math.sqrt(i*i+o*o);return{x:r.x-n*i/s,y:r.y-n*o/s}}Ae.makeEdgeTo=vS;var mS=function(){function e(t,n,r){this.v=t,this.r=n,this.pos=r,this.prev=Eo(),this.next=Eo()}return e}(),Ga=function(){function e(t,n,r){this.isOpen=t,this.v=n,this.pos=r}return e}();function yS(e,t){return e.pos>t.pos?1:e.pos<t.pos||e.isOpen?-1:t.isOpen?1:0}function Eo(){return new pS.RBTree(function(e,t){return e.pos-t.pos})}var Nc={getCentre:function(e){return e.cx()},getOpen:function(e){return e.y},getClose:function(e){return e.Y},getSize:function(e){return e.width()},makeRect:function(e,t,n,r){return new Lt(n-r/2,n+r/2,e,t)},findNeighbours:_S},Cc={getCentre:function(e){return e.cy()},getOpen:function(e){return e.x},getClose:function(e){return e.X},getSize:function(e){return e.height()},makeRect:function(e,t,n,r){return new Lt(e,t,n-r/2,n+r/2)},findNeighbours:wS};function is(e,t,n,r){r===void 0&&(r=!1);var i=e.padding,o=typeof e.groups<"u"?e.groups.length:0,s=typeof e.leaves<"u"?e.leaves.length:0,a=o?e.groups.reduce(function(k,I){return k.concat(is(I,t,n,!0))},[]):[],u=(r?2:0)+s+o,l=new Array(u),c=new Array(u),d=0,h=function(k,I){c[d]=k,l[d++]=I};if(r){var f=e.bounds,p=t.getCentre(f),g=t.getSize(f)/2,m=t.getOpen(f),y=t.getClose(f),_=p-g+i/2,S=p+g-i/2;e.minVar.desiredPosition=_,h(t.makeRect(m,y,_,i),e.minVar),e.maxVar.desiredPosition=S,h(t.makeRect(m,y,S,i),e.maxVar)}s&&e.leaves.forEach(function(k){return h(k.bounds,k.variable)}),o&&e.groups.forEach(function(k){var I=k.bounds;h(t.makeRect(t.getOpen(I),t.getClose(I),t.getCentre(I),t.getSize(I)),k.minVar)});var E=os(c,l,t,n);return o&&(l.forEach(function(k){k.cOut=[],k.cIn=[]}),E.forEach(function(k){k.left.cOut.push(k),k.right.cIn.push(k)}),e.groups.forEach(function(k){var I=(k.padding-t.getSize(k.bounds))/2;k.minVar.cIn.forEach(function(T){return T.gap+=I}),k.minVar.cOut.forEach(function(T){T.left=k.maxVar,T.gap+=I})})),a.concat(E)}function os(e,t,n,r){var i,o=e.length,s=2*o;console.assert(t.length>=o);var a=new Array(s);for(i=0;i<o;++i){var u=e[i],l=new mS(t[i],u,n.getCentre(u));a[i]=new Ga(!0,l,n.getOpen(u)),a[i+o]=new Ga(!1,l,n.getClose(u))}a.sort(yS);var c=new Array,d=Eo();for(i=0;i<s;++i){var h=a[i],l=h.v;if(h.isOpen)d.insert(l),n.findNeighbours(l,d);else{d.remove(l);var f=function(m,y){var _=(n.getSize(m.r)+n.getSize(y.r))/2+r;c.push(new wt.Constraint(m.v,y.v,_))},p=function(m,y,_){for(var S,E=l[m].iterator();(S=E[m]())!==null;)_(S,l),S[y].remove(l)};p("prev","next",function(m,y){return f(m,y)}),p("next","prev",function(m,y){return f(y,m)})}}return console.assert(d.size===0),c}function _S(e,t){var n=function(r,i){for(var o=t.findIter(e),s;(s=o[r]())!==null;){var a=s.r.overlapX(e.r);if((a<=0||a<=s.r.overlapY(e.r))&&(e[r].insert(s),s[i].insert(e)),a<=0)break}};n("next","prev"),n("prev","next")}function wS(e,t){var n=function(r,i){var o=t.findIter(e)[r]();o!==null&&o.r.overlapX(e.r)>0&&(e[r].insert(o),o[i].insert(e))};n("next","prev"),n("prev","next")}function Mc(e,t){return os(e,t,Nc,1e-6)}Ae.generateXConstraints=Mc;function Ic(e,t){return os(e,t,Cc,1e-6)}Ae.generateYConstraints=Ic;function Pc(e){return is(e,Nc,1e-6)}Ae.generateXGroupConstraints=Pc;function Ac(e){return is(e,Cc,1e-6)}Ae.generateYGroupConstraints=Ac;function bS(e){var t=e.map(function(i){return new wt.Variable(i.cx())}),n=Mc(e,t),r=new wt.Solver(t,n);r.solve(),t.forEach(function(i,o){return e[o].setXCentre(i.position())}),t=e.map(function(i){return new wt.Variable(i.cy())}),n=Ic(e,t),r=new wt.Solver(t,n),r.solve(),t.forEach(function(i,o){return e[o].setYCentre(i.position())})}Ae.removeOverlaps=bS;var Cr=function(e){fS(t,e);function t(n,r){var i=e.call(this,0,r)||this;return i.index=n,i}return t}(wt.Variable);Ae.IndexedVariable=Cr;var ES=function(){function e(t,n,r,i,o){var s=this;if(r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!1),this.nodes=t,this.groups=n,this.rootGroup=r,this.avoidOverlaps=o,this.variables=t.map(function(u,l){return u.variable=new Cr(l,1)}),i&&this.createConstraints(i),o&&r&&typeof r.groups<"u"){t.forEach(function(u){if(!u.width||!u.height){u.bounds=new Lt(u.x,u.x,u.y,u.y);return}var l=u.width/2,c=u.height/2;u.bounds=new Lt(u.x-l,u.x+l,u.y-c,u.y+c)}),Dn(r);var a=t.length;n.forEach(function(u){s.variables[a]=u.minVar=new Cr(a++,typeof u.stiffness<"u"?u.stiffness:.01),s.variables[a]=u.maxVar=new Cr(a++,typeof u.stiffness<"u"?u.stiffness:.01)})}}return e.prototype.createSeparation=function(t){return new wt.Constraint(this.nodes[t.left].variable,this.nodes[t.right].variable,t.gap,typeof t.equality<"u"?t.equality:!1)},e.prototype.makeFeasible=function(t){var n=this;if(this.avoidOverlaps){var r="x",i="width";t.axis==="x"&&(r="y",i="height");var o=t.offsets.map(function(a){return n.nodes[a.node]}).sort(function(a,u){return a[r]-u[r]}),s=null;o.forEach(function(a){if(s){var u=s[r]+s[i];u>a[r]&&(a[r]=u)}s=a})}},e.prototype.createAlignment=function(t){var n=this,r=this.nodes[t.offsets[0].node].variable;this.makeFeasible(t);var i=t.axis==="x"?this.xConstraints:this.yConstraints;t.offsets.slice(1).forEach(function(o){var s=n.nodes[o.node].variable;i.push(new wt.Constraint(r,s,o.offset,!0))})},e.prototype.createConstraints=function(t){var n=this,r=function(i){return typeof i.type>"u"||i.type==="separation"};this.xConstraints=t.filter(function(i){return i.axis==="x"&&r(i)}).map(function(i){return n.createSeparation(i)}),this.yConstraints=t.filter(function(i){return i.axis==="y"&&r(i)}).map(function(i){return n.createSeparation(i)}),t.filter(function(i){return i.type==="alignment"}).forEach(function(i){return n.createAlignment(i)})},e.prototype.setupVariablesAndBounds=function(t,n,r,i){this.nodes.forEach(function(o,s){o.fixed?(o.variable.weight=o.fixedWeight?o.fixedWeight:1e3,r[s]=i(o)):o.variable.weight=1;var a=(o.width||0)/2,u=(o.height||0)/2,l=t[s],c=n[s];o.bounds=new Lt(l-a,l+a,c-u,c+u)})},e.prototype.xProject=function(t,n,r){!this.rootGroup&&!(this.avoidOverlaps||this.xConstraints)||this.project(t,n,t,r,function(i){return i.px},this.xConstraints,Pc,function(i){return i.bounds.setXCentre(r[i.variable.index]=i.variable.position())},function(i){var o=r[i.minVar.index]=i.minVar.position(),s=r[i.maxVar.index]=i.maxVar.position(),a=i.padding/2;i.bounds.x=o-a,i.bounds.X=s+a})},e.prototype.yProject=function(t,n,r){!this.rootGroup&&!this.yConstraints||this.project(t,n,n,r,function(i){return i.py},this.yConstraints,Ac,function(i){return i.bounds.setYCentre(r[i.variable.index]=i.variable.position())},function(i){var o=r[i.minVar.index]=i.minVar.position(),s=r[i.maxVar.index]=i.maxVar.position(),a=i.padding/2;i.bounds.y=o-a,i.bounds.Y=s+a})},e.prototype.projectFunctions=function(){var t=this;return[function(n,r,i){return t.xProject(n,r,i)},function(n,r,i){return t.yProject(n,r,i)}]},e.prototype.project=function(t,n,r,i,o,s,a,u,l){this.setupVariablesAndBounds(t,n,i,o),this.rootGroup&&this.avoidOverlaps&&(Dn(this.rootGroup),s=s.concat(a(this.rootGroup))),this.solve(this.variables,s,r,i),this.nodes.forEach(u),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(l),Dn(this.rootGroup))},e.prototype.solve=function(t,n,r,i){var o=new wt.Solver(t,n);o.setStartingPositions(r),o.setDesiredPositions(i),o.solve()},e}();Ae.Projection=ES;var bn={},Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});var Tc=function(){function e(t){this.elem=t,this.subheaps=[]}return e.prototype.toString=function(t){for(var n="",r=!1,i=0;i<this.subheaps.length;++i){var o=this.subheaps[i];if(!o.elem){r=!1;continue}r&&(n=n+","),n=n+o.toString(t),r=!0}return n!==""&&(n="("+n+")"),(this.elem?t(this.elem):"")+n},e.prototype.forEach=function(t){this.empty()||(t(this.elem,this),this.subheaps.forEach(function(n){return n.forEach(t)}))},e.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(t,n){return t+n.count()},0)},e.prototype.min=function(){return this.elem},e.prototype.empty=function(){return this.elem==null},e.prototype.contains=function(t){if(this===t)return!0;for(var n=0;n<this.subheaps.length;n++)if(this.subheaps[n].contains(t))return!0;return!1},e.prototype.isHeap=function(t){var n=this;return this.subheaps.every(function(r){return t(n.elem,r.elem)&&r.isHeap(t)})},e.prototype.insert=function(t,n){return this.merge(new e(t),n)},e.prototype.merge=function(t,n){return this.empty()?t:t.empty()?this:n(this.elem,t.elem)?(this.subheaps.push(t),this):(t.subheaps.push(this),t)},e.prototype.removeMin=function(t){return this.empty()?null:this.mergePairs(t)},e.prototype.mergePairs=function(t){if(this.subheaps.length==0)return new e(null);if(this.subheaps.length==1)return this.subheaps[0];var n=this.subheaps.pop().merge(this.subheaps.pop(),t),r=this.mergePairs(t);return n.merge(r,t)},e.prototype.decreaseKey=function(t,n,r,i){var o=t.removeMin(i);t.elem=o.elem,t.subheaps=o.subheaps,r!==null&&o.elem!==null&&r(t.elem,t);var s=new e(n);return r!==null&&r(n,s),this.merge(s,i)},e}();Jn.PairingHeap=Tc;var xS=function(){function e(t){this.lessThan=t}return e.prototype.top=function(){return this.empty()?null:this.root.elem},e.prototype.push=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r,i=0,o;o=t[i];++i)r=new Tc(o),this.root=this.empty()?r:this.root.merge(r,this.lessThan);return r},e.prototype.empty=function(){return!this.root||!this.root.elem},e.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},e.prototype.forEach=function(t){this.root.forEach(t)},e.prototype.pop=function(){if(this.empty())return null;var t=this.root.min();return this.root=this.root.removeMin(this.lessThan),t},e.prototype.reduceKey=function(t,n,r){r===void 0&&(r=null),this.root=this.root.decreaseKey(t,n,r,this.lessThan)},e.prototype.toString=function(t){return this.root.toString(t)},e.prototype.count=function(){return this.root.count()},e}();Jn.PriorityQueue=xS;Object.defineProperty(bn,"__esModule",{value:!0});var Fa=Jn,Ha=function(){function e(t,n){this.id=t,this.distance=n}return e}(),SS=function(){function e(t){this.id=t,this.neighbours=[]}return e}(),Ya=function(){function e(t,n,r){this.node=t,this.prev=n,this.d=r}return e}(),kS=function(){function e(t,n,r,i,o){this.n=t,this.es=n,this.neighbours=new Array(this.n);for(var s=this.n;s--;)this.neighbours[s]=new SS(s);for(s=this.es.length;s--;){var a=this.es[s],u=r(a),l=i(a),c=o(a);this.neighbours[u].neighbours.push(new Ha(l,c)),this.neighbours[l].neighbours.push(new Ha(u,c))}}return e.prototype.DistanceMatrix=function(){for(var t=new Array(this.n),n=0;n<this.n;++n)t[n]=this.dijkstraNeighbours(n);return t},e.prototype.DistancesFromNode=function(t){return this.dijkstraNeighbours(t)},e.prototype.PathFromNodeToNode=function(t,n){return this.dijkstraNeighbours(t,n)},e.prototype.PathFromNodeToNodeWithPrevCost=function(t,n,r){var i=new Fa.PriorityQueue(function(g,m){return g.d<=m.d}),o=this.neighbours[t],s=new Ya(o,null,0),a={};for(i.push(s);!i.empty()&&(s=i.pop(),o=s.node,o.id!==n);)for(var u=o.neighbours.length;u--;){var l=o.neighbours[u],c=this.neighbours[l.id];if(!(s.prev&&c.id===s.prev.node.id)){var d=c.id+","+o.id;if(!(d in a&&a[d]<=s.d)){var h=s.prev?r(s.prev.node.id,o.id,c.id):0,f=s.d+l.distance+h;a[d]=f,i.push(new Ya(c,s,f))}}}for(var p=[];s.prev;)s=s.prev,p.push(s.node.id);return p},e.prototype.dijkstraNeighbours=function(t,n){n===void 0&&(n=-1);for(var r=new Fa.PriorityQueue(function(h,f){return h.d<=f.d}),i=this.neighbours.length,o=new Array(i);i--;){var s=this.neighbours[i];s.d=i===t?0:Number.POSITIVE_INFINITY,s.q=r.push(s)}for(;!r.empty();){var a=r.pop();if(o[a.id]=a.d,a.id===n){for(var u=[],l=a;typeof l.prev<"u";)u.push(l.prev.id),l=l.prev;return u}for(i=a.neighbours.length;i--;){var c=a.neighbours[i],l=this.neighbours[c.id],d=a.d+c.distance;a.d!==Number.MAX_VALUE&&l.d>d&&(l.d=d,l.prev=a,r.reduceKey(l.q,l,function(f,p){return f.q=p}))}}return o},e}();bn.Calculator=kS;var Se={},Oc=qe&&qe.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Se,"__esModule",{value:!0});var $S=Ae,ss=function(){function e(){}return e}();Se.Point=ss;var as=function(){function e(t,n,r,i){this.x1=t,this.y1=n,this.x2=r,this.y2=i}return e}();Se.LineSegment=as;var NS=function(e){Oc(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(ss);Se.PolyPoint=NS;function Ge(e,t,n){return(t.x-e.x)*(n.y-e.y)-(n.x-e.x)*(t.y-e.y)}Se.isLeft=Ge;function Je(e,t,n){return Ge(e,t,n)>0}function Ue(e,t,n){return Ge(e,t,n)<0}function CS(e){var t=e.slice(0).sort(function(h,f){return h.x!==f.x?f.x-h.x:f.y-h.y}),n=e.length,r,i=0,o=t[0].x;for(r=1;r<n&&t[r].x===o;++r);var s=r-1,a=[];if(a.push(t[i]),s===n-1)t[s].y!==t[i].y&&a.push(t[s]);else{var u,l=n-1,c=t[n-1].x;for(r=n-2;r>=0&&t[r].x===c;r--);for(u=r+1,r=s;++r<=u;)if(!(Ge(t[i],t[u],t[r])>=0&&r<u)){for(;a.length>1&&!(Ge(a[a.length-2],a[a.length-1],t[r])>0);)a.length-=1;r!=i&&a.push(t[r])}l!=u&&a.push(t[l]);var d=a.length;for(r=u;--r>=s;)if(!(Ge(t[l],t[s],t[r])>=0&&r>s)){for(;a.length>d&&!(Ge(a[a.length-2],a[a.length-1],t[r])>0);)a.length-=1;r!=i&&a.push(t[r])}}return a}Se.ConvexHull=CS;function MS(e,t,n){t.slice(0).sort(function(r,i){return Math.atan2(r.y-e.y,r.x-e.x)-Math.atan2(i.y-e.y,i.x-e.x)}).forEach(n)}Se.clockwiseRadialSweep=MS;function IS(e,t){var n=t.slice(0);return n.push(t[0]),{rtan:Kr(e,n),ltan:Zr(e,n)}}function Kr(e,t){var n=t.length-1,r,i,o,s,a;if(Ue(e,t[1],t[0])&&!Je(e,t[n-1],t[0]))return 0;for(r=0,i=n;;){if(i-r===1)return Je(e,t[r],t[i])?r:i;if(o=Math.floor((r+i)/2),a=Ue(e,t[o+1],t[o]),a&&!Je(e,t[o-1],t[o]))return o;s=Je(e,t[r+1],t[r]),s?a||Je(e,t[r],t[o])?i=o:r=o:a&&Ue(e,t[r],t[o])?i=o:r=o}}function Zr(e,t){var n=t.length-1,r,i,o,s,a;if(Je(e,t[n-1],t[0])&&!Ue(e,t[1],t[0]))return 0;for(r=0,i=n;;){if(i-r===1)return Ue(e,t[r],t[i])?r:i;if(o=Math.floor((r+i)/2),a=Ue(e,t[o+1],t[o]),Je(e,t[o-1],t[o])&&!a)return o;s=Ue(e,t[r+1],t[r]),s?a?Ue(e,t[r],t[o])?i=o:r=o:i=o:a?r=o:Je(e,t[r],t[o])?i=o:r=o}}function mi(e,t,n,r,i,o){var s,a;s=n(t[0],e),a=r(e[s],t);for(var u=!1;!u;){for(u=!0;s===e.length-1&&(s=0),!i(t[a],e[s],e[s+1]);)++s;for(;a===0&&(a=t.length-1),!o(e[s],t[a],t[a-1]);)--a,u=!1}return{t1:s,t2:a}}Se.tangent_PolyPolyC=mi;function PS(e,t){var n=zc(t,e);return{t1:n.t2,t2:n.t1}}Se.LRtangent_PolyPolyC=PS;function zc(e,t){return mi(e,t,Kr,Zr,Je,Ue)}Se.RLtangent_PolyPolyC=zc;function AS(e,t){return mi(e,t,Zr,Zr,Ue,Ue)}Se.LLtangent_PolyPolyC=AS;function TS(e,t){return mi(e,t,Kr,Kr,Je,Je)}Se.RRtangent_PolyPolyC=TS;var Tn=function(){function e(t,n){this.t1=t,this.t2=n}return e}();Se.BiTangent=Tn;var Dc=function(){function e(){}return e}();Se.BiTangents=Dc;var OS=function(e){Oc(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(ss);Se.TVGPoint=OS;var xo=function(){function e(t,n,r,i){this.id=t,this.polyid=n,this.polyvertid=r,this.p=i,i.vv=this}return e}();Se.VisibilityVertex=xo;var Mr=function(){function e(t,n){this.source=t,this.target=n}return e.prototype.length=function(){var t=this.source.p.x-this.target.p.x,n=this.source.p.y-this.target.p.y;return Math.sqrt(t*t+n*n)},e}();Se.VisibilityEdge=Mr;var zS=function(){function e(t,n){if(this.P=t,this.V=[],this.E=[],n)this.V=n.V.slice(0),this.E=n.E.slice(0);else{for(var r=t.length,i=0;i<r;i++){for(var o=t[i],s=0;s<o.length;++s){var a=o[s],u=new xo(this.V.length,i,s,a);this.V.push(u),s>0&&this.E.push(new Mr(o[s-1].vv,u))}o.length>1&&this.E.push(new Mr(o[0].vv,o[o.length-1].vv))}for(var i=0;i<r-1;i++)for(var l=t[i],s=i+1;s<r;s++){var c=t[s],d=Rc(l,c);for(var h in d){var f=d[h],p=l[f.t1],g=c[f.t2];this.addEdgeIfVisible(p,g,i,s)}}}}return e.prototype.addEdgeIfVisible=function(t,n,r,i){this.intersectsPolys(new as(t.x,t.y,n.x,n.y),r,i)||this.E.push(new Mr(t.vv,n.vv))},e.prototype.addPoint=function(t,n){var r=this.P.length;this.V.push(new xo(this.V.length,r,0,t));for(var i=0;i<r;++i)if(i!==n){var o=this.P[i],s=IS(t,o);this.addEdgeIfVisible(t,o[s.ltan],n,i),this.addEdgeIfVisible(t,o[s.rtan],n,i)}return t.vv},e.prototype.intersectsPolys=function(t,n,r){for(var i=0,o=this.P.length;i<o;++i)if(i!=n&&i!=r&&Lc(t,this.P[i]).length>0)return!0;return!1},e}();Se.TangentVisibilityGraph=zS;function Lc(e,t){for(var n=[],r=1,i=t.length;r<i;++r){var o=$S.Rectangle.lineIntersection(e.x1,e.y1,e.x2,e.y2,t[r-1].x,t[r-1].y,t[r].x,t[r].y);o&&n.push(o)}return n}function Rc(e,t){for(var n=e.length-1,r=t.length-1,i=new Dc,o=0;o<n;++o)for(var s=0;s<r;++s){var a=e[o==0?n-1:o-1],u=e[o],l=e[o+1],c=t[s==0?r-1:s-1],d=t[s],h=t[s+1],f=Ge(a,u,d),p=Ge(u,c,d),g=Ge(u,d,h),m=Ge(c,d,u),y=Ge(d,a,u),_=Ge(d,u,l);f>=0&&p>=0&&g<0&&m>=0&&y>=0&&_<0?i.ll=new Tn(o,s):f<=0&&p<=0&&g>0&&m<=0&&y<=0&&_>0?i.rr=new Tn(o,s):f<=0&&p>0&&g<=0&&m>=0&&y<0&&_>=0?i.rl=new Tn(o,s):f>=0&&p<0&&g>=0&&m<=0&&y>0&&_<=0&&(i.lr=new Tn(o,s))}return i}Se.tangents=Rc;function DS(e,t){for(var n=1,r=t.length;n<r;++n)if(Ue(t[n-1],t[n],e))return!1;return!0}function Xa(e,t){return!e.every(function(n){return!DS(n,t)})}function LS(e,t){if(Xa(e,t)||Xa(t,e))return!0;for(var n=1,r=e.length;n<r;++n){var i=e[n],o=e[n-1];if(Lc(new as(o.x,o.y,i.x,i.y),t).length>0)return!0}return!1}Se.polysOverlap=LS;var er={};Object.defineProperty(er,"__esModule",{value:!0});var Xe={PADDING:10,GOLDEN_SECTION:(1+Math.sqrt(5))/2,FLOAT_EPSILON:1e-4,MAX_INERATIONS:100};function RS(e,t,n,d,c,o){c===void 0&&(c=1),o===void 0&&(o=!0);var s=0,a=0,u=t,l=n,c=typeof c<"u"?c:1,d=typeof d<"u"?d:0,h=0,f=0,p=0,g=0,m=[];if(e.length==0)return;y(e),S(e),o&&_(e);function y(z){z.forEach(function(O){V(O)});function V(O){var N=Number.MAX_VALUE,Y=Number.MAX_VALUE,X=0,v=0;O.array.forEach(function($){var b=typeof $.width<"u"?$.width:d,P=typeof $.height<"u"?$.height:d;b/=2,P/=2,X=Math.max($.x+b,X),N=Math.min($.x-b,N),v=Math.max($.y+P,v),Y=Math.min($.y-P,Y)}),O.width=X-N,O.height=v-Y}}function _(z){z.forEach(function(V){var O={x:0,y:0};V.array.forEach(function(X){O.x+=X.x,O.y+=X.y}),O.x/=V.array.length,O.y/=V.array.length;var N={x:O.x-V.width/2,y:O.y-V.height/2},Y={x:V.x-N.x+u/2-h/2,y:V.y-N.y+l/2-f/2};V.array.forEach(function(X){X.x+=Y.x,X.y+=Y.y})})}function S(z,V){var O=Number.POSITIVE_INFINITY,N=0;z.sort(function(U,F){return F.height-U.height}),p=z.reduce(function(U,F){return U.width<F.width?U.width:F.width});for(var Y=M=p,X=R=I(z),v=0,$=Number.MAX_VALUE,b=Number.MAX_VALUE,P=-1,A=Number.MAX_VALUE,C=Number.MAX_VALUE;A>p||C>Xe.FLOAT_EPSILON;){if(P!=1)var M=X-(X-Y)/Xe.GOLDEN_SECTION,$=E(z,M);if(P!=0)var R=Y+(X-Y)/Xe.GOLDEN_SECTION,b=E(z,R);if(A=Math.abs(M-R),C=Math.abs($-b),$<O&&(O=$,N=M),b<O&&(O=b,N=R),$>b?(Y=M,M=R,$=b,P=1):(X=R,R=M,b=$,P=0),v++>100)break}E(z,N)}function E(z,V){m=[],h=0,f=0,g=a;for(var O=0;O<z.length;O++){var N=z[O];k(N,V)}return Math.abs(T()-c)}function k(z,V){for(var O=void 0,N=0;N<m.length;N++)if(m[N].space_left>=z.height&&m[N].x+m[N].width+z.width+Xe.PADDING-V<=Xe.FLOAT_EPSILON){O=m[N];break}m.push(z),O!==void 0?(z.x=O.x+O.width+Xe.PADDING,z.y=O.bottom,z.space_left=z.height,z.bottom=z.y,O.space_left-=z.height+Xe.PADDING,O.bottom+=z.height+Xe.PADDING):(z.y=g,g+=z.height+Xe.PADDING,z.x=s,z.bottom=z.y,z.space_left=z.height),z.y+z.height-f>-Xe.FLOAT_EPSILON&&(f=z.y+z.height-a),z.x+z.width-h>-Xe.FLOAT_EPSILON&&(h=z.x+z.width-s)}function I(z){var V=0;return z.forEach(function(O){return V+=O.width+Xe.PADDING}),V}function T(){return h/f}}er.applyPacking=RS;function BS(e,t){for(var n={},r={},i=[],o=0,s=0;s<t.length;s++){var a=t[s],u=a.source,l=a.target;r[u.index]?r[u.index].push(l):r[u.index]=[l],r[l.index]?r[l.index].push(u):r[l.index]=[u]}for(var s=0;s<e.length;s++){var c=e[s];n[c.index]||d(c,!0)}function d(h,f){if(n[h.index]===void 0){f&&(o++,i.push({array:[]})),n[h.index]=o,i[o-1].array.push(h);var p=r[h.index];if(p)for(var g=0;g<p.length;g++)d(p[g],!1)}}return i}er.separateGraphs=BS;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=xt,n=Vt,r=rn,i=Ae,o=bn,s=Se,a=er,u;(function(d){d[d.start=0]="start",d[d.tick=1]="tick",d[d.end=2]="end"})(u=e.EventType||(e.EventType={}));function l(d){return typeof d.leaves<"u"||typeof d.groups<"u"}var c=function(){function d(){var h=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:d.getSourceIndex,getTargetIndex:d.getTargetIndex,setLength:d.setLinkLength,getType:function(f){return typeof h._linkType=="function"?h._linkType(f):0}}}return d.prototype.on=function(h,f){return this.event||(this.event={}),typeof h=="string"?this.event[u[h]]=f:this.event[h]=f,this},d.prototype.trigger=function(h){this.event&&typeof this.event[h.type]<"u"&&this.event[h.type](h)},d.prototype.kick=function(){for(;!this.tick(););},d.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:u.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var h=this._nodes.length;this._links.length;var f,p;for(this._descent.locks.clear(),p=0;p<h;++p)if(f=this._nodes[p],f.fixed){(typeof f.px>"u"||typeof f.py>"u")&&(f.px=f.x,f.py=f.y);var g=[f.px,f.py];this._descent.locks.add(p,g)}var m=this._descent.rungeKutta();return m===0?this._alpha=0:typeof this._lastStress<"u"&&(this._alpha=m),this._lastStress=m,this.updateNodePositions(),this.trigger({type:u.tick,alpha:this._alpha,stress:this._lastStress}),!1},d.prototype.updateNodePositions=function(){for(var h=this._descent.x[0],f=this._descent.x[1],p,g=this._nodes.length;g--;)p=this._nodes[g],p.x=h[g],p.y=f[g]},d.prototype.nodes=function(h){if(!h){if(this._nodes.length===0&&this._links.length>0){var f=0;this._links.forEach(function(g){f=Math.max(f,g.source,g.target)}),this._nodes=new Array(++f);for(var p=0;p<f;++p)this._nodes[p]={}}return this._nodes}return this._nodes=h,this},d.prototype.groups=function(h){var f=this;return h?(this._groups=h,this._rootGroup={},this._groups.forEach(function(p){typeof p.padding>"u"&&(p.padding=1),typeof p.leaves<"u"&&p.leaves.forEach(function(g,m){typeof g=="number"&&((p.leaves[m]=f._nodes[g]).parent=p)}),typeof p.groups<"u"&&p.groups.forEach(function(g,m){typeof g=="number"&&((p.groups[m]=f._groups[g]).parent=p)})}),this._rootGroup.leaves=this._nodes.filter(function(p){return typeof p.parent>"u"}),this._rootGroup.groups=this._groups.filter(function(p){return typeof p.parent>"u"}),this):this._groups},d.prototype.powerGraphGroups=function(h){var f=t.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(f.groups),h(f),this},d.prototype.avoidOverlaps=function(h){return arguments.length?(this._avoidOverlaps=h,this):this._avoidOverlaps},d.prototype.handleDisconnected=function(h){return arguments.length?(this._handleDisconnected=h,this):this._handleDisconnected},d.prototype.flowLayout=function(h,f){return arguments.length||(h="y"),this._directedLinkConstraints={axis:h,getMinSeparation:typeof f=="number"?function(){return f}:f},this},d.prototype.links=function(h){return arguments.length?(this._links=h,this):this._links},d.prototype.constraints=function(h){return arguments.length?(this._constraints=h,this):this._constraints},d.prototype.distanceMatrix=function(h){return arguments.length?(this._distanceMatrix=h,this):this._distanceMatrix},d.prototype.size=function(h){return h?(this._canvasSize=h,this):this._canvasSize},d.prototype.defaultNodeSize=function(h){return h?(this._defaultNodeSize=h,this):this._defaultNodeSize},d.prototype.groupCompactness=function(h){return h?(this._groupCompactness=h,this):this._groupCompactness},d.prototype.linkDistance=function(h){return h?(this._linkDistance=typeof h=="function"?h:+h,this._linkLengthCalculator=null,this):this._linkDistance},d.prototype.linkType=function(h){return this._linkType=h,this},d.prototype.convergenceThreshold=function(h){return h?(this._threshold=typeof h=="function"?h:+h,this):this._threshold},d.prototype.alpha=function(h){return arguments.length?(h=+h,this._alpha?h>0?this._alpha=h:this._alpha=0:h>0&&(this._running||(this._running=!0,this.trigger({type:u.start,alpha:this._alpha=h}),this.kick())),this):this._alpha},d.prototype.getLinkLength=function(h){return typeof this._linkDistance=="function"?+this._linkDistance(h):this._linkDistance},d.setLinkLength=function(h,f){h.length=f},d.prototype.getLinkType=function(h){return typeof this._linkType=="function"?this._linkType(h):0},d.prototype.symmetricDiffLinkLengths=function(h,f){var p=this;return f===void 0&&(f=1),this.linkDistance(function(g){return h*g.length}),this._linkLengthCalculator=function(){return n.symmetricDiffLinkLengths(p._links,p.linkAccessor,f)},this},d.prototype.jaccardLinkLengths=function(h,f){var p=this;return f===void 0&&(f=1),this.linkDistance(function(g){return h*g.length}),this._linkLengthCalculator=function(){return n.jaccardLinkLengths(p._links,p.linkAccessor,f)},this},d.prototype.start=function(h,f,p,g,m,y){var _=this;h===void 0&&(h=0),f===void 0&&(f=0),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=!0),y===void 0&&(y=!0);var S,E=this.nodes().length,k=E+2*this._groups.length;this._links.length;var I=this._canvasSize[0],T=this._canvasSize[1],z=new Array(k),V=new Array(k),O=null,N=this._avoidOverlaps;this._nodes.forEach(function(C,M){C.index=M,typeof C.x>"u"&&(C.x=I/2,C.y=T/2),z[M]=C.x,V[M]=C.y}),this._linkLengthCalculator&&this._linkLengthCalculator();var Y;this._distanceMatrix?Y=this._distanceMatrix:(Y=new o.Calculator(k,this._links,d.getSourceIndex,d.getTargetIndex,function(C){return _.getLinkLength(C)}).DistanceMatrix(),O=r.Descent.createSquareMatrix(k,function(){return 2}),this._links.forEach(function(C){typeof C.source=="number"&&(C.source=_._nodes[C.source]),typeof C.target=="number"&&(C.target=_._nodes[C.target])}),this._links.forEach(function(C){var M=d.getSourceIndex(C),R=d.getTargetIndex(C);O[M][R]=O[R][M]=C.weight||1}));var X=r.Descent.createSquareMatrix(k,function(C,M){return Y[C][M]});if(this._rootGroup&&typeof this._rootGroup.groups<"u"){var S=E,v=function(M,R,U,F){O[M][R]=O[R][M]=U,X[M][R]=X[R][M]=F};this._groups.forEach(function(M){v(S,S+1,_._groupCompactness,.1),z[S]=0,V[S++]=0,z[S]=0,V[S++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var $=this._constraints||[];this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,$=$.concat(n.generateDirectedEdgeConstraints(E,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new r.Descent([z,V],X),this._descent.locks.clear();for(var S=0;S<E;++S){var b=this._nodes[S];if(b.fixed){b.px=b.x,b.py=b.y;var P=[b.x,b.y];this._descent.locks.add(S,P)}}if(this._descent.threshold=this._threshold,this.initialLayout(h,z,V),$.length>0&&(this._descent.project=new i.Projection(this._nodes,this._groups,this._rootGroup,$).projectFunctions()),this._descent.run(f),this.separateOverlappingComponents(I,T,y),this.avoidOverlaps(N),N&&(this._nodes.forEach(function(C,M){C.x=z[M],C.y=V[M]}),this._descent.project=new i.Projection(this._nodes,this._groups,this._rootGroup,$,!0).projectFunctions(),this._nodes.forEach(function(C,M){z[M]=C.x,V[M]=C.y})),this._descent.G=O,this._descent.run(p),g){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=E,this._descent.scaleSnapByMaxH=E!=k;var A=r.Descent.createSquareMatrix(k,function(C,M){return C>=E||M>=E?O[C][M]:0});this._descent.G=A,this._descent.run(g)}return this.updateNodePositions(),this.separateOverlappingComponents(I,T,y),m?this.resume():this},d.prototype.initialLayout=function(h,f,p){if(this._groups.length>0&&h>0){var g=this._nodes.length,m=this._links.map(function(_){return{source:_.source.index,target:_.target.index}}),y=this._nodes.map(function(_){return{index:_.index}});this._groups.forEach(function(_,S){y.push({index:_.index=g+S})}),this._groups.forEach(function(_,S){typeof _.leaves<"u"&&_.leaves.forEach(function(E){return m.push({source:_.index,target:E.index})}),typeof _.groups<"u"&&_.groups.forEach(function(E){return m.push({source:_.index,target:E.index})})}),new d().size(this.size()).nodes(y).links(m).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(h,0,0,0,!1),this._nodes.forEach(function(_){f[_.index]=y[_.index].x,p[_.index]=y[_.index].y})}else this._descent.run(h)},d.prototype.separateOverlappingComponents=function(h,f,p){var g=this;if(p===void 0&&(p=!0),!this._distanceMatrix&&this._handleDisconnected){var m=this._descent.x[0],y=this._descent.x[1];this._nodes.forEach(function(S,E){S.x=m[E],S.y=y[E]});var _=a.separateGraphs(this._nodes,this._links);a.applyPacking(_,h,f,this._defaultNodeSize,1,p),this._nodes.forEach(function(S,E){g._descent.x[0][E]=S.x,g._descent.x[1][E]=S.y,S.bounds&&(S.bounds.setXCentre(S.x),S.bounds.setYCentre(S.y))})}},d.prototype.resume=function(){return this.alpha(.1)},d.prototype.stop=function(){return this.alpha(0)},d.prototype.prepareEdgeRouting=function(h){h===void 0&&(h=0),this._visibilityGraph=new s.TangentVisibilityGraph(this._nodes.map(function(f){return f.bounds.inflate(-h).vertices()}))},d.prototype.routeEdge=function(h,f,p){f===void 0&&(f=5);var g=[],m=new s.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),y={x:h.source.x,y:h.source.y},_={x:h.target.x,y:h.target.y},S=m.addPoint(y,h.source.index),E=m.addPoint(_,h.target.index);m.addEdgeIfVisible(y,_,h.source.index,h.target.index),typeof p<"u"&&p(m);var k=function($){return $.source.id},I=function($){return $.target.id},T=function($){return $.length()},z=new o.Calculator(m.V.length,m.E,k,I,T),V=z.PathFromNodeToNode(S.id,E.id);if(V.length===1||V.length===m.V.length){var O=i.makeEdgeBetween(h.source.innerBounds,h.target.innerBounds,f);g=[O.sourceIntersection,O.arrowStart]}else{for(var N=V.length-2,Y=m.V[V[N]].p,X=m.V[V[0]].p,g=[h.source.innerBounds.rayIntersection(Y.x,Y.y)],v=N;v>=0;--v)g.push(m.V[V[v]].p);g.push(i.makeEdgeTo(X,h.target.innerBounds,f))}return g},d.getSourceIndex=function(h){return typeof h.source=="number"?h.source:h.source.index},d.getTargetIndex=function(h){return typeof h.target=="number"?h.target:h.target.index},d.linkId=function(h){return d.getSourceIndex(h)+"-"+d.getTargetIndex(h)},d.dragStart=function(h){l(h)?d.storeOffset(h,d.dragOrigin(h)):(d.stopNode(h),h.fixed|=2)},d.stopNode=function(h){h.px=h.x,h.py=h.y},d.storeOffset=function(h,f){typeof h.leaves<"u"&&h.leaves.forEach(function(p){p.fixed|=2,d.stopNode(p),p._dragGroupOffsetX=p.x-f.x,p._dragGroupOffsetY=p.y-f.y}),typeof h.groups<"u"&&h.groups.forEach(function(p){return d.storeOffset(p,f)})},d.dragOrigin=function(h){return l(h)?{x:h.bounds.cx(),y:h.bounds.cy()}:h},d.drag=function(h,f){l(h)?(typeof h.leaves<"u"&&h.leaves.forEach(function(p){h.bounds.setXCentre(f.x),h.bounds.setYCentre(f.y),p.px=p._dragGroupOffsetX+f.x,p.py=p._dragGroupOffsetY+f.y}),typeof h.groups<"u"&&h.groups.forEach(function(p){return d.drag(p,f)})):(h.px=f.x,h.py=f.y)},d.dragEnd=function(h){l(h)?(typeof h.leaves<"u"&&h.leaves.forEach(function(f){d.dragEnd(f),delete f._dragGroupOffsetX,delete f._dragGroupOffsetY}),typeof h.groups<"u"&&h.groups.forEach(d.dragEnd)):h.fixed&=-7},d.mouseOver=function(h){h.fixed|=4,h.px=h.x,h.py=h.y},d.mouseOut=function(h){h.fixed&=-5},d}();e.Layout=c})(_n);var VS=qe&&qe.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(vi,"__esModule",{value:!0});var Vi=_n,Bc=function(e){VS(t,e);function t(n){var r=e.call(this)||this,i=n;return i.trigger&&(r.trigger=i.trigger),i.kick&&(r.kick=i.kick),i.drag&&(r.drag=i.drag),i.on&&(r.on=i.on),r.dragstart=r.dragStart=Vi.Layout.dragStart,r.dragend=r.dragEnd=Vi.Layout.dragEnd,r}return t.prototype.trigger=function(n){},t.prototype.kick=function(){},t.prototype.drag=function(){},t.prototype.on=function(n,r){return this},t}(Vi.Layout);vi.LayoutAdaptor=Bc;function GS(e){return new Bc(e)}vi.adaptor=GS;var us={},yi={},FS=qe&&qe.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(yi,"__esModule",{value:!0});var Be=_n,Vc=function(e){FS(t,e);function t(){var n=e.call(this)||this;n.event=d3.dispatch(Be.EventType[Be.EventType.start],Be.EventType[Be.EventType.tick],Be.EventType[Be.EventType.end]);var r=n;return n.drag=function(){if(!i)var i=d3.behavior.drag().origin(Be.Layout.dragOrigin).on("dragstart.d3adaptor",Be.Layout.dragStart).on("drag.d3adaptor",function(o){Be.Layout.drag(o,d3.event),r.resume()}).on("dragend.d3adaptor",Be.Layout.dragEnd);if(!arguments.length)return i;this.call(i)},n}return t.prototype.trigger=function(n){var r={type:Be.EventType[n.type],alpha:n.alpha,stress:n.stress};this.event[r.type](r)},t.prototype.kick=function(){var n=this;d3.timer(function(){return e.prototype.tick.call(n)})},t.prototype.on=function(n,r){return typeof n=="string"?this.event.on(n,r):this.event.on(Be.EventType[n],r),this},t}(Be.Layout);yi.D3StyleLayoutAdaptor=Vc;function HS(){return new Vc}yi.d3adaptor=HS;var ls={},YS=qe&&qe.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(ls,"__esModule",{value:!0});var Ve=_n,XS=function(e){YS(t,e);function t(n){var r=e.call(this)||this;r.d3Context=n,r.event=n.dispatch(Ve.EventType[Ve.EventType.start],Ve.EventType[Ve.EventType.tick],Ve.EventType[Ve.EventType.end]);var i=r;return r.drag=function(){if(!o)var o=n.drag().subject(Ve.Layout.dragOrigin).on("start.d3adaptor",Ve.Layout.dragStart).on("drag.d3adaptor",function(s){Ve.Layout.drag(s,n.event),i.resume()}).on("end.d3adaptor",Ve.Layout.dragEnd);if(!arguments.length)return o;arguments[0].call(o)},r}return t.prototype.trigger=function(n){var r={type:Ve.EventType[n.type],alpha:n.alpha,stress:n.stress};this.event.call(r.type,r)},t.prototype.kick=function(){var n=this,r=this.d3Context.timer(function(){return e.prototype.tick.call(n)&&r.stop()})},t.prototype.on=function(n,r){return typeof n=="string"?this.event.on(n,r):this.event.on(Ve.EventType[n],r),this},t}(Ve.Layout);ls.D3StyleLayoutAdaptor=XS;Object.defineProperty(us,"__esModule",{value:!0});var US=yi,WS=ls;function qS(e){return!e||KS(e)?new US.D3StyleLayoutAdaptor:new WS.D3StyleLayoutAdaptor(e)}us.d3adaptor=qS;function KS(e){var t=/^3\./;return e.version&&e.version.match(t)!==null}var on={};Object.defineProperty(on,"__esModule",{value:!0});var ZS=Ae,Gi=rt,jS=bn,Gc=function(){function e(t,n,r){this.id=t,this.rect=n,this.children=r,this.leaf=typeof r>"u"||r.length===0}return e}();on.NodeWrapper=Gc;var So=function(){function e(t,n,r,i,o){i===void 0&&(i=null),o===void 0&&(o=null),this.id=t,this.x=n,this.y=r,this.node=i,this.line=o}return e}();on.Vert=So;var ko=function(){function e(t,n){this.s=t,this.t=n;var r=e.findMatch(t,n),i=n.slice(0).reverse(),o=e.findMatch(t,i);r.length>=o.length?(this.length=r.length,this.si=r.si,this.ti=r.ti,this.reversed=!1):(this.length=o.length,this.si=o.si,this.ti=n.length-o.ti-o.length,this.reversed=!0)}return e.findMatch=function(t,n){for(var r=t.length,i=n.length,o={length:0,si:-1,ti:-1},s=new Array(r),a=0;a<r;a++){s[a]=new Array(i);for(var u=0;u<i;u++)if(t[a]===n[u]){var l=s[a][u]=a===0||u===0?1:s[a-1][u-1]+1;l>o.length&&(o.length=l,o.si=a-l+1,o.ti=u-l+1)}else s[a][u]=0}return o},e.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},e}();on.LongestCommonSubsequence=ko;var QS=function(){function e(t,n,r){var i=this;r===void 0&&(r=12),this.originalnodes=t,this.groupPadding=r,this.leaves=null,this.nodes=t.map(function(g,m){return new Gc(m,n.getBounds(g),n.getChildren(g))}),this.leaves=this.nodes.filter(function(g){return g.leaf}),this.groups=this.nodes.filter(function(g){return!g.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(g){return g.children.forEach(function(m){return i.nodes[m].parent=g})}),this.root={children:[]},this.nodes.forEach(function(g){typeof g.parent>"u"&&(g.parent=i.root,i.root.children.push(g.id)),g.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(g,m){return i.getDepth(g)-i.getDepth(m)});var o=this.backToFront.slice(0).reverse().filter(function(g){return!g.leaf});o.forEach(function(g){var m=ZS.Rectangle.empty();g.children.forEach(function(y){return m=m.union(i.nodes[y].rect)}),g.rect=m.inflate(i.groupPadding)});var s=this.midPoints(this.cols.map(function(g){return g.pos})),a=this.midPoints(this.rows.map(function(g){return g.pos})),u=s[0],l=s[s.length-1],c=a[0],d=a[a.length-1],h=this.rows.map(function(g){return{x1:u,x2:l,y1:g.pos,y2:g.pos}}).concat(a.map(function(g){return{x1:u,x2:l,y1:g,y2:g}})),f=this.cols.map(function(g){return{x1:g.pos,x2:g.pos,y1:c,y2:d}}).concat(s.map(function(g){return{x1:g,x2:g,y1:c,y2:d}})),p=h.concat(f);p.forEach(function(g){return g.verts=[]}),this.verts=[],this.edges=[],h.forEach(function(g){return f.forEach(function(m){var y=new So(i.verts.length,m.x1,g.y1);g.verts.push(y),m.verts.push(y),i.verts.push(y);for(var _=i.backToFront.length;_-- >0;){var S=i.backToFront[_],E=S.rect,k=Math.abs(y.x-E.cx()),I=Math.abs(y.y-E.cy());if(k<E.width()/2&&I<E.height()/2){y.node=S;break}}})}),p.forEach(function(g,m){i.nodes.forEach(function(I,T){I.rect.lineIntersections(g.x1,g.y1,g.x2,g.y2).forEach(function(z,V){var O=new So(i.verts.length,z.x,z.y,I,g);i.verts.push(O),g.verts.push(O),I.ports.push(O)})});var y=Math.abs(g.y1-g.y2)<.1,_=function(I,T){return y?T.x-I.x:T.y-I.y};g.verts.sort(_);for(var S=1;S<g.verts.length;S++){var E=g.verts[S-1],k=g.verts[S];E.node&&E.node===k.node&&E.node.leaf||i.edges.push({source:E.id,target:k.id,length:Math.abs(_(E,k))})}})}return e.prototype.avg=function(t){return t.reduce(function(n,r){return n+r})/t.length},e.prototype.getGridLines=function(t){for(var n=[],r=this.leaves.slice(0,this.leaves.length);r.length>0;){var i=r.filter(function(s){return s.rect["overlap"+t.toUpperCase()](r[0].rect)}),o={nodes:i,pos:this.avg(i.map(function(s){return s.rect["c"+t]()}))};n.push(o),o.nodes.forEach(function(s){return r.splice(r.indexOf(s),1)})}return n.sort(function(s,a){return s.pos-a.pos}),n},e.prototype.getDepth=function(t){for(var n=0;t.parent!==this.root;)n++,t=t.parent;return n},e.prototype.midPoints=function(t){for(var n=t[1]-t[0],r=[t[0]-n/2],i=1;i<t.length;i++)r.push((t[i]+t[i-1])/2);return r.push(t[t.length-1]+n/2),r},e.prototype.findLineage=function(t){var n=[t];do t=t.parent,n.push(t);while(t!==this.root);return n.reverse()},e.prototype.findAncestorPathBetween=function(t,n){for(var r=this.findLineage(t),i=this.findLineage(n),o=0;r[o]===i[o];)o++;return{commonAncestor:r[o-1],lineages:r.slice(o).concat(i.slice(o))}},e.prototype.siblingObstacles=function(t,n){var r=this,i=this.findAncestorPathBetween(t,n),o={};i.lineages.forEach(function(a){return o[a.id]={}});var s=i.commonAncestor.children.filter(function(a){return!(a in o)});return i.lineages.filter(function(a){return a.parent!==i.commonAncestor}).forEach(function(a){return s=s.concat(a.parent.children.filter(function(u){return u!==a.id}))}),s.map(function(a){return r.nodes[a]})},e.getSegmentSets=function(t,n,r){for(var i=[],o=0;o<t.length;o++)for(var s=t[o],a=0;a<s.length;a++){var u=s[a];u.edgeid=o,u.i=a;var l=u[1][n]-u[0][n];Math.abs(l)<.1&&i.push(u)}i.sort(function(f,p){return f[0][n]-p[0][n]});for(var c=[],d=null,h=0;h<i.length;h++){var u=i[h];(!d||Math.abs(u[0][n]-d.pos)>.1)&&(d={pos:u[0][n],segments:[]},c.push(d)),d.segments.push(u)}return c},e.nudgeSegs=function(t,n,r,i,o,s){var a=i.length;if(!(a<=1)){for(var u=i.map(function(S){return new Gi.Variable(S[0][t])}),l=[],c=0;c<a;c++)for(var d=0;d<a;d++)if(c!==d){var h=i[c],f=i[d],p=h.edgeid,g=f.edgeid,m=-1,y=-1;t=="x"?o(p,g)&&(h[0][n]<h[1][n]?(m=d,y=c):(m=c,y=d)):o(p,g)&&(h[0][n]<h[1][n]?(m=c,y=d):(m=d,y=c)),m>=0&&l.push(new Gi.Constraint(u[m],u[y],s))}var _=new Gi.Solver(u,l);_.solve(),u.forEach(function(S,E){var k=i[E],I=S.position();k[0][t]=k[1][t]=I;var T=r[k.edgeid];k.i>0&&(T[k.i-1][1][t]=I),k.i<T.length-1&&(T[k.i+1][0][t]=I)})}},e.nudgeSegments=function(t,n,r,i,o){for(var s=e.getSegmentSets(t,n,r),a=0;a<s.length;a++){for(var u=s[a],l=[],c=0;c<u.segments.length;c++){var d=u.segments[c];l.push({type:0,s:d,pos:Math.min(d[0][r],d[1][r])}),l.push({type:1,s:d,pos:Math.max(d[0][r],d[1][r])})}l.sort(function(p,g){return p.pos-g.pos+p.type-g.type});var h=[],f=0;l.forEach(function(p){p.type===0?(h.push(p.s),f++):f--,f==0&&(e.nudgeSegs(n,r,t,h,i,o),h=[])})}},e.prototype.routeEdges=function(t,n,r,i){var o=this,s=t.map(function(l){return o.route(r(l),i(l))}),a=e.orderEdges(s),u=s.map(function(l){return e.makeSegments(l)});return e.nudgeSegments(u,"x","y",a,n),e.nudgeSegments(u,"y","x",a,n),e.unreverseEdges(u,s),u},e.unreverseEdges=function(t,n){t.forEach(function(r,i){var o=n[i];o.reversed&&(r.reverse(),r.forEach(function(s){s.reverse()}))})},e.angleBetween2Lines=function(t,n){var r=Math.atan2(t[0].y-t[1].y,t[0].x-t[1].x),i=Math.atan2(n[0].y-n[1].y,n[0].x-n[1].x),o=r-i;return(o>Math.PI||o<-Math.PI)&&(o=i-r),o},e.isLeft=function(t,n,r){return(n.x-t.x)*(r.y-t.y)-(n.y-t.y)*(r.x-t.x)<=0},e.getOrder=function(t){for(var n={},r=0;r<t.length;r++){var i=t[r];typeof n[i.l]>"u"&&(n[i.l]={}),n[i.l][i.r]=!0}return function(o,s){return typeof n[o]<"u"&&n[o][s]}},e.orderEdges=function(t){for(var n=[],r=0;r<t.length-1;r++)for(var i=r+1;i<t.length;i++){var o=t[r],s=t[i],a=new ko(o,s),u,l,c;if(a.length!==0){if(a.reversed&&(s.reverse(),s.reversed=!0,a=new ko(o,s)),(a.si<=0||a.ti<=0)&&(a.si+a.length>=o.length||a.ti+a.length>=s.length)){n.push({l:r,r:i});continue}a.si+a.length>=o.length||a.ti+a.length>=s.length?(u=o[a.si+1],c=o[a.si-1],l=s[a.ti-1]):(u=o[a.si+a.length-2],l=o[a.si+a.length],c=s[a.ti+a.length]),e.isLeft(u,l,c)?n.push({l:i,r}):n.push({l:r,r:i})}}return e.getOrder(n)},e.makeSegments=function(t){function n(l){return{x:l.x,y:l.y}}for(var r=function(l,c,d){return Math.abs((c.x-l.x)*(d.y-l.y)-(c.y-l.y)*(d.x-l.x))<.001},i=[],o=n(t[0]),s=1;s<t.length;s++){var a=n(t[s]),u=s<t.length-1?t[s+1]:null;(!u||!r(o,a,u))&&(i.push([o,a]),o=a)}return i},e.prototype.route=function(t,n){var r=this,i=this.nodes[t],o=this.nodes[n];this.obstacles=this.siblingObstacles(i,o);var s={};this.obstacles.forEach(function(y){return s[y.id]=y}),this.passableEdges=this.edges.filter(function(y){var _=r.verts[y.source],S=r.verts[y.target];return!(_.node&&_.node.id in s||S.node&&S.node.id in s)});for(var a=1;a<i.ports.length;a++){var u=i.ports[0].id,l=i.ports[a].id;this.passableEdges.push({source:u,target:l,length:0})}for(var a=1;a<o.ports.length;a++){var u=o.ports[0].id,l=o.ports[a].id;this.passableEdges.push({source:u,target:l,length:0})}var c=function(y){return y.source},d=function(y){return y.target},h=function(y){return y.length},f=new jS.Calculator(this.verts.length,this.passableEdges,c,d,h),p=function(y,_,S){var E=r.verts[y],k=r.verts[_],I=r.verts[S],T=Math.abs(I.x-E.x),z=Math.abs(I.y-E.y);return E.node===i&&E.node===k.node||k.node===o&&k.node===I.node?0:T>1&&z>1?1e3:0},g=f.PathFromNodeToNodeWithPrevCost(i.ports[0].id,o.ports[0].id,p),m=g.reverse().map(function(y){return r.verts[y]});return m.push(this.nodes[o.id].ports[0]),m.filter(function(y,_){return!(_<m.length-1&&m[_+1].node===i&&y.node===i||_>0&&y.node===o&&m[_-1].node===o)})},e.getRoutePath=function(t,n,r,i){var o={routepath:"M "+t[0][0].x+" "+t[0][0].y+" ",arrowpath:""};if(t.length>1)for(var s=0;s<t.length;s++){var a=t[s],u=a[1].x,l=a[1].y,c=u-a[0].x,d=l-a[0].y;if(s<t.length-1){Math.abs(c)>0?u-=c/Math.abs(c)*n:l-=d/Math.abs(d)*n,o.routepath+="L "+u+" "+l+" ";var h=t[s+1],f=h[0].x,p=h[0].y,g=h[1].x,m=h[1].y;c=g-f,d=m-p;var y=e.angleBetween2Lines(a,h)<0?1:0,_,S;Math.abs(c)>0?(_=f+c/Math.abs(c)*n,S=p):(_=f,S=p+d/Math.abs(d)*n);var E=Math.abs(_-u),k=Math.abs(S-l);o.routepath+="A "+E+" "+k+" 0 0 "+y+" "+_+" "+S+" "}else{var I=[u,l],T,z;Math.abs(c)>0?(u-=c/Math.abs(c)*i,T=[u,l+r],z=[u,l-r]):(l-=d/Math.abs(d)*i,T=[u+r,l],z=[u-r,l]),o.routepath+="L "+u+" "+l+" ",i>0&&(o.arrowpath="M "+I[0]+" "+I[1]+" L "+T[0]+" "+T[1]+" L "+z[0]+" "+z[1])}}else{var a=t[0],u=a[1].x,l=a[1].y,c=u-a[0].x,d=l-a[0].y,I=[u,l],T,z;Math.abs(c)>0?(u-=c/Math.abs(c)*i,T=[u,l+r],z=[u,l-r]):(l-=d/Math.abs(d)*i,T=[u+r,l],z=[u-r,l]),o.routepath+="L "+u+" "+l+" ",i>0&&(o.arrowpath="M "+I[0]+" "+I[1]+" L "+T[0]+" "+T[1]+" L "+z[0]+" "+z[1])}return o},e}();on.GridRouter=QS;var tr={};Object.defineProperty(tr,"__esModule",{value:!0});var JS=bn,Fi=rn,ek=Ae,tk=Vt,nk=function(){function e(t,n){this.source=t,this.target=n}return e.prototype.actualLength=function(t){var n=this;return Math.sqrt(t.reduce(function(r,i){var o=i[n.target]-i[n.source];return r+o*o},0))},e}();tr.Link3D=nk;var rk=function(){function e(t,n,r){t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),this.x=t,this.y=n,this.z=r}return e}();tr.Node3D=rk;var ik=function(){function e(t,n,r){var i=this;r===void 0&&(r=1),this.nodes=t,this.links=n,this.idealLinkLength=r,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(e.k);for(var o=0;o<e.k;++o)this.result[o]=new Array(t.length);t.forEach(function(s,a){for(var u=0,l=e.dims;u<l.length;u++){var c=l[u];typeof s[c]>"u"&&(s[c]=Math.random())}i.result[0][a]=s.x,i.result[1][a]=s.y,i.result[2][a]=s.z})}return e.prototype.linkLength=function(t){return t.actualLength(this.result)},e.prototype.start=function(t){var n=this;t===void 0&&(t=100);var r=this.nodes.length,i=new ok;this.useJaccardLinkLengths&&tk.jaccardLinkLengths(this.links,i,1.5),this.links.forEach(function(c){return c.length*=n.idealLinkLength});var o=new JS.Calculator(r,this.links,function(c){return c.source},function(c){return c.target},function(c){return c.length}).DistanceMatrix(),s=Fi.Descent.createSquareMatrix(r,function(c,d){return o[c][d]}),a=Fi.Descent.createSquareMatrix(r,function(){return 2});this.links.forEach(function(c){var d=c.source,h=c.target;return a[d][h]=a[h][d]=1}),this.descent=new Fi.Descent(this.result,s),this.descent.threshold=.001,this.descent.G=a,this.constraints&&(this.descent.project=new ek.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var u=0;u<this.nodes.length;u++){var l=this.nodes[u];l.fixed&&this.descent.locks.add(u,[l.x,l.y,l.z])}return this.descent.run(t),this},e.prototype.tick=function(){this.descent.locks.clear();for(var t=0;t<this.nodes.length;t++){var n=this.nodes[t];n.fixed&&this.descent.locks.add(t,[n.x,n.y,n.z])}return this.descent.rungeKutta()},e.dims=["x","y","z"],e.k=e.dims.length,e}();tr.Layout3D=ik;var ok=function(){function e(){}return e.prototype.getSourceIndex=function(t){return t.source},e.prototype.getTargetIndex=function(t){return t.target},e.prototype.getLength=function(t){return t.length},e.prototype.setLength=function(t,n){t.length=n},e}(),_i={};Object.defineProperty(_i,"__esModule",{value:!0});var Hi=_n,sk=on;function ak(e,t,n,r){e.cola.start(0,0,0,10,!1);var i=uk(e.cola.nodes(),e.cola.groups(),n,r);return i.routeEdges(e.powerGraph.powerEdges,t,function(o){return o.source.routerNode.id},function(o){return o.target.routerNode.id})}_i.gridify=ak;function uk(e,t,n,r){e.forEach(function(o){o.routerNode={name:o.name,bounds:o.bounds.inflate(-n)}}),t.forEach(function(o){o.routerNode={bounds:o.bounds.inflate(-r),children:(typeof o.groups<"u"?o.groups.map(function(s){return e.length+s.id}):[]).concat(typeof o.leaves<"u"?o.leaves.map(function(s){return s.index}):[])}});var i=e.concat(t).map(function(o,s){return o.routerNode.id=s,o.routerNode});return new sk.GridRouter(i,{getChildren:function(o){return o.children},getBounds:function(o){return o.bounds}},n-r)}function lk(e,t,n){var r;e.nodes.forEach(function(a,u){return a.index=u}),new Hi.Layout().avoidOverlaps(!1).nodes(e.nodes).links(e.links).powerGraphGroups(function(a){r=a,r.groups.forEach(function(u){return u.padding=n})});var i=e.nodes.length,o=[],s=e.nodes.slice(0);return s.forEach(function(a,u){return a.index=u}),r.groups.forEach(function(a){var u=a.index=a.id+i;s.push(a),typeof a.leaves<"u"&&a.leaves.forEach(function(l){return o.push({source:u,target:l.index})}),typeof a.groups<"u"&&a.groups.forEach(function(l){return o.push({source:u,target:l.id+i})})}),r.powerEdges.forEach(function(a){o.push({source:a.source.index,target:a.target.index})}),new Hi.Layout().size(t).nodes(s).links(o).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:new Hi.Layout().convergenceThreshold(.001).size(t).avoidOverlaps(!0).nodes(e.nodes).links(e.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(a){r=a,r.groups.forEach(function(u){u.padding=n})}).start(50,0,100,0,!1),powerGraph:r}}_i.powerGraphGridLayout=lk;(function(e){function t(n){for(var r in n)e.hasOwnProperty(r)||(e[r]=n[r])}Object.defineProperty(e,"__esModule",{value:!0}),t(vi),t(us),t(rn),t(Se),t(on),t(er),t(_n),t(tr),t(Vt),t(xt),t(Jn),t(wn),t(Ae),t(bn),t(rt),t(_i)})(gc);function ck(){const{findNode:e}=ve(),t=de(new nS.graphlib.Graph),n=de("LR");function r(i,o,s){const a=[],u=[],l=[],c={};for(const p of i)Object.keys(p).includes("parentNode")&&(c[p.parentNode]||(c[p.parentNode]=[]),c[p.parentNode].push(p.id));for(const p of i)if(!Object.keys(c).includes(p.id)){const g=e(p.id);g&&a.push({name:p.id,width:g.dimensions.width||150,height:g.dimensions.height||50})}for(const p of o)u.push({source:p.source,target:p.target});for(const[p,g]of Object.entries(c))l.push({leaves:g.map(m=>a.findIndex(y=>y.name==m)),name:p});return gc.adaptor({}).linkDistance(200).avoidOverlaps(!0).handleDisconnected(!0).size([1e3,1e3]).nodes(a).links(u).groups(l).start(),console.log(a),[...l.map(p=>{const g=e(p.name);return g&&(g.style.width=p.bounds.X-p.bounds.x+"px",g.style.height=p.bounds.Y-p.bounds.y+"px",g.style.dimensions={width:p.bounds.x-p.bounds.X,height:p.bounds.y-p.bounds.Y}),{...g,position:{x:p.bounds.x,y:p.bounds.y},dimensions:{width:p.bounds.x-p.bounds.X,height:p.bounds.y-p.bounds.Y}}}),...a.map(p=>{const g=e(p.name),m=p;let y=m.x,_=m.y;return m.parent&&m.parent.bounds&&(y=m.x-m.parent.bounds.x,_=m.y-m.parent.bounds.y),{...g,position:{x:y-100,y:_-80}}})]}return{graph:t,layout:r,previousDirection:n}}const dk={class:"iflexed"},_k=pe({__name:"Modeling",setup(e){const t=new jr({length:10}),n=de(void 0),r=Fe(),i=Io(),{onConnect:o,addEdges:s,onNodeDragStop:a,getNodes:u,fitView:l,setNodes:c}=ve(),d=de(new Map),h=de(new Map);dt(async()=>{const{loadResource:E,store:k,getResource:I,ecorePackage:T,getResourceSet:z,efc:V}=Ot();console.log();const N=await(await fetch("org.eclipse.daanse.rdb.structure.ecore")).text();console.log(N);const X=await(await fetch("org.eclipse.daanse.rolap.mapping.ecore")).text();console.log(X);const v=T,$=z();$==null||$.getPackageRegistry().registerPackage(v);const b=$==null?void 0:$.createResource(new hs("org.eclipse.daanse.rdb.structure.ecore")),P=$==null?void 0:$.createResource(new hs("org.eclipse.daanse.rolap.mapping.ecore"));if(b==null||b.loadFromString(N),P==null||P.loadFromString(X),console.log(b),console.log(P),b)for(const A of b.eAllContents()){const C=t.rnd();Fe().setInstance(C,A)}if(P)for(const A of P.eAllContents()){const C=t.rnd();Fe().setInstance(C,A)}}),we(i.currentRoute,()=>{const{instanceid:E}=i.currentRoute.value.params;n.value=Fe().getInstance(E)});const{graph:f,layout:p,previousDirection:g}=ck(),m=te({get:()=>{let E=[];const k=new Map,I=[];r.instances.value.forEach(($,b)=>{if($.eClass().name=="EPackage"){const P=$.eGet($.eClass().getEStructuralFeatureFromName("name")),A=$.eGet($.eClass().getEStructuralFeatureFromName("nsURI"));$.eGet($.eClass().getEStructuralFeatureFromName("nsPrefix")),I.push({id:b,name:P,instance:$,nsURI:A}),k.set(b,{packageNode:null,classes:new Map})}}),r.instances.value.forEach(($,b)=>{if($.eClass().name=="EClass"){const P=$.eClass().getEStructuralFeatureFromName("ePackage"),A=r.identify($.eGet(P)),C={id:b,instance:$,parent:A};A&&k.has(A)&&k.get(A).classes.set(b,C)}});const T=500,z=80,V=350,O=40,N=40,Y=50,X=60;let v=50;return I.forEach(($,b)=>{var ue;const P=(ue=k.get($.id))==null?void 0:ue.classes;if(!P||P.size===0)return;const A=Array.from(P.keys()),C=3,M=new Map;let R=N,U=O,F=0,G=0,q=0,oe=O;A.forEach((J,ee)=>{const x=h.value.get(J);let w=450,B=V;if(x){const D=typeof x.width=="string"?x.width.replace("px",""):x.width,L=typeof x.height=="string"?x.height.replace("px",""):x.height,K=parseFloat(D),j=parseFloat(L);!isNaN(K)&&K>0&&(w=K),!isNaN(j)&&j>0&&(B=j)}G>=C&&(R=N,U+=F+z,oe=U,F=0,G=0),M.set(J,{x:R,y:U,width:w,height:B}),F=Math.max(F,B),q=Math.max(q,R+w),R+=w+T,G++}),oe=U+F;const re=q+N,se=oe+O,ie=d.value.get($.id)||{x:v,y:Y};E.push({id:$.id,label:"EPackage: "+$.name+" ("+$.nsURI+")",data:{toolbarPosition:Q.Top,instance:$.instance},position:Tt(ie),type:"package",style:{backgroundColor:"rgba(226,231,229,0.5)",width:re+"px",height:se+"px"}}),v+=re+X,P.forEach((J,ee)=>{const x=r.getInstance(ee);if(x){const w=M.get(ee);if(!w)return;const B=d.value.get(ee)||{x:w.x,y:w.y};E.push({id:ee,label:"EClass",data:{toolbarPosition:Q.Top,instance:x},position:Tt(B),type:"class",parentNode:$.id,expandParent:!0})}})}),E},set:E=>{}});a(E=>{console.log(E.node),u.value.map(k=>{d.value.set(k.id,k.position),h.value.set(k.id,{height:k.dimensions.height+"px",width:k.dimensions.width+"px"})})});const y=te(()=>{let E=[];return r.instances.value.forEach((k,I)=>{if(k.eClass().name=="EClass"){const T=k.eClass().getEStructuralFeatureFromName("eSuperTypes"),z=k.eGet(T);for(const N of z){const Y=r.identify(N);E.push({id:`${I}_${Y}`,source:I,sourceHandle:I,target:Y,markerEnd:Dr.ArrowClosed,type:"step"})}const V=k.eClass().getEStructuralFeatureFromName("eReferences"),O=k.eGet(V);for(const N of O)try{const Y=N.eGet(N.eClass().getEStructuralFeatureFromName("eReferenceType")),X=N.eGet(N.eClass().getEStructuralFeatureFromName("name"));let v=-1,$=0;$=N.eGet(N.eClass().getEStructuralFeatureFromName("lowerBound")),v=N.eGet(N.eClass().getEStructuralFeatureFromName("upperBound"));const b=r.identify(Y);let P={id:`${I}_${b}_${X}`,source:I,target:b,sourceHandle:X,targetHandle:"target",type:"step",label:`[${$}:${v}]`,style:{stroke:"orange","stroke-dasharray":"5,10,5"}};E.push(P)}catch(Y){console.log(Y)}}}),E}),_=E=>{i.push({name:st,params:{instanceid:E.node.id}})};o(E=>{const k=r.getInstance(E.source),I=r.getInstance(E.target),T=k==null?void 0:k.eClass().getEStructuralFeatureFromName("eSuperTypes");if(T){const z=k==null?void 0:k.eGet(T);z.add(I),k==null||k.eSet(T,z)}});async function S(E){const k=p(m.value,y.value,E),I=new Map,T=new Map;k.map(z=>{I.set(z.id,z.position),T.set(z.id,{height:z.dimensions.height+"px",width:z.dimensions.width+"px"})}),d.value=I,h.value=T,c(k),ut(()=>{l()})}return(E,k)=>(W(),ne(ze,null,[he(sw,{class:"appmenu"}),ce("div",dk,[he(Kc,{onImport:k[0]||(k[0]=()=>S("TB"))}),he(H(eu),{style:{height:"100%"},layout:"vertical",class:"margin"},{default:$e(()=>[he(H(Ui),{class:"flex items-center justify-center"},{default:$e(()=>[he(H(wm),{nodes:m.value,"onUpdate:nodes":k[1]||(k[1]=I=>m.value=I),edges:y.value,"elevate-edges-on-select":""},{"node-package":$e(I=>[he(Y1,{id:I.id,data:I.data,label:I.label,onNodeClick:_},null,8,["id","data","label"])]),"node-class":$e(I=>[he(tw,{id:I.id,data:I.data,label:I.label,onNodeClick:_,class:"vClass"},null,8,["id","data","label"])]),default:$e(()=>[he(H(G1)),he(H(oy)),he(H(Cm))]),_:1},8,["nodes","edges"])]),_:1}),he(H(Ui),{class:"flex items-center justify-center relative"},{default:$e(()=>[he(H(Zc),{class:"full_abs"},{default:$e(()=>[n.value?(W(),ke(jc,{key:0,modelValue:n.value,"onUpdate:modelValue":k[2]||(k[2]=I=>n.value=I)},null,8,["modelValue"])):be("",!0)]),_:1})]),_:1})]),_:1})])],64))}});export{_k as default};
